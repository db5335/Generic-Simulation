(self.webpackChunkEnergy_Efficient_Simulation=self.webpackChunkEnergy_Efficient_Simulation||[]).push([[792],{792:(br,Zt,ct)=>{"use strict";function nt(e){return"function"==typeof e}function or(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const vi=or(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ve(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Vt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(nt(r))try{r()}catch(o){t=o instanceof vi?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{jt(o)}catch(s){t=t??[],s instanceof vi?t=[...t,...s.errors]:t.push(s)}}if(t)throw new vi(t)}}add(t){var n;if(t&&t!==this)if(this.closed)jt(t);else{if(t instanceof Vt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ve(n,t)}remove(t){const{_finalizers:n}=this;n&&Ve(n,t),t instanceof Vt&&t._removeParent(this)}}Vt.EMPTY=(()=>{const e=new Vt;return e.closed=!0,e})();const Xe=Vt.EMPTY;function wt(e){return e instanceof Vt||e&&"closed"in e&&nt(e.remove)&&nt(e.add)&&nt(e.unsubscribe)}function jt(e){nt(e)?e():e.unsubscribe()}const dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Er={setTimeout(e,t,...n){const{delegate:r}=Er;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Er;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ht(e){Er.setTimeout(()=>{const{onUnhandledError:t}=dt;if(!t)throw e;t(e)})}function $t(){}const ji=zn("C",void 0,void 0);function zn(e,t,n){return{kind:e,value:t,error:n}}let Wn=null;function Dr(e){if(dt.useDeprecatedSynchronousErrorHandling){const t=!Wn;if(t&&(Wn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Wn;if(Wn=null,n)throw r}}else e()}class se extends Vt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,wt(t)&&t.add(this)):this.destination=Ui}static create(t,n,r){return new ze(t,n,r)}next(t){this.isStopped?qn(function Hi(e){return zn("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?qn(function wo(e){return zn("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?qn(ji,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ge=Function.prototype.bind;function De(e,t){return ge.call(e,t)}class Te{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){je(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){je(r)}else je(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){je(n)}}}class ze extends se{constructor(t,n,r){let i;if(super(),nt(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&dt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&De(t.next,o),error:t.error&&De(t.error,o),complete:t.complete&&De(t.complete,o)}):i=t}this.destination=new Te(i)}}function je(e){dt.useDeprecatedSynchronousErrorHandling?function ee(e){dt.useDeprecatedSynchronousErrorHandling&&Wn&&(Wn.errorThrown=!0,Wn.error=e)}(e):Ht(e)}function qn(e,t){const{onStoppedNotification:n}=dt;n&&Er.setTimeout(()=>n(e,t))}const Ui={closed:!0,next:$t,error:function Kt(e){throw e},complete:$t},yi="function"==typeof Symbol&&Symbol.observable||"@@observable";function bn(e){return e}let Xt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function hd(e){return e&&e instanceof se||function fd(e){return e&&nt(e.next)&&nt(e.error)&&nt(e.complete)}(e)&&wt(e)}(n)?n:new ze(n,r,i);return Dr(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Hs(r))((i,o)=>{const s=new ze({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[yi](){return this}pipe(...n){return function bo(e){return 0===e.length?bn:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Hs(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function Hs(e){var t;return null!==(t=e??dt.Promise)&&void 0!==t?t:Promise}const bu=or(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let zr=(()=>{class e extends Xt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Us(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new bu}next(n){Dr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Dr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Dr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?Xe:(this.currentObservers=null,o.push(n),new Vt(()=>{this.currentObservers=null,Ve(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Xt;return n.source=this,n}}return e.create=(t,n)=>new Us(t,n),e})();class Us extends zr{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Xe}}function pe(e){return t=>{if(function Gs(e){return nt(e?.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(e,t,n,r,i){return new Se(e,t,n,r,i)}class Se extends se{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){t.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Sr(e){return this instanceof Sr?(this.v=e,this):new Sr(e)}function Au(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Gi(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Ys=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Mu(e){return nt(e?.then)}function xu(e){return nt(e[yi])}function Zs(e){return Symbol.asyncIterator&&nt(e?.[Symbol.asyncIterator])}function Nu(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ks=function Ru(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ku(e){return nt(e?.[Ks])}function Wr(e){return function Tu(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(v){return Promise.resolve(v).then(f,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(f,v){r[f]&&(i[f]=function(m){return new Promise(function(y,_){o.push([f,m,y,_])>1||u(f,m)})},v&&(i[f]=v(i[f])))}function u(f,v){try{!function c(f){f.value instanceof Sr?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}(r[f](v))}catch(m){h(o[0][3],m)}}function l(f){u("next",f)}function d(f){u("throw",f)}function h(f,v){f(v),o.shift(),o.length&&u(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield Sr(n.read());if(i)return yield Sr(void 0);yield yield Sr(r)}}finally{n.releaseLock()}})}function lt(e){return nt(e?.getReader)}function Yn(e){if(e instanceof Xt)return e;if(null!=e){if(xu(e))return function Ou(e){return new Xt(t=>{const n=e[yi]();if(nt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Ys(e))return function Lu(e){return new Xt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Mu(e))return function Pu(e){return new Xt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ht)})}(e);if(Zs(e))return qr(e);if(ku(e))return function Fu(e){return new Xt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(lt(e))return function w(e){return qr(Wr(e))}(e)}throw Nu(e)}function qr(e){return new Xt(t=>{(function I(e,t){var n,r,i,o;return function Cu(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Au(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function E(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function g(e,t,n=1/0){return nt(t)?g((r,i)=>function Eu(e,t){return pe((n,r)=>{let i=0;n.subscribe(ae(r,o=>{r.next(e.call(t,o,i++))}))})}((o,s)=>t(r,o,i,s))(Yn(e(r,i))),n):("number"==typeof t&&(n=t),pe((r,i)=>function p(e,t,n,r,i,o,s,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&t.complete()},f=m=>c<r?v(m):u.push(m),v=m=>{o&&t.next(m),c++;let y=!1;Yn(n(m,l++)).subscribe(ae(t,_=>{i?.(_),o?f(_):t.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;u.length&&c<r;){const _=u.shift();s?E(t,s,()=>v(_)):v(_)}h()}catch(_){t.error(_)}}))};return e.subscribe(ae(t,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,e,n)))}const T=new Xt(e=>e.complete());function te(e){return e[e.length-1]}function de(e){return function ne(e){return e&&nt(e.schedule)}(te(e))?e.pop():void 0}function Ie(e,t=0){return pe((n,r)=>{n.subscribe(ae(r,i=>E(r,e,()=>r.next(i),t),()=>E(r,e,()=>r.complete(),t),i=>E(r,e,()=>r.error(i),t)))})}function Qe(e,t=0){return pe((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function un(e,t){if(!e)throw new Error("Iterable cannot be null");return new Xt(n=>{E(n,t,()=>{const r=e[Symbol.asyncIterator]();E(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zi(e,t){return t?function Rn(e,t){if(null!=e){if(xu(e))return function ft(e,t){return Yn(e).pipe(Qe(t),Ie(t))}(e,t);if(Ys(e))return function Rt(e,t){return new Xt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Mu(e))return function Ot(e,t){return Yn(e).pipe(Qe(t),Ie(t))}(e,t);if(Zs(e))return un(e,t);if(ku(e))return function an(e,t){return new Xt(n=>{let r;return E(n,t,()=>{r=e[Ks](),E(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>nt(r?.return)&&r.return()})}(e,t);if(lt(e))return function cn(e,t){return un(Wr(e),t)}(e,t)}throw Nu(e)}(e,t):Yn(e)}function Io(...e){const t=de(e),n=function fe(e,t){return"number"==typeof te(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Yn(r[0]):function D(e=1/0){return g(bn,e)}(n)(zi(r,t)):T}class um extends zr{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function Xs(e={}){const{connector:t=(()=>new zr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},v=()=>{const m=s;f(),m?.unsubscribe()};return pe((m,y)=>{c++,!d&&!l&&h();const _=u=u??t();y.add(()=>{c--,0===c&&!d&&!l&&(a=Cd(v,i))}),_.subscribe(y),!s&&c>0&&(s=new ze({next:b=>_.next(b),error:b=>{d=!0,h(),a=Cd(f,n,b),_.error(b)},complete:()=>{l=!0,h(),a=Cd(f,r),_.complete()}}),Yn(m).subscribe(s))})(o)}}function Cd(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new ze({next:()=>{r.unsubscribe(),e()}});return Yn(t(...n)).subscribe(r)}function SI(e,t){return e===t}function ut(e){for(let t in e)if(e[t]===ut)return t;throw Error("Could not find renamed property on target object.")}function Lt(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Lt).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Id(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const TI=ut({__forward_ref__:ut});function Sd(e){return e.__forward_ref__=Sd,e.toString=function(){return Lt(this())},e}function Re(e){return function Td(e){return"function"==typeof e&&e.hasOwnProperty(TI)&&e.__forward_ref__===Sd}(e)?e():e}function Ad(e){return e&&!!e.\u0275providers}class be extends Error{constructor(t,n){super(function ju(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function Le(e){return"string"==typeof e?e:null==e?"":String(e)}function Md(e,t){throw new be(-201,!1)}function Zn(e,t){null==e&&function Ae(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function it(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function So(e){return{providers:e.providers||[],imports:e.imports||[]}}function Hu(e){return dm(e,Gu)||dm(e,fm)}function dm(e,t){return e.hasOwnProperty(t)?e[t]:null}function Uu(e){return e&&(e.hasOwnProperty(xd)||e.hasOwnProperty(OI))?e[xd]:null}const Gu=ut({\u0275prov:ut}),xd=ut({\u0275inj:ut}),fm=ut({ngInjectableDef:ut}),OI=ut({ngInjectorDef:ut});var We=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(We||{});let Nd;function En(e){const t=Nd;return Nd=e,t}function pm(e,t,n){const r=Hu(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&We.Optional?null:void 0!==t?t:void Md(Lt(e))}const gt=globalThis;class Oe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=it({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Qs={},Pd="__NG_DI_FLAG__",Vu="ngTempTokenPath",FI=/\n/gm,mm="__source";let To;function _i(e){const t=To;return To=e,t}function HI(e,t=We.Default){if(void 0===To)throw new be(-203,!1);return null===To?pm(e,void 0,t):To.get(e,t&We.Optional?null:void 0,t)}function qe(e,t=We.Default){return(function hm(){return Nd}()||HI)(Re(e),t)}function mt(e,t=We.Default){return qe(e,$u(t))}function $u(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function Fd(e){const t=[];for(let n=0;n<e.length;n++){const r=Re(e[n]);if(Array.isArray(r)){if(0===r.length)throw new be(900,!1);let i,o=We.Default;for(let s=0;s<r.length;s++){const a=r[s],u=UI(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}t.push(qe(i,o))}else t.push(qe(r))}return t}function UI(e){return e[Pd]}function Yr(e){return{toString:e}.toString()}var zu=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(zu||{}),ar=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ar||{});const Tr={},Je=[],Wu=ut({\u0275cmp:ut}),Bd=ut({\u0275dir:ut}),jd=ut({\u0275pipe:ut}),ym=ut({\u0275mod:ut}),Zr=ut({\u0275fac:ut}),ea=ut({__NG_ELEMENT_ID__:ut}),_m=ut({__NG_ENV_ID__:ut});function wm(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function Hd(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];Em(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function bm(e){return 3===e||4===e||6===e}function Em(e){return 64===e.charCodeAt(0)}function ta(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Dm(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Dm(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const Cm="ng-template";function $I(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==wm(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Im(e){return 4===e.type&&e.value!==Cm}function zI(e,t,n){return t===(4!==e.type||n?e.value:Cm)}function WI(e,t,n){let r=4;const i=e.attrs||[],o=function ZI(e){for(let t=0;t<e.length;t++)if(bm(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const u=t[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!zI(e,u,n)||""===u&&1===t.length){if(ur(r))return!1;s=!0}}else{const c=8&r?u:t[++a];if(8&r&&null!==e.attrs){if(!$I(e.attrs,c,n)){if(ur(r))return!1;s=!0}continue}const d=qI(8&r?"class":u,i,Im(e),n);if(-1===d){if(ur(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==wm(f,c,0)||2&r&&c!==h){if(ur(r))return!1;s=!0}}}}else{if(!s&&!ur(r)&&!ur(u))return!1;if(s&&ur(u))continue;s=!1,r=u|1&r}}return ur(r)||s}function ur(e){return 0==(1&e)}function qI(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function KI(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Sm(e,t,n=!1){for(let r=0;r<t.length;r++)if(WI(e,t[r],n))return!0;return!1}function Tm(e,t){return e?":not("+t.trim()+")":t}function QI(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ur(s)&&(t+=Tm(o,i),i=""),r=s,o=o||!ur(r);n++}return""!==i&&(t+=Tm(o,i)),t}function Ud(e){return Yr(()=>{const t=function Mm(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Tr,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||Je,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Am(e.inputs,t),outputs:Am(e.outputs)}}(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===zu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ar.Emulated,styles:e.styles||Je,_:null,schemas:e.schemas||null,tView:null,id:""};!function xm(e){e.features?.forEach(t=>t(e))}(n);const r=e.dependencies;return n.directiveDefs=qu(r,!1),n.pipeDefs=qu(r,!0),n.id=function sS(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function nS(e){return Ye(e)||zt(e)}function rS(e){return null!==e}function na(e){return Yr(()=>({type:e.type,bootstrap:e.bootstrap||Je,declarations:e.declarations||Je,imports:e.imports||Je,exports:e.exports||Je,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Am(e,t){if(null==e)return Tr;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function Ye(e){return e[Wu]||null}function zt(e){return e[Bd]||null}function ln(e){return e[jd]||null}function qu(e,t){if(!e)return null;const n=t?ln:nS;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(rS)}const St=0,me=1,He=2,bt=3,cr=4,ia=5,Qt=6,Ao=7,Mt=8,wi=9,Mo=10,Pe=11,oa=12,Nm=13,xo=14,xt=15,sa=16,No=17,Ar=18,aa=19,Rm=20,bi=21,Kr=22,ua=23,ca=24,Ge=25,Gd=1,km=2,Mr=7,Ro=9,Wt=11;function Cn(e){return Array.isArray(e)&&"object"==typeof e[Gd]}function dn(e){return Array.isArray(e)&&!0===e[Gd]}function Vd(e){return 0!=(4&e.flags)}function qi(e){return e.componentOffset>-1}function Zu(e){return 1==(1&e.flags)}function lr(e){return!!e.template}function $d(e){return 0!=(512&e[He])}function Yi(e,t){return e.hasOwnProperty(Zr)?e[Zr]:null}let qt=null,Ku=!1;function Xn(e){const t=qt;return qt=e,t}const Pm={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Bm(e){if(!da(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Um(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Hm(e){e.dirty=!0,function jm(e){if(void 0===e.liveConsumerNode)return;const t=Ku;Ku=!0;try{for(const n of e.liveConsumerNode)n.dirty||Hm(n)}finally{Ku=t}}(e),e.consumerMarkedDirty?.(e)}function Wd(e){return e&&(e.nextProducerIndex=0),Xn(e)}function qd(e,t){if(Xn(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(da(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Xu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Um(e){ko(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(Bm(n),r!==n.version))return!0}return!1}function Gm(e){if(ko(e),da(e))for(let t=0;t<e.producerNode.length;t++)Xu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Xu(e,t){if(function $m(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),ko(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Xu(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];ko(i),i.producerIndexOfThis[r]=t}}function da(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function ko(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let zm=null;const Zm=()=>{},_S=(()=>({...Pm,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Zm}))();class wS{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Km(e){return e.type.prototype.ngOnChanges&&(e.setInput=ES),bS}function bS(){const e=Qm(this),t=e?.current;if(t){const n=e.previous;if(n===Tr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function ES(e,t,n,r){const i=this.declaredInputs[n],o=Qm(e)||function DS(e,t){return e[Xm]=t}(e,{previous:Tr,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new wS(u&&u.currentValue,t,a===Tr),e[r]=t}const Xm="__ngSimpleChanges__";function Qm(e){return e[Xm]||null}const xr=function(e,t,n){};function vt(e){for(;Array.isArray(e);)e=e[St];return e}function In(e,t){return vt(t[e.index])}function tv(e,t){return e.data[t]}function Ln(e,t){const n=t[e];return Cn(n)?n:n[St]}function Di(e,t){return null==t?null:e[t]}function nv(e){e[No]=0}function MS(e){1024&e[He]||(e[He]|=1024,iv(e,1))}function rv(e){1024&e[He]&&(e[He]&=-1025,iv(e,-1))}function iv(e,t){let n=e[bt];if(null===n)return;n[ia]+=t;let r=n;for(n=n[bt];null!==n&&(1===t&&1===r[ia]||-1===t&&0===r[ia]);)n[ia]+=t,r=n,n=n[bt]}const Me={lFrame:vv(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function av(){return Me.bindingsEnabled}function J(){return Me.lFrame.lView}function Ze(){return Me.lFrame.tView}function Yt(){let e=lv();for(;null!==e&&64===e.type;)e=e.parent;return e}function lv(){return Me.lFrame.currentTNode}function Nr(e,t){const n=Me.lFrame;n.currentTNode=e,n.isParent=t}function Qd(){return Me.lFrame.isParent}function Po(){return Me.lFrame.bindingIndex++}function US(e,t){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=e,ef(t)}function ef(e){Me.lFrame.currentDirectiveIndex=e}function nf(e){Me.lFrame.currentQueryIndex=e}function VS(e){const t=e[me];return 2===t.type?t.declTNode:1===t.type?e[Qt]:null}function gv(e,t,n){if(n&We.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&We.Host||(i=VS(o),null===i||(o=o[xo],10&i.type))););if(null===i)return!1;t=i,e=o}const r=Me.lFrame=mv();return r.currentTNode=t,r.lView=e,!0}function rf(e){const t=mv(),n=e[me];Me.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function mv(){const e=Me.lFrame,t=null===e?null:e.child;return null===t?vv(e):t}function vv(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function yv(){const e=Me.lFrame;return Me.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const _v=yv;function of(){const e=yv();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function hn(){return Me.lFrame.selectedIndex}function Zi(e){Me.lFrame.selectedIndex=e}let bv=!0;function ec(){return bv}function Ci(e){bv=e}function tc(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),u&&(e.viewHooks??=[]).push(-n,u),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),null!=l&&(e.destroyHooks??=[]).push(n,l)}}function nc(e,t,n){Ev(e,t,3,n)}function rc(e,t,n,r){(3&e[He])===n&&Ev(e,t,n,r)}function sf(e,t){let n=e[He];(3&n)===t&&(n&=8191,n+=1,e[He]=n)}function Ev(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let u=void 0!==r?65535&e[No]:0;u<s;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[No]+=65536),(a<o||-1==o)&&(XS(e,n,t,u),e[No]=(4294901760&e[No])+u+2),u++}function Dv(e,t){xr(4,e,t);const n=Xn(null);try{t.call(e)}finally{Xn(n),xr(5,e,t)}}function XS(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[He]>>13<e[No]>>16&&(3&e[He])===t&&(e[He]+=8192,Dv(a,o)):Dv(a,o)}const Fo=-1;class ha{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function pa(e){return 32767&e}function ga(e,t){let n=function tT(e){return e>>16}(e),r=t;for(;n>0;)r=r[xo],n--;return r}let cf=!0;function ic(e){const t=cf;return cf=e,t}const Cv=255,Iv=5;let nT=0;const Rr={};function oc(e,t){const n=Sv(e,t);if(-1!==n)return n;const r=t[me];r.firstCreatePass&&(e.injectorIndex=t.length,lf(r.data,e),lf(t,null),lf(r.blueprint,null));const i=sc(e,t),o=e.injectorIndex;if(function uf(e){return e!==Fo}(i)){const s=pa(i),a=ga(i,t),u=a[me].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|u[s+c]}return t[o+8]=i,o}function lf(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Sv(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function sc(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=kv(i),null===r)return Fo;if(n++,i=i[xo],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Fo}function df(e,t,n){!function rT(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ea)&&(r=n[ea]),null==r&&(r=n[ea]=nT++);const i=r&Cv;t.data[e+(i>>Iv)]|=1<<i}(e,t,n)}function Tv(e,t,n){if(n&We.Optional||void 0!==e)return e;Md()}function Av(e,t,n,r){if(n&We.Optional&&void 0===r&&(r=null),!(n&(We.Self|We.Host))){const i=e[wi],o=En(void 0);try{return i?i.get(t,r,n&We.Optional):pm(t,r,n&We.Optional)}finally{En(o)}}return Tv(r,0,n)}function Mv(e,t,n,r=We.Default,i){if(null!==e){if(2048&t[He]&&!(r&We.Self)){const s=function lT(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[He]&&!(512&s[He]);){const a=xv(o,s,n,r|We.Self,Rr);if(a!==Rr)return a;let u=o.parent;if(!u){const c=s[Rm];if(c){const l=c.get(n,Rr,r);if(l!==Rr)return l}u=kv(s),s=s[xo]}o=u}return i}(e,t,n,r,Rr);if(s!==Rr)return s}const o=xv(e,t,n,r,Rr);if(o!==Rr)return o}return Av(t,n,r,i)}function xv(e,t,n,r,i){const o=function sT(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ea)?e[ea]:void 0;return"number"==typeof t?t>=0?t&Cv:uT:t}(n);if("function"==typeof o){if(!gv(t,e,r))return r&We.Host?Tv(i,0,r):Av(t,n,r,i);try{let s;if(s=o(r),null!=s||r&We.Optional)return s;Md()}finally{_v()}}else if("number"==typeof o){let s=null,a=Sv(e,t),u=Fo,c=r&We.Host?t[xt][Qt]:null;for((-1===a||r&We.SkipSelf)&&(u=-1===a?sc(e,t):t[a+8],u!==Fo&&Rv(r,!1)?(s=t[me],a=pa(u),t=ga(u,t)):a=-1);-1!==a;){const l=t[me];if(Nv(o,a,l.data)){const d=oT(a,t,n,s,r,c);if(d!==Rr)return d}u=t[a+8],u!==Fo&&Rv(r,t[me].data[a+8]===c)&&Nv(o,a,t)?(s=l,a=pa(u),t=ga(u,t)):a=-1}}return i}function oT(e,t,n,r,i,o){const s=t[me],a=s.data[e+8],l=function ac(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,u=e.directiveStart,l=o>>20,h=i?a+l:e.directiveEnd;for(let f=r?a:a+l;f<h;f++){const v=s[f];if(f<u&&n===v||f>=u&&v.type===n)return f}if(i){const f=s[u];if(f&&lr(f)&&f.type===n)return u}return null}(a,s,n,null==r?qi(a)&&cf:r!=s&&0!=(3&a.type),i&We.Host&&o===a);return null!==l?Ki(t,s,l,a):Rr}function Ki(e,t,n,r){let i=e[n];const o=t.data;if(function QS(e){return e instanceof ha}(i)){const s=i;s.resolving&&function AI(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new be(-200,`Circular dependency in DI detected for ${e}${n}`)}(function rt(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Le(e)}(o[n]));const a=ic(s.canSeeViewProviders);s.resolving=!0;const c=s.injectImpl?En(s.injectImpl):null;gv(e,r,We.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function KS(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Km(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==c&&En(c),ic(a),s.resolving=!1,_v()}}return i}function Nv(e,t,n){return!!(n[t+(e>>Iv)]&1<<e)}function Rv(e,t){return!(e&We.Self||e&We.Host&&t)}class pn{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Mv(this._tNode,this._lView,t,$u(r),n)}}function uT(){return new pn(Yt(),J())}function kv(e){const t=e[me],n=t.type;return 2===n?t.declTNode:1===n?e[Qt]:null}function Vo(e,t){e.forEach(n=>Array.isArray(n)?Vo(n,t):t(n))}function uc(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}var Ii=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ii||{});const Ef=new Map;let UT=0;const Cf="__ngContext__";function Jt(e,t){Cn(t)?(e[Cf]=t[aa],function VT(e){Ef.set(e[aa],e)}(t)):e[Cf]=t}let If;function Sf(e,t){return If(e,t)}function ba(e){const t=e[bt];return dn(t)?t[bt]:t}function ny(e){return iy(e[oa])}function ry(e){return iy(e[cr])}function iy(e){for(;null!==e&&!dn(e);)e=e[cr];return e}function qo(e,t,n,r,i){if(null!=r){let o,s=!1;dn(r)?o=r:Cn(r)&&(s=!0,r=r[St]);const a=vt(r);0===e&&null!==n?null==i?uy(t,n,a):Xi(t,n,a,i||null,!0):1===e&&null!==n?Xi(t,n,a,i||null,!0):2===e?function bc(e,t,n){const r=function _c(e,t){return e.parentNode(t)}(e,t);r&&function u1(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function d1(e,t,n,r,i){const o=n[Mr];o!==vt(n)&&qo(t,e,r,o,i);for(let a=Wt;a<n.length;a++){const u=n[a];Da(u[me],u,e,t,r,o)}}(t,e,o,n,i)}}function vc(e,t,n){return e.createElement(t,n)}function sy(e,t){const n=e[Ro],r=n.indexOf(t);rv(t),n.splice(r,1)}function Mf(e,t){if(!(256&t[He])){t[He]&=-129,t[He]|=256,function a1(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof ha)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];xr(4,a,u);try{u.call(a)}finally{xr(5,a,u)}}else{xr(4,i,o);try{o.call(i)}finally{xr(5,i,o)}}}}}(e,t),function s1(e,t){const n=e.cleanup,r=t[Ao];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[Ao]=null);const i=t[bi];if(null!==i){t[bi]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[me].type&&t[Pe].destroy();const n=t[sa];if(null!==n&&dn(t[bt])){n!==t[bt]&&sy(n,t);const r=t[Ar];null!==r&&r.detachView(e)}!function $T(e){Ef.delete(e[aa])}(t)}}function xf(e,t,n){return function ay(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[St];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===ar.None||o===ar.Emulated)return null}return In(r,n)}}(e,t.parent,n)}function Xi(e,t,n,r,i){e.insertBefore(t,n,r,i)}function uy(e,t,n){e.appendChild(t,n)}function cy(e,t,n,r,i){null!==r?Xi(e,t,n,r,i):uy(e,t,n)}let Nf,Lf,fy=function dy(e,t,n){return 40&e.type?In(e,n):null};function wc(e,t,n,r){const i=xf(e,r,t),o=t[Pe],a=function ly(e,t,n){return fy(e,t,n)}(r.parent||t[Qt],r,t);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)cy(o,i,n[u],a,!1);else cy(o,i,n,a,!1);void 0!==Nf&&Nf(o,r,t,n,i)}function py(e,t){return null!==t?e[xt][Qt].projection[t.projection]:null}function kf(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===t&&(a&&Jt(vt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)kf(e,t,n.child,r,i,o,!1),qo(t,e,i,a,o);else if(32&u){const c=Sf(n,r);let l;for(;l=c();)qo(t,e,i,l,o);qo(t,e,i,a,o)}else 16&u?my(e,t,r,n,i,o):qo(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Da(e,t,n,r,i,o){kf(n,r,e.firstChild,t,i,o,!1)}function my(e,t,n,r,i,o){const s=n[xt],u=s[Qt].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)qo(t,e,i,u[c],o);else{let c=u;const l=s[bt];(function pc(e){return 128==(128&e.flags)})(r)&&(c.flags|=128),kf(e,t,c,l,i,o,!0)}}function vy(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function yy(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&Hd(e,t,r),null!==i&&vy(e,t,i),null!==o&&function h1(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}const Ic=new Oe("ENVIRONMENT_INITIALIZER"),Ny=new Oe("INJECTOR",-1),Ry=new Oe("INJECTOR_DEF_TYPES");class Uf{get(t,n=Qs){if(n===Qs){const r=new Error(`NullInjectorError: No provider for ${Lt(t)}!`);throw r.name="NullInjectorError",r}return n}}function U1(...e){return{\u0275providers:Oy(0,e),\u0275fromNgModule:!0}}function Oy(e,...t){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Vo(t,s=>{const a=s;Sc(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Ly(i,o),n}function Ly(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];Gf(i,o=>{t(o,r)})}}function Sc(e,t,n,r){if(!(e=Re(e)))return!1;let i=null,o=Uu(e);const s=!o&&Ye(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const u=e.ngModule;if(o=Uu(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Sc(c,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Vo(o.imports,l=>{Sc(l,t,n,r)&&(c||=[],c.push(l))})}finally{}void 0!==c&&Ly(c,t)}if(!a){const c=Yi(i)||(()=>new i);t({provide:i,useFactory:c,deps:Je},i),t({provide:Ry,useValue:i,multi:!0},i),t({provide:Ic,useValue:()=>qe(i),multi:!0},i)}const u=o.providers;if(null!=u&&!a){const c=e;Gf(u,l=>{t(l,c)})}}}return i!==e&&void 0!==e.providers}function Gf(e,t){for(let n of e)Ad(n)&&(n=n.\u0275providers),Array.isArray(n)?Gf(n,t):t(n)}const G1=ut({provide:String,useValue:ut});function Vf(e){return null!==e&&"object"==typeof e&&G1 in e}function Qi(e){return"function"==typeof e}const $f=new Oe("Set Injector scope."),Tc={},$1={};let zf;function Ac(){return void 0===zf&&(zf=new Uf),zf}class ei{}class Xo extends ei{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qf(t,s=>this.processProvider(s)),this.records.set(Ny,Qo(void 0,this)),i.has("environment")&&this.records.set(ei,Qo(void 0,this));const o=this.records.get($f);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Ry.multi,Je,We.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=_i(this),r=En(void 0);try{return t()}finally{_i(n),En(r)}}get(t,n=Qs,r=We.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(_m))return t[_m](this);r=$u(r);const o=_i(this),s=En(void 0);try{if(!(r&We.SkipSelf)){let u=this.records.get(t);if(void 0===u){const c=function Z1(e){return"function"==typeof e||"object"==typeof e&&e instanceof Oe}(t)&&Hu(t);u=c&&this.injectableDefInScope(c)?Qo(Wf(t),Tc):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&We.Self?Ac():this.parent).get(t,n=r&We.Optional&&n===Qs?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Vu]=a[Vu]||[]).unshift(Lt(t)),o)throw a;return function GI(e,t,n,r){const i=e[Vu];throw t[mm]&&i.unshift(t[mm]),e.message=function VI(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Lt(t);if(Array.isArray(t))i=t.map(Lt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Lt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(FI,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Vu]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{En(s),_i(o)}}resolveInjectorInitializers(){const t=_i(this),n=En(void 0);try{const i=this.get(Ic.multi,Je,We.Self);for(const o of i)o()}finally{_i(t),En(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Lt(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(t){let n=Qi(t=Re(t))?t:Re(t&&t.provide);const r=function W1(e){return Vf(e)?Qo(void 0,e.useValue):Qo(function By(e,t,n){let r;if(Qi(e)){const i=Re(e);return Yi(i)||Wf(i)}if(Vf(e))r=()=>Re(e.useValue);else if(function Fy(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Fd(e.deps||[]));else if(function Py(e){return!(!e||!e.useExisting)}(e))r=()=>qe(Re(e.useExisting));else{const i=Re(e&&(e.useClass||e.provide));if(!function q1(e){return!!e.deps}(e))return Yi(i)||Wf(i);r=()=>new i(...Fd(e.deps))}return r}(e),Tc)}(t);if(Qi(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Qo(void 0,Tc,!0),i.factory=()=>Fd(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Tc&&(n.value=$1,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Y1(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=Re(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Wf(e){const t=Hu(e),n=null!==t?t.factory:Yi(e);if(null!==n)return n;if(e instanceof Oe)throw new be(204,!1);if(e instanceof Function)return function z1(e){const t=e.length;if(t>0)throw function ya(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new be(204,!1);const n=function kI(e){return e&&(e[Gu]||e[fm])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new be(204,!1)}function Qo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function qf(e,t){for(const n of e)Array.isArray(n)?qf(n,t):n&&Ad(n)?qf(n.\u0275providers,t):t(n)}const Mc=new Oe("AppId",{providedIn:"root",factory:()=>K1}),K1="ng",jy=new Oe("Platform Initializer"),Jo=new Oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Hy=new Oe("CSP nonce",{providedIn:"root",factory:()=>function Zo(){if(void 0!==Lf)return Lf;if(typeof document<"u")return document;throw new be(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Uy=(e,t,n)=>null;function th(e,t,n=!1){return Uy(e,t,n)}class sA{}class $y{}class uA{resolveComponentFactory(t){throw function aA(e){const t=Error(`No component factory found for ${Lt(e)}.`);return t.ngComponent=e,t}(t)}}let Lc=(()=>{class e{static{this.NULL=new uA}}return e})();function cA(){return ns(Yt(),J())}function ns(e,t){return new rs(In(e,t))}let rs=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=cA}}return e})();class Wy{}let ih=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function dA(){const e=J(),n=Ln(Yt().index,e);return(Cn(n)?n:e)[Pe]}()}}return e})(),fA=(()=>{class e{static{this.\u0275prov=it({token:e,providedIn:"root",factory:()=>null})}}return e})();class oh{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const hA=new oh("16.2.12"),sh={};function Ky(e,t=null,n=null,r){const i=Xy(e,t,n,r);return i.resolveInjectorInitializers(),i}function Xy(e,t=null,n=null,r,i=new Set){const o=[n||Je,U1(e)];return r=r||("object"==typeof e?void 0:Lt(e)),new Xo(o,t||Ac(),r||null,i)}let kr=(()=>{class e{static{this.THROW_IF_NOT_FOUND=Qs}static{this.NULL=new Uf}static create(n,r){if(Array.isArray(n))return Ky({name:""},r,n,"");{const i=n.name??"";return Ky({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=it({token:e,providedIn:"any",factory:()=>qe(Ny)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function uh(e){return e.ngOriginalError}class ti{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&uh(t);for(;n&&uh(n);)n=uh(n);return n||null}}function ch(e){return t=>{setTimeout(e,void 0,t)}}const ni=class bA extends zr{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const u=t;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=ch(o),i&&(i=ch(i)),s&&(s=ch(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof Vt&&t.add(a),a}};function Jy(...e){}class Tt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ni(!1),this.onMicrotaskEmpty=new ni(!1),this.onStable=new ni(!1),this.onError=new ni(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function EA(){const e="function"==typeof gt.requestAnimationFrame;let t=gt[e?"requestAnimationFrame":"setTimeout"],n=gt[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function IA(e){const t=()=>{!function CA(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(gt,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,dh(e),e.isCheckStableRunning=!0,lh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),dh(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function TA(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return e_(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),t_(e)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return e_(e),n.invoke(i,o,s,a,u)}finally{e.shouldCoalesceRunChangeDetection&&t(),t_(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,dh(e),lh(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Tt.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(Tt.isInAngularZone())throw new be(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,DA,Jy,Jy);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const DA={};function lh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function dh(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function e_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function t_(e){e._nesting--,lh(e)}class SA{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ni,this.onMicrotaskEmpty=new ni,this.onStable=new ni,this.onError=new ni}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const n_=new Oe("",{providedIn:"root",factory:r_});function r_(){const e=mt(Tt);let t=!0;return Io(new Xt(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Xt(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{Tt.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Xs()))}let fh=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=it({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Ma(e){for(;e;){e[He]|=64;const t=ba(e);if($d(e)&&!t)return e;e=t}return null}const u_=new Oe("",{providedIn:"root",factory:()=>!1});let Bc=null;function f_(e,t){return e[t]??g_()}function h_(e,t){const n=g_();n.producerNode?.length&&(e[t]=Bc,n.lView=e,Bc=p_())}const FA={...Pm,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ma(e.lView)},lView:null};function p_(){return Object.create(FA)}function g_(){return Bc??=p_(),Bc}const Fe={};function hh(e){m_(Ze(),J(),hn()+e,!1)}function m_(e,t,n,r){if(!r)if(3==(3&t[He])){const o=e.preOrderCheckHooks;null!==o&&nc(t,o,n)}else{const o=e.preOrderHooks;null!==o&&rc(t,o,0,n)}Zi(n)}function Be(e,t=We.Default){const n=J();return null===n?qe(e,t):Mv(Yt(),n,Re(e),t)}function jc(e,t,n,r,i,o,s,a,u,c,l){const d=t.blueprint.slice();return d[St]=i,d[He]=140|r,(null!==c||e&&2048&e[He])&&(d[He]|=2048),nv(d),d[bt]=d[xo]=e,d[Mt]=n,d[Mo]=s||e&&e[Mo],d[Pe]=a||e&&e[Pe],d[wi]=u||e&&e[wi]||null,d[Qt]=o,d[aa]=function GT(){return UT++}(),d[Kr]=l,d[Rm]=c,d[xt]=2==t.type?e[xt]:d,d}function ss(e,t,n,r,i){let o=e.data[t];if(null===o)o=function ph(e,t,n,r,i){const o=lv(),s=Qd(),u=e.data[t]=function WA(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function Lo(){return null!==Me.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u,u.prev=o)),u}(e,t,n,r,i),function HS(){return Me.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function fa(){const e=Me.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Nr(o,!0),o}function xa(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function v_(e,t,n,r,i){const o=f_(t,ua),s=hn(),a=2&r;try{Zi(-1),a&&t.length>Ge&&m_(e,t,Ge,!1),xr(a?2:0,i);const c=a?o:null,l=Wd(c);try{null!==c&&(c.dirty=!1),n(r,i)}finally{qd(c,l)}}finally{a&&null===t[ua]&&h_(t,ua),Zi(s),xr(a?3:1,i)}}function gh(e,t,n){if(Vd(t)){const r=Xn(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{Xn(r)}}}function y_(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=yh(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function yh(e,t,n,r,i,o,s,a,u,c,l){const d=Ge+r,h=d+i,f=function HA(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:Fe);return n}(d,h),v="function"==typeof c?c():c;return f[me]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1,ssrId:l}}let __=e=>null;function w_(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?b_(n,t,i,o):r.hasOwnProperty(i)&&b_(n,t,r[i],o)}return n}function b_(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function E_(e,t,n,r,i,o){for(let c=0;c<r.length;c++)df(oc(n,t),e,r[c].type);!function iM(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=xa(e,t,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=ta(n.mergedAttrs,l.hostAttrs),oM(e,n,t,u,l),rM(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function qA(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let u=null,c=null;for(let l=t.directiveStart;l<i;l++){const d=o[l],h=n?n.get(d):null,v=h?h.outputs:null;u=w_(d.inputs,l,u,h?h.inputs:null),c=w_(d.outputs,l,c,v);const m=null===u||null===s||Im(t)?null:uM(u,l,s);a.push(m)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=8),u.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=u,t.outputs=c}(e,n,o)}function D_(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function GS(){return Me.lFrame.currentDirectiveIndex}();try{Zi(o);for(let a=r;a<i;a++){const u=e.data[a],c=t[a];ef(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&eM(u,c)}}finally{Zi(-1),ef(s)}}function eM(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function wh(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function rM(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;lr(t)&&(n[""]=e)}}function oM(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Yi(i.type)),s=new ha(o,lr(i),Be);e.blueprint[r]=s,n[r]=s,function XA(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function QA(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,xa(e,n,i.hostVars,Fe),i)}function aM(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)C_(r,n,s[a++],s[a++],s[a++])}function C_(e,t,n,r,i){const o=Xn(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{Xn(o)}}function uM(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function S_(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];nf(n[r]),s.contentQueries(2,t[o],o)}}}function Hc(e,t){return e[oa]?e[Nm][cr]=t:e[oa]=t,e[Nm]=t,t}function Eh(e,t,n){nf(0);const r=Xn(null);try{t(e,n)}finally{Xn(r)}}function x_(e,t){const n=e[wi],r=n?n.get(ti,null):null;r&&r.handleError(t)}function Dh(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];C_(e.data[s],t[s],r,a,i)}}function ii(e,t,n){const r=function Ju(e,t){return vt(t[e])}(t,e);!function oy(e,t,n){e.setValue(t,n)}(e[Pe],r,n)}function cM(e,t){const n=Ln(t,e),r=n[me];!function lM(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[St];null!==i&&null===n[Kr]&&(n[Kr]=th(i,n[wi])),Ch(r,n,n[Mt])}function Ch(e,t,n){rf(t);try{const r=e.viewQuery;null!==r&&Eh(1,r,n);const i=e.template;null!==i&&v_(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&S_(e,t),e.staticViewQueries&&Eh(2,e.viewQuery,n);const o=e.components;null!==o&&function dM(e,t){for(let n=0;n<t.length;n++)cM(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[He]&=-5,of()}}let N_=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function yS(e,t,n){const r=Object.create(_S);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>Hm(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Um(r))return;r.hasRun=!0;const s=Wd(r);try{r.cleanupFn(),r.cleanupFn=Zm,r.fn(i)}finally{qd(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,c=>{this.all.has(c)&&this.queue.set(c,o)},i);let a;this.all.add(s),s.notify();const u=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(u),{destroy:u}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=it({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Uc(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Id(i,a):2==o&&(r=Id(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Na(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];null!==o&&r.push(vt(o)),dn(o)&&R_(o,r);const s=n.type;if(8&s)Na(e,t,n.child,r);else if(32&s){const a=Sf(n,t);let u;for(;u=a();)r.push(u)}else if(16&s){const a=py(t,n);if(Array.isArray(a))r.push(...a);else{const u=ba(t[xt]);Na(u[me],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function R_(e,t){for(let n=Wt;n<e.length;n++){const r=e[n],i=r[me].firstChild;null!==i&&Na(r[me],r,i,t)}e[Mr]!==e[St]&&t.push(e[Mr])}function Gc(e,t,n,r=!0){const i=t[Mo],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{k_(e,t,e.template,n)}catch(u){throw r&&x_(t,u),u}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function k_(e,t,n,r){const i=t[He];if(256!=(256&i)){t[Mo].effectManager?.flush(),rf(t);try{nv(t),function fv(e){return Me.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&v_(e,t,n,2,r);const s=3==(3&i);if(s){const c=e.preOrderCheckHooks;null!==c&&nc(t,c,null)}else{const c=e.preOrderHooks;null!==c&&rc(t,c,0,null),sf(t,0)}if(function pM(e){for(let t=ny(e);null!==t;t=ry(t)){if(!t[km])continue;const n=t[Ro];for(let r=0;r<n.length;r++){MS(n[r])}}}(t),O_(t,2),null!==e.contentQueries&&S_(e,t),s){const c=e.contentCheckHooks;null!==c&&nc(t,c)}else{const c=e.contentHooks;null!==c&&rc(t,c,1),sf(t,1)}!function jA(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=f_(t,ca);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Zi(~o);else{const s=o,a=n[++i],u=n[++i];US(a,s),r.dirty=!1;const c=Wd(r);try{u(2,t[s])}finally{qd(r,c)}}}}finally{null===t[ca]&&h_(t,ca),Zi(-1)}}(e,t);const a=e.components;null!==a&&P_(t,a,0);const u=e.viewQuery;if(null!==u&&Eh(2,u,r),s){const c=e.viewCheckHooks;null!==c&&nc(t,c)}else{const c=e.viewHooks;null!==c&&rc(t,c,2),sf(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[He]&=-73,rv(t)}finally{of()}}}function O_(e,t){for(let n=ny(e);null!==n;n=ry(n))for(let r=Wt;r<n.length;r++)L_(n[r],t)}function gM(e,t,n){L_(Ln(t,e),n)}function L_(e,t){if(!function TS(e){return 128==(128&e[He])}(e))return;const n=e[me],r=e[He];if(80&r&&0===t||1024&r||2===t)k_(n,e,n.template,e[Mt]);else if(e[ia]>0){O_(e,1);const i=n.components;null!==i&&P_(e,i,1)}}function P_(e,t,n){for(let r=0;r<t.length;r++)gM(e,t[r],n)}class Ra{get rootNodes(){const t=this._lView,n=t[me];return Na(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mt]}set context(t){this._lView[Mt]=t}get destroyed(){return 256==(256&this._lView[He])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[bt];if(dn(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(function yc(e,t){if(e.length<=Wt)return;const n=Wt+t,r=e[n];if(r){const i=r[sa];null!==i&&i!==e&&sy(i,r),t>0&&(e[n-1][cr]=r[cr]);const o=uc(e,Wt+t);!function e1(e,t){Da(e,t,t[Pe],2,null,null),t[St]=null,t[Qt]=null}(r[me],r);const s=o[Ar];null!==s&&s.detachView(o[me]),r[bt]=null,r[cr]=null,r[He]&=-129}return r}(t,r),uc(n,r))}this._attachedToViewContainer=!1}!function Af(e,t){if(!(256&t[He])){const n=t[Pe];t[ua]&&Gm(t[ua]),t[ca]&&Gm(t[ca]),n.destroyNode&&Da(e,t,n,3,null,null),function r1(e){let t=e[oa];if(!t)return Mf(e[me],e);for(;t;){let n=null;if(Cn(t))n=t[oa];else{const r=t[Wt];r&&(n=r)}if(!n){for(;t&&!t[cr]&&t!==e;)Cn(t)&&Mf(t[me],t),t=t[bt];null===t&&(t=e),Cn(t)&&Mf(t[me],t),n=t&&t[cr]}t=n}}(t)}}(this._lView[me],this._lView)}onDestroy(t){!function ov(e,t){if(256==(256&e[He]))throw new be(911,!1);null===e[bi]&&(e[bi]=[]),e[bi].push(t)}(this._lView,t)}markForCheck(){Ma(this._cdRefInjectingView||this._lView)}detach(){this._lView[He]&=-129}reattach(){this._lView[He]|=128}detectChanges(){Gc(this._lView[me],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function n1(e,t){Da(e,t,t[Pe],2,null,null)}(this._lView[me],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=t}}class mM extends Ra{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Gc(t[me],t,t[Mt],!1)}checkNoChanges(){}get context(){return null}}class F_ extends Lc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ye(t);return new ka(n,this.ngModule)}}function B_(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class yM{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=$u(r);const i=this.injector.get(t,sh,r);return i!==sh||n===sh?i:this.parentInjector.get(t,n,r)}}class ka extends $y{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=B_(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return B_(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function JI(e){return e.map(QI).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof ei?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new yM(t,o):t,a=s.get(Wy,null);if(null===a)throw new be(407,!1);const d={rendererFactory:a,sanitizer:s.get(fA,null),effectManager:s.get(N_,null),afterRenderEventManager:s.get(fh,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",v=r?function UA(e,t,n,r){const o=r.get(u_,!1)||n===ar.ShadowDom,s=e.selectRootElement(t,o);return function GA(e){__(e)}(s),s}(h,r,this.componentDef.encapsulation,s):vc(h,f,function vM(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(f)),_=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let b=null;null!==v&&(b=th(v,s,!0));const S=yh(0,null,null,1,0,null,null,null,null,null,null),R=jc(null,S,null,_,null,null,d,h,s,null,b);let x,F;rf(R);try{const B=this.componentDef;let U,H=null;B.findHostDirectiveDefs?(U=[],H=new Map,B.findHostDirectiveDefs(B,U,H),U.push(B)):U=[B];const $=function wM(e,t){const n=e[me],r=Ge;return e[r]=t,ss(n,r,2,"#host",null)}(R,v),W=function bM(e,t,n,r,i,o,s){const a=i[me];!function EM(e,t,n,r){for(const i of e)t.mergedAttrs=ta(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Uc(t,t.mergedAttrs,!0),null!==n&&yy(r,n,t))}(r,e,t,s);let u=null;null!==t&&(u=th(t,i[wi]));const c=o.rendererFactory.createRenderer(t,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=jc(i,y_(n),null,l,i[e.index],e,o,c,null,null,u);return a.firstCreatePass&&wh(a,e,r.length-1),Hc(i,d),i[e.index]=d}($,v,B,U,R,d,h);F=tv(S,Ge),v&&function CM(e,t,n,r){if(r)Hd(e,n,["ng-version",hA.full]);else{const{attrs:i,classes:o}=function eS(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!ur(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&Hd(e,n,i),o&&o.length>0&&vy(e,n,o.join(" "))}}(h,B,v,r),void 0!==n&&function IM(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(F,this.ngContentSelectors,n),x=function DM(e,t,n,r,i,o){const s=Yt(),a=i[me],u=In(s,i);E_(a,i,s,n,null,r);for(let l=0;l<n.length;l++)Jt(Ki(i,a,s.directiveStart+l,s),i);D_(a,i,s),u&&Jt(u,i);const c=Ki(i,a,s.directiveStart+s.componentOffset,s);if(e[Mt]=i[Mt]=c,null!==o)for(const l of o)l(c,t);return gh(a,s,e),c}(W,B,U,H,R,[SM]),Ch(S,R,null)}finally{of()}return new _M(this.componentType,x,ns(F,R),R,F)}}class _M extends sA{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new mM(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;Dh(o[me],o,i,t,n),this.previousInputValues.set(t,n),Ma(Ln(this._tNode.index,o))}}get injector(){return new pn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function SM(){const e=Yt();tc(J()[me],e)}function en(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Nh(e,t,n){const r=J();return en(r,Po(),t)&&function Fn(e,t,n,r,i,o,s,a){const u=In(t,n);let l,c=t.inputs;!a&&null!=c&&(l=c[r])?(Dh(e,n,l,r,i),qi(t)&&function ZA(e,t){const n=Ln(t,e);16&n[He]||(n[He]|=64)}(n,t.index)):3&t.type&&(r=function YA(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(u,r,i))}(Ze(),function It(){const e=Me.lFrame;return tv(e.tView,e.selectedIndex)}(),r,e,t,r[Pe],n,!1),Nh}function Rh(e,t,n,r,i){const s=i?"class":"style";Dh(e,n,t.inputs[s],s,r)}function oi(e,t,n,r){const i=J(),o=Ze(),s=Ge+e,a=i[Pe],u=o.firstCreatePass?function ax(e,t,n,r,i,o){const s=t.consts,u=ss(t,e,2,r,Di(s,i));return function _h(e,t,n,r){if(av()){const i=null===r?null:{"":-1},o=function tM(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Sm(t,s.selectors,!1))if(r||(r=[]),lr(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),wh(e,t,a.length)}else r.unshift(s),wh(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&E_(e,t,n,s,i,a),i&&function nM(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new be(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=ta(n.mergedAttrs,n.attrs)}(t,n,u,Di(s,o)),null!==u.attrs&&Uc(u,u.attrs,!1),null!==u.mergedAttrs&&Uc(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(s,o,i,t,n,r):o.data[s],c=a0(o,i,u,a,t,e);i[s]=c;const l=Zu(u);return Nr(u,!0),yy(a,c,u),32!=(32&u.flags)&&ec()&&wc(o,i,c,u),0===function NS(){return Me.lFrame.elementDepthCount}()&&Jt(c,i),function RS(){Me.lFrame.elementDepthCount++}(),l&&(function mh(e,t,n){av()&&(function JA(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;qi(n)&&function sM(e,t,n){const r=In(t,e),i=y_(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=Hc(e,jc(e,i,null,s,r,t,null,e[Mo].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||oc(n,t),Jt(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const u=e.data[a],c=Ki(t,e,a,n);Jt(c,t),null!==s&&aM(0,a-i,c,u,0,s),lr(u)&&(Ln(n.index,t)[Mt]=Ki(t,e,a,n))}}(e,t,n,In(n,t)),64==(64&n.flags)&&D_(e,t,n))}(o,i,u),gh(o,u,i)),null!==r&&function vh(e,t,n=In){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}(i,u),oi}function si(){let e=Yt();Qd()?function Jd(){Me.lFrame.isParent=!1}():(e=e.parent,Nr(e,!1));const t=e;(function OS(e){return Me.skipHydrationRootTNode===e})(t)&&function BS(){Me.skipHydrationRootTNode=null}(),function kS(){Me.lFrame.elementDepthCount--}();const n=Ze();return n.firstCreatePass&&(tc(n,e),Vd(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function JS(e){return 0!=(8&e.flags)}(t)&&Rh(n,t,J(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function eT(e){return 0!=(16&e.flags)}(t)&&Rh(n,t,J(),t.stylesWithoutHost,!1),si}function Zc(e,t,n,r){return oi(e,t,n,r),si(),Zc}let a0=(e,t,n,r,i,o)=>(Ci(!0),vc(r,i,function wv(){return Me.lFrame.currentNamespace}()));function Lh(e){return!!e&&"function"==typeof e.then}function d0(e){return!!e&&"function"==typeof e.subscribe}function Kc(e,t,n,r){const i=J(),o=Ze(),s=Yt();return function h0(e,t,n,r,i,o,s){const a=Zu(r),c=e.firstCreatePass&&function A_(e){return e.cleanup||(e.cleanup=[])}(e),l=t[Mt],d=function T_(e){return e[Ao]||(e[Ao]=[])}(t);let h=!0;if(3&r.type||s){const m=In(r,t),y=s?s(m):m,_=d.length,b=s?R=>s(vt(R[r.index])):r.index;let S=null;if(!s&&a&&(S=function hx(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[Ao],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=o,S.__ngLastListenerFn__=o,h=!1;else{o=g0(r,t,l,o,!1);const R=n.listen(y,i,o);d.push(o,R),c&&c.push(i,b,_,_+1)}}else o=g0(r,t,l,o,!1);const f=r.outputs;let v;if(h&&null!==f&&(v=f[i])){const m=v.length;if(m)for(let y=0;y<m;y+=2){const x=t[v[y]][v[y+1]].subscribe(o),F=d.length;d.push(o,x),c&&c.push(i,r.index,F,-(F+1))}}}(o,i,i[Pe],s,e,t,r),Kc}function p0(e,t,n,r){try{return xr(6,t,n),!1!==n(r)}catch(i){return x_(e,i),!1}finally{xr(7,t,n)}}function g0(e,t,n,r,i){return function o(s){if(s===Function)return r;Ma(e.componentOffset>-1?Ln(e.index,t):t);let u=p0(t,n,r,s),c=o.__ngNextListenerFn__;for(;c;)u=p0(t,n,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&s.preventDefault(),u}}function ja(e,t=""){const n=J(),r=Ze(),i=e+Ge,o=r.firstCreatePass?ss(r,i,1,t,null):r.data[i],s=H0(r,n,o,t,e);n[i]=s,ec()&&wc(r,n,s,o),Nr(o,!1)}let H0=(e,t,n,r,i)=>(Ci(!0),function mc(e,t){return e.createText(t)}(t[Pe],r));function Uh(e){return Gh("",e,""),Uh}function Gh(e,t,n){const r=J(),i=function us(e,t,n,r){return en(e,Po(),n)?t+Le(n)+r:Fe}(r,e,t,n);return i!==Fe&&ii(r,hn(),i),Gh}const ys="en-US";let uw=ys;class no{}class uR{}class Zh extends no{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new F_(this);const i=function On(e,t){const n=e[ym]||null;if(!n&&!0===t)throw new Error(`Type ${Lt(e)} does not have '\u0275mod' property.`);return n}(t);this._bootstrapComponents=function ri(e){return e instanceof Function?e():e}(i.bootstrap),this._r3Injector=Xy(t,n,[{provide:no,useValue:this},{provide:Lc,useValue:this.componentFactoryResolver},...r],Lt(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Kh extends uR{constructor(t){super(),this.moduleType=t}create(t){return new Zh(this.moduleType,t,[])}}const Rk=new Oe("Application Initializer");let cp=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=mt(Rk,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Lh(o))n.push(o);else if(d0(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const ui=new Oe("LocaleId",{providedIn:"root",factory:()=>mt(ui,We.Optional|We.SkipSelf)||function Ok(){return typeof $localize<"u"&&$localize.locale||ys}()});let Fk=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new um(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Sb=new Oe(""),al=new Oe("");let pp,fp=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pp||(function sO(e){pp=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Tt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static{this.\u0275fac=function(r){return new(r||e)(qe(Tt),qe(hp),qe(al))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})(),hp=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return pp?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Ai=null;const Tb=new Oe("AllowMultipleToken"),gp=new Oe("PlatformDestroyListeners"),Ab=new Oe("appBootstrapListener");function Nb(e,t,n=[]){const r=`Platform: ${t}`,i=new Oe(r);return(o=[])=>{let s=mp();if(!s||s.injector.get(Tb,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function cO(e){if(Ai&&!Ai.get(Tb,!1))throw new be(400,!1);(function Mb(){!function hS(e){zm=e}(()=>{throw new be(600,!1)})})(),Ai=e;const t=e.get(kb);(function xb(e){e.get(jy,null)?.forEach(n=>n())})(e)}(function Rb(e=[],t){return kr.create({name:t,providers:[{provide:$f,useValue:"platform"},{provide:gp,useValue:new Set([()=>Ai=null])},...e]})}(a,r))}return function dO(e){const t=mp();if(!t)throw new be(401,!1);return t}()}}function mp(){return Ai?.get(kb)??null}let kb=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function fO(e="zone.js",t){return"noop"===e?new SA:"zone.js"===e?new Tt(t):e}(r?.ngZone,function Ob(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function lR(e,t,n){return new Zh(e,t,n)}(n.moduleType,this.injector,function jb(e){return[{provide:Tt,useFactory:e},{provide:Ic,multi:!0,useFactory:()=>{const t=mt(pO,{optional:!0});return()=>t.initialize()}},{provide:Bb,useFactory:hO},{provide:n_,useFactory:r_}]}(()=>i)),s=o.injector.get(ti,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:u=>{s.handleError(u)}});o.onDestroy(()=>{ul(this._modules,o),a.unsubscribe()})}),function Lb(e,t,n){try{const r=n();return Lh(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(cp);return a.runInitializers(),a.donePromise.then(()=>(function cw(e){Zn(e,"Expected localeId to be defined"),"string"==typeof e&&(uw=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(ui,ys)||ys),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=Pb({},r);return function aO(e,t,n){const r=new Kh(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(Za);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new be(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(gp,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(qe(kr))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function Pb(e,t){return Array.isArray(t)?t.reduce(Pb,e):{...e,...t}}let Za=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=mt(Bb),this.zoneIsStable=mt(n_),this.componentTypes=[],this.components=[],this.isStable=mt(Fk).hasPendingTasks.pipe(function CI(e,t){return pe((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(ae(r,u=>{i?.unsubscribe();let c=0;const l=o++;Yn(e(u,l)).subscribe(i=ae(r,d=>r.next(t?t(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}(n=>n?function cm(...e){return zi(e,de(e))}(!1):this.zoneIsStable),function II(e,t=bn){return e=e??SI,pe((n,r)=>{let i,o=!0;n.subscribe(ae(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),Xs()),this._injector=mt(ei)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof $y;if(!this._injector.get(cp).done)throw!i&&function ra(e){const t=Ye(e)||zt(e)||ln(e);return null!==t&&t.standalone}(n),new be(405,!1);let s;s=i?n:this._injector.get(Lc).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function uO(e){return e.isBoundToModule}(s)?void 0:this._injector.get(no),c=s.create(kr.NULL,[],r||s.selector,a),l=c.location.nativeElement,d=c.injector.get(Sb,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),ul(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ul(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Ab,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ul(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new be(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ul(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Bb=new Oe("",{providedIn:"root",factory:()=>mt(ti).handleError.bind(void 0)});function hO(){const e=mt(Tt),t=mt(ti);return n=>e.runOutsideAngular(()=>t.handleError(n))}let pO=(()=>{class e{constructor(){this.zone=mt(Tt),this.applicationRef=mt(Za)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const xO=Nb(null,"core",[]);let NO=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(qe(Za))}}static{this.\u0275mod=na({type:e})}static{this.\u0275inj=So({})}}return e})(),Ep=null;function Dp(){return Ep}class $O{}const Mi=new Oe("DocumentToken");let aP=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=na({type:e})}static{this.\u0275inj=So({})}}return e})();function _E(e){return"server"===e}class LP extends $O{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Hp extends LP{static makeCurrent(){!function VO(e){Ep||(Ep=e)}(new Hp)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function PP(){return eu=eu||document.querySelector("base"),eu?eu.getAttribute("href"):null}();return null==n?null:function FP(e){Il=Il||document.createElement("a"),Il.setAttribute("href",e);const t=Il.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){eu=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function xL(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Il,eu=null,jP=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})();const Up=new Oe("EventManagerPlugins");let CE=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new be(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(qe(Up),qe(Tt))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})();class IE{constructor(t){this._doc=t}}const Gp="ng-app-id";let SE=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_E(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Gp}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(Gp),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Gp,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(qe(Mi),qe(Mc),qe(Hy,8),qe(Jo))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})();const Vp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$p=/%COMP%/g,VP=new Oe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function AE(e,t){return t.map(n=>n.replace($p,e))}let ME=(()=>{class e{constructor(n,r,i,o,s,a,u,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=_E(a),this.defaultRenderer=new zp(n,s,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ar.ShadowDom&&(r={...r,encapsulation:ar.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof NE?i.applyToHost(n):i instanceof Wp&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,u=this.eventManager,c=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case ar.Emulated:o=new NE(u,c,r,this.appId,l,s,a,d);break;case ar.ShadowDom:return new qP(u,c,n,r,s,a,this.nonce,d);default:o=new Wp(u,c,r,l,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(qe(CE),qe(SE),qe(Mc),qe(VP),qe(Mi),qe(Jo),qe(Tt),qe(Hy))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})();class zp{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Vp[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(xE(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(xE(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new be(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=Vp[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=Vp[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Ii.DashCase|Ii.Important)?t.style.setProperty(n,r,i&Ii.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Ii.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=Dp().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function xE(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class qP extends zp{constructor(t,n,r,i,o,s,a,u){super(t,o,s,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=AE(i.id,i.styles);for(const l of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Wp extends zp{constructor(t,n,r,i,o,s,a,u){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?AE(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class NE extends Wp{constructor(t,n,r,i,o,s,a,u){const c=i+"-"+r.id;super(t,n,r,o,s,a,u,c),this.contentAttr=function $P(e){return"_ngcontent-%COMP%".replace($p,e)}(c),this.hostAttr=function zP(e){return"_nghost-%COMP%".replace($p,e)}(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let YP=(()=>{class e extends IE{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(qe(Mi))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})();const RE=["alt","control","meta","shift"],ZP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KP={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let XP=(()=>{class e extends IE{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dp().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),RE.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=ZP[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),RE.forEach(s=>{s!==i&&(0,KP[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(qe(Mi))}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac})}}return e})();const tF=Nb(xO,"browser",[{provide:Jo,useValue:"browser"},{provide:jy,useValue:function QP(){Hp.makeCurrent()},multi:!0},{provide:Mi,useFactory:function eF(){return function v1(e){Lf=e}(document),document},deps:[]}]),nF=new Oe(""),LE=[{provide:al,useClass:class BP{addToWindow(t){gt.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new be(5103,!1);return o},gt.getAllAngularTestabilities=()=>t.getAllTestabilities(),gt.getAllAngularRootElements=()=>t.getAllRootElements(),gt.frameworkStabilizers||(gt.frameworkStabilizers=[]),gt.frameworkStabilizers.push(r=>{const i=gt.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(u=>{u.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Dp().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:Sb,useClass:fp,deps:[Tt,hp,al]},{provide:fp,useClass:fp,deps:[Tt,hp,al]}],PE=[{provide:$f,useValue:"root"},{provide:ti,useFactory:function JP(){return new ti},deps:[]},{provide:Up,useClass:YP,multi:!0,deps:[Mi,Tt,Jo]},{provide:Up,useClass:XP,multi:!0,deps:[Mi]},ME,SE,CE,{provide:Wy,useExisting:ME},{provide:class fP{},useClass:jP,deps:[]},[]];let rF=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Mc,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(qe(nF,12))}}static{this.\u0275mod=na({type:e})}static{this.\u0275inj=So({providers:[...PE,...LE],imports:[aP,NO]})}}return e})();typeof window<"u"&&window;var lF=ct(475),dF=ct.n(lF);function tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tu(e){var t=function fF(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tu(r.key),r)}}function nn(e,t,n){return t&&HE(e.prototype,t),n&&HE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function io(e){return(io=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(e)}function UE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UE=function(){return!!e})()}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(e,t,n){return t=io(t),function hF(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return le(e)}(e,UE()?Reflect.construct(t,n||[],io(e).constructor):t.apply(e,n))}function Yp(e,t){return(Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r})(e,t)}function rr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yp(e,t)}function Zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GE(e,t){if(e){if("string"==typeof e)return Zp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zp(e,t)}}function Sl(e,t){return function pF(e){if(Array.isArray(e))return e}(e)||function gF(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||GE(e,t)||function mF(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Kp={black:"#000000",silver:"#C0C0C0",gray:"#808080",grey:"#808080",white:"#FFFFFF",maroon:"#800000",red:"#FF0000",purple:"#800080",fuchsia:"#FF00FF",green:"#008000",lime:"#00FF00",olive:"#808000",yellow:"#FFFF00",navy:"#000080",blue:"#0000FF",teal:"#008080",aqua:"#00FFFF",darkblue:"#00008B",mediumblue:"#0000CD",darkgreen:"#006400",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",springgreen:"#00FF7F",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",rebeccapurple:"#663399",mediumaquamarine:"#66CDAA",dimgray:"#696969",dimgrey:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",slategrey:"#708090",lightslategray:"#778899",lightslategrey:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370DB",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",palevioletred:"#DB7093",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",lightyellow:"#FFFFE0",ivory:"#FFFFF0"},VE=new Int8Array(4),Tl=new Int32Array(VE.buffer,0,1),$E=new Float32Array(VE.buffer,0,1),vF=/^\s*rgba?\s*\(/,yF=/^\s*rgba?\s*\(\s*([0-9]*)\s*,\s*([0-9]*)\s*,\s*([0-9]*)(?:\s*,\s*(.*)?)?\)\s*$/,Es={};for(var Al in Kp)Es[Al]=oo(Kp[Al]),Es[Kp[Al]]=Es[Al];function zE(e,t,n,r,i){return Tl[0]=r<<24|n<<16|t<<8|e,i&&(Tl[0]=4278190079&Tl[0]),$E[0]}function oo(e){if(e=e.toLowerCase(),typeof Es[e]<"u")return Es[e];var t=function _F(e){var t=0,n=0,r=0,i=1;if("#"===e[0])4===e.length?(t=parseInt(e.charAt(1)+e.charAt(1),16),n=parseInt(e.charAt(2)+e.charAt(2),16),r=parseInt(e.charAt(3)+e.charAt(3),16)):(t=parseInt(e.charAt(1)+e.charAt(2),16),n=parseInt(e.charAt(3)+e.charAt(4),16),r=parseInt(e.charAt(5)+e.charAt(6),16)),9===e.length&&(i=parseInt(e.charAt(7)+e.charAt(8),16)/255);else if(vF.test(e)){var o=e.match(yF);o&&(t=+o[1],n=+o[2],r=+o[3],o[4]&&(i=+o[4]))}return{r:t,g:n,b:r,a:i}}(e),o=t.a,s=zE(t.r,t.g,t.b,o=255*o|0,!0);return Es[e]=s,s}var Xp={};function WE(e){if(typeof Xp[e]<"u")return Xp[e];var o=zE((16711680&e)>>>16,(65280&e)>>>8,255&e,255,!0);return Xp[e]=o,o}function qE(e,t,n,r){return n+(t<<8)+(e<<16)}function YE(e,t,n,r,i,o){var s=Math.floor(n/o*i),a=Math.floor(e.drawingBufferHeight/o-r/o*i),u=new Uint8Array(4);e.bindFramebuffer(e.FRAMEBUFFER,t),e.readPixels(s,a,1,1,e.RGBA,e.UNSIGNED_BYTE,u);var c=Sl(u,4);return[c[0],c[1],c[2],c[3]]}function oe(e,t,n){return(t=tu(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){oe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nu(){return nu=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,n,r){var i=function bF(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=io(e)););return e}(t,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?t:r):o.value}},nu.apply(this,arguments)}function Qp(e){var t=0;return e.forEach(function(n){return t+=function EF(e){return e.normalized?1:e.size}(n)}),t}function KE(e,t,n){var i=t.createShader("VERTEX"===e?t.VERTEX_SHADER:t.FRAGMENT_SHADER);if(null===i)throw new Error("loadShader: error while creating the shader");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(i);throw t.deleteShader(i),new Error("loadShader: error while compiling the shader:\n".concat(s,"\n").concat(n))}return i}function XE(e){var t=e.gl,n=e.buffer,r=e.program,o=e.fragmentShader;t.deleteShader(e.vertexShader),t.deleteShader(o),t.deleteProgram(r),t.deleteBuffer(n)}function QE(e){return e%1==0?e.toFixed(1):e.toString()}var JE="#define PICKING_MODE\n",SF=oe(oe(oe(oe(oe(oe(oe(oe({},WebGL2RenderingContext.BOOL,1),WebGL2RenderingContext.BYTE,1),WebGL2RenderingContext.UNSIGNED_BYTE,1),WebGL2RenderingContext.SHORT,2),WebGL2RenderingContext.UNSIGNED_SHORT,2),WebGL2RenderingContext.INT,4),WebGL2RenderingContext.UNSIGNED_INT,4),WebGL2RenderingContext.FLOAT,4),eD=function(){function e(t,n,r){tn(this,e),oe(this,"array",new Float32Array),oe(this,"constantArray",new Float32Array),oe(this,"capacity",0),oe(this,"verticesCount",0);var i=this.getDefinition();if(this.VERTICES=i.VERTICES,this.VERTEX_SHADER_SOURCE=i.VERTEX_SHADER_SOURCE,this.FRAGMENT_SHADER_SOURCE=i.FRAGMENT_SHADER_SOURCE,this.UNIFORMS=i.UNIFORMS,this.ATTRIBUTES=i.ATTRIBUTES,this.METHOD=i.METHOD,this.CONSTANT_ATTRIBUTES="CONSTANT_ATTRIBUTES"in i?i.CONSTANT_ATTRIBUTES:[],this.CONSTANT_DATA="CONSTANT_DATA"in i?i.CONSTANT_DATA:[],this.isInstanced="CONSTANT_ATTRIBUTES"in i,this.ATTRIBUTES_ITEMS_COUNT=Qp(this.ATTRIBUTES),this.STRIDE=this.VERTICES*this.ATTRIBUTES_ITEMS_COUNT,this.renderer=r,this.normalProgram=this.getProgramInfo("normal",t,i.VERTEX_SHADER_SOURCE,i.FRAGMENT_SHADER_SOURCE,null),this.pickProgram=n?this.getProgramInfo("pick",t,JE+i.VERTEX_SHADER_SOURCE,JE+i.FRAGMENT_SHADER_SOURCE,n):null,this.isInstanced){var o=Qp(this.CONSTANT_ATTRIBUTES);if(this.CONSTANT_DATA.length!==this.VERTICES)throw new Error("Program: error while getting constant data (expected ".concat(this.VERTICES," items, received ").concat(this.CONSTANT_DATA.length," instead)"));this.constantArray=new Float32Array(this.CONSTANT_DATA.length*o);for(var s=0;s<this.CONSTANT_DATA.length;s++){var a=this.CONSTANT_DATA[s];if(a.length!==o)throw new Error("Program: error while getting constant data (one vector has ".concat(a.length," items instead of ").concat(o,")"));for(var u=0;u<a.length;u++)this.constantArray[s*o+u]=a[u]}this.STRIDE=this.ATTRIBUTES_ITEMS_COUNT}}return nn(e,[{key:"kill",value:function(){XE(this.normalProgram),this.pickProgram&&(XE(this.pickProgram),this.pickProgram=null)}},{key:"getProgramInfo",value:function(n,r,i,o,s){var a=this.getDefinition(),u=r.createBuffer();if(null===u)throw new Error("Program: error while creating the WebGL buffer.");var c=function DF(e,t){return KE("VERTEX",e,t)}(r,i),l=function CF(e,t){return KE("FRAGMENT",e,t)}(r,o),d=function IF(e,t){var r,i,n=e.createProgram();if(null===n)throw new Error("loadProgram: error while creating the program.");for(r=0,i=t.length;r<i;r++)e.attachShader(n,t[r]);if(e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw e.deleteProgram(n),new Error("loadProgram: error while linking the program.");return n}(r,[c,l]),h={};a.UNIFORMS.forEach(function(m){var y=r.getUniformLocation(d,m);y&&(h[m]=y)});var v,f={};if(a.ATTRIBUTES.forEach(function(m){f[m.name]=r.getAttribLocation(d,m.name)}),"CONSTANT_ATTRIBUTES"in a&&(a.CONSTANT_ATTRIBUTES.forEach(function(m){f[m.name]=r.getAttribLocation(d,m.name)}),null===(v=r.createBuffer())))throw new Error("Program: error while creating the WebGL constant buffer.");return{name:n,program:d,gl:r,frameBuffer:s,buffer:u,constantBuffer:v||{},uniformLocations:h,attributeLocations:f,isPicking:"pick"===n,vertexShader:c,fragmentShader:l}}},{key:"bindProgram",value:function(n){var r=this,i=0,o=n.gl,s=n.buffer;this.isInstanced?(o.bindBuffer(o.ARRAY_BUFFER,n.constantBuffer),i=0,this.CONSTANT_ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!1)}),o.bufferData(o.ARRAY_BUFFER,this.constantArray,o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,n.buffer),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i,!0)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)):(o.bindBuffer(o.ARRAY_BUFFER,s),i=0,this.ATTRIBUTES.forEach(function(a){return i+=r.bindAttribute(a,n,i)}),o.bufferData(o.ARRAY_BUFFER,this.array,o.DYNAMIC_DRAW)),o.bindBuffer(o.ARRAY_BUFFER,null)}},{key:"unbindProgram",value:function(n){var r=this;this.isInstanced?(this.CONSTANT_ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!1)}),this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n,!0)})):this.ATTRIBUTES.forEach(function(i){return r.unbindAttribute(i,n)})}},{key:"bindAttribute",value:function(n,r,i,o){var s=SF[n.type];if("number"!=typeof s)throw new Error('Program.bind: yet unsupported attribute type "'.concat(n.type,'"'));var a=r.attributeLocations[n.name],u=r.gl;if(-1!==a){u.enableVertexAttribArray(a);var c=this.isInstanced?(o?this.ATTRIBUTES_ITEMS_COUNT:Qp(this.CONSTANT_ATTRIBUTES))*Float32Array.BYTES_PER_ELEMENT:this.ATTRIBUTES_ITEMS_COUNT*Float32Array.BYTES_PER_ELEMENT;if(u.vertexAttribPointer(a,n.size,n.type,n.normalized||!1,c,i),this.isInstanced&&o)if(u instanceof WebGL2RenderingContext)u.vertexAttribDivisor(a,1);else{var l=u.getExtension("ANGLE_instanced_arrays");l&&l.vertexAttribDivisorANGLE(a,1)}}return n.size*s}},{key:"unbindAttribute",value:function(n,r,i){var o=r.attributeLocations[n.name],s=r.gl;if(-1!==o&&(s.disableVertexAttribArray(o),this.isInstanced&&i))if(s instanceof WebGL2RenderingContext)s.vertexAttribDivisor(o,0);else{var a=s.getExtension("ANGLE_instanced_arrays");a&&a.vertexAttribDivisorANGLE(o,0)}}},{key:"reallocate",value:function(n){n!==this.capacity&&(this.capacity=n,this.verticesCount=this.VERTICES*n,this.array=new Float32Array(this.isInstanced?this.capacity*this.ATTRIBUTES_ITEMS_COUNT:this.verticesCount*this.ATTRIBUTES_ITEMS_COUNT))}},{key:"hasNothingToRender",value:function(){return 0===this.verticesCount}},{key:"renderProgram",value:function(n,r){var i=r.gl,o=r.program;i.enable(i.BLEND),i.useProgram(o),this.setUniforms(n,r),this.drawWebGL(this.METHOD,r)}},{key:"render",value:function(n){this.hasNothingToRender()||(this.pickProgram&&(this.pickProgram.gl.viewport(0,0,n.width*n.pixelRatio/n.downSizingRatio,n.height*n.pixelRatio/n.downSizingRatio),this.bindProgram(this.pickProgram),this.renderProgram(xe(xe({},n),{},{pixelRatio:n.pixelRatio/n.downSizingRatio}),this.pickProgram),this.unbindProgram(this.pickProgram)),this.normalProgram.gl.viewport(0,0,n.width*n.pixelRatio,n.height*n.pixelRatio),this.bindProgram(this.normalProgram),this.renderProgram(n,this.normalProgram),this.unbindProgram(this.normalProgram))}},{key:"drawWebGL",value:function(n,r){var i=r.gl;if(i.bindFramebuffer(i.FRAMEBUFFER,r.frameBuffer),this.isInstanced)if(i instanceof WebGL2RenderingContext)i.drawArraysInstanced(n,0,this.VERTICES,this.capacity);else{var s=i.getExtension("ANGLE_instanced_arrays");s&&s.drawArraysInstancedANGLE(n,0,this.VERTICES,this.capacity)}else i.drawArrays(n,0,this.verticesCount)}}]),e}(),tD=function(e){function t(){return tn(this,t),nr(this,t,arguments)}return rr(t,e),nn(t,[{key:"kill",value:function(){nu(io(t.prototype),"kill",this).call(this)}},{key:"process",value:function(r,i,o){var s=i*this.STRIDE;if(!o.hidden)return this.processVisibleItem(WE(r),s,o);for(var a=s+this.STRIDE;s<a;s++)this.array[s]=0}}]),t}(eD),Jp=function(e){function t(){var n;tn(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return oe(le(n=nr(this,t,[].concat(i))),"drawLabel",void 0),n}return rr(t,e),nn(t,[{key:"kill",value:function(){nu(io(t.prototype),"kill",this).call(this)}},{key:"process",value:function(r,i,o,s,a){var u=i*this.STRIDE;if(!(a.hidden||o.hidden||s.hidden))return this.processVisibleItem(WE(r),u,o,s,a);for(var c=u+this.STRIDE;u<c;u++)this.array[u]=0}}]),t}(eD);function nD(e,t,n){if(t.label){var r=n.labelSize,i=n.labelFont,o=n.labelWeight;e.fillStyle=n.labelColor.attribute?t[n.labelColor.attribute]||n.labelColor.color||"#000":n.labelColor.color,e.font="".concat(o," ").concat(r,"px ").concat(i),e.fillText(t.label,t.x+t.size+3,t.y+r/3)}}var rD=WebGLRenderingContext,iD=rD.UNSIGNED_BYTE,eg=rD.FLOAT,OF=["u_sizeRatio","u_correctionRatio","u_matrix"],Ml=function(e){function t(){return tn(this,t),nr(this,t,arguments)}return rr(t,e),nn(t,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\nvarying float v_border;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_diffVector = diffVector;\n  v_radius = size / 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision highp float;\n\nvarying vec4 v_color;\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\nuniform float u_correctionRatio;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float border = u_correctionRatio * 2.0;\n  float dist = length(v_diffVector) - v_radius + border;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > border)\n    gl_FragColor = transparent;\n  else\n    gl_FragColor = v_color;\n\n  #else\n  float t = 0.0;\n  if (dist > border)\n    t = 1.0;\n  else if (dist > 0.0)\n    t = dist / border;\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:OF,ATTRIBUTES:[{name:"a_position",size:2,type:eg},{name:"a_size",size:1,type:eg},{name:"a_color",size:4,type:iD,normalized:!0},{name:"a_id",size:4,type:iD,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:eg}],CONSTANT_DATA:[[t.ANGLE_1],[t.ANGLE_2],[t.ANGLE_3]]}}},{key:"processVisibleItem",value:function(r,i,o){var s=this.array,a=oo(o.color);s[i++]=o.x,s[i++]=o.y,s[i++]=o.size,s[i++]=a,s[i++]=r}},{key:"setUniforms",value:function(r,i){var o=i.gl,s=i.uniformLocations,a=s.u_sizeRatio,c=s.u_matrix;o.uniform1f(s.u_correctionRatio,r.correctionRatio),o.uniform1f(a,r.sizeRatio),o.uniformMatrix3fv(c,!1,r.matrix)}}]),t}(tD);oe(Ml,"ANGLE_1",0),oe(Ml,"ANGLE_2",2*Math.PI/3),oe(Ml,"ANGLE_3",4*Math.PI/3);var oD=WebGLRenderingContext,sD=oD.UNSIGNED_BYTE,xl=oD.FLOAT,jF=["u_matrix","u_sizeRatio","u_correctionRatio","u_minEdgeThickness","u_lengthToThicknessRatio","u_widenessToThicknessRatio"],aD={lengthToThicknessRatio:2.5,widenessToThicknessRatio:2};function uD(e){var t=xe(xe({},aD),e||{});return function(n){function r(){return tn(this,r),nr(this,r,arguments)}return rr(r,n),nn(r,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:"\nattribute vec2 a_position;\nattribute vec2 a_normal;\nattribute float a_radius;\nattribute vec3 a_barycentric;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\n#else\nattribute vec4 a_color;\n#endif\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_widenessToThicknessRatio;\n\nvarying vec4 v_color;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float normalLength = length(a_normal);\n  vec2 unitNormal = a_normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl and\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\n  // happening:\n  float pixelsThickness = max(normalLength / u_sizeRatio, minThickness);\n  float webGLThickness = pixelsThickness * u_correctionRatio;\n  float webGLNodeRadius = a_radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n  float webGLArrowHeadThickness = webGLThickness * u_widenessToThicknessRatio;\n\n  float da = a_barycentric.x;\n  float db = a_barycentric.y;\n  float dc = a_barycentric.z;\n\n  vec2 delta = vec2(\n      da * (webGLNodeRadius * unitNormal.y)\n    + db * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y + webGLArrowHeadThickness * unitNormal.x)\n    + dc * ((webGLNodeRadius + webGLArrowHeadLength) * unitNormal.y - webGLArrowHeadThickness * unitNormal.x),\n\n      da * (-webGLNodeRadius * unitNormal.x)\n    + db * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x + webGLArrowHeadThickness * unitNormal.y)\n    + dc * (-(webGLNodeRadius + webGLArrowHeadLength) * unitNormal.x - webGLArrowHeadThickness * unitNormal.y)\n  );\n\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\n\n  gl_Position = vec4(position, 0, 1);\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:"\nprecision mediump float;\n\nvarying vec4 v_color;\n\nvoid main(void) {\n  gl_FragColor = v_color;\n}\n",METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:jF,ATTRIBUTES:[{name:"a_position",size:2,type:xl},{name:"a_normal",size:2,type:xl},{name:"a_radius",size:1,type:xl},{name:"a_color",size:4,type:sD,normalized:!0},{name:"a_id",size:4,type:sD,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_barycentric",size:3,type:xl}],CONSTANT_DATA:[[1,0,0],[0,1,0],[0,0,1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,c){var l=c.size||1,d=u.size||1,h=a.x,f=a.y,v=u.x,m=u.y,y=oo(c.color),_=v-h,b=m-f,S=_*_+b*b,R=0,x=0;S&&(R=-b*(S=1/Math.sqrt(S))*l,x=_*S*l);var F=this.array;F[s++]=v,F[s++]=m,F[s++]=-R,F[s++]=-x,F[s++]=d,F[s++]=y,F[s++]=o}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,l=u.u_sizeRatio,d=u.u_correctionRatio,h=u.u_minEdgeThickness,f=u.u_lengthToThicknessRatio,v=u.u_widenessToThicknessRatio;a.uniformMatrix3fv(u.u_matrix,!1,o.matrix),a.uniform1f(l,o.sizeRatio),a.uniform1f(d,o.correctionRatio),a.uniform1f(h,o.minEdgeThickness),a.uniform1f(f,t.lengthToThicknessRatio),a.uniform1f(v,t.widenessToThicknessRatio)}}]),r}(Jp)}uD();var cD="\nprecision mediump float;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  // We only handle antialiasing for normal mode:\n  #ifdef PICKING_MODE\n  gl_FragColor = v_color;\n  #else\n  float dist = length(v_normal) * v_thickness;\n\n  float t = smoothstep(\n    v_thickness - v_feather,\n    v_thickness,\n    dist\n  );\n\n  gl_FragColor = mix(v_color, transparent, t);\n  #endif\n}\n",lD=WebGLRenderingContext,dD=lD.UNSIGNED_BYTE,so=lD.FLOAT,VF=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness","u_lengthToThicknessRatio"],$F={lengthToThicknessRatio:aD.lengthToThicknessRatio};function fD(e){var t=xe(xe({},$F),e||{});return function(n){function r(){return tn(this,r),nr(this,r,arguments)}return rr(r,n),nn(r,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:"\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\nattribute float a_radius;\nattribute float a_radiusCoef;\n\nuniform mat3 u_matrix;\nuniform float u_zoomRatio;\nuniform float u_sizeRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_lengthToThicknessRatio;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  float radius = a_radius * a_radiusCoef;\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // These first computations are taken from edge.vert.glsl. Please read it to\n  // get better comments on what's happening:\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here, we move the point to leave space for the arrow head:\n  float direction = sign(radius);\n  float webGLNodeRadius = direction * radius * 2.0 * u_correctionRatio / u_sizeRatio;\n  float webGLArrowHeadLength = webGLThickness * u_lengthToThicknessRatio * 2.0;\n\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (webGLNodeRadius + webGLArrowHeadLength);\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness + compensationVector, 1)).xy, 0, 1);\n\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n",FRAGMENT_SHADER_SOURCE:cD,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:VF,ATTRIBUTES:[{name:"a_positionStart",size:2,type:so},{name:"a_positionEnd",size:2,type:so},{name:"a_normal",size:2,type:so},{name:"a_color",size:4,type:dD,normalized:!0},{name:"a_id",size:4,type:dD,normalized:!0},{name:"a_radius",size:1,type:so}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:so},{name:"a_normalCoef",size:1,type:so},{name:"a_radiusCoef",size:1,type:so}],CONSTANT_DATA:[[0,1,0],[0,-1,0],[1,1,1],[1,1,1],[0,-1,0],[1,-1,-1]]}}},{key:"processVisibleItem",value:function(o,s,a,u,c){var l=c.size||1,d=a.x,h=a.y,f=u.x,v=u.y,m=oo(c.color),y=f-d,_=v-h,b=u.size||1,S=y*y+_*_,R=0,x=0;S&&(R=-_*(S=1/Math.sqrt(S))*l,x=y*S*l);var F=this.array;F[s++]=d,F[s++]=h,F[s++]=f,F[s++]=v,F[s++]=R,F[s++]=x,F[s++]=m,F[s++]=o,F[s++]=b}},{key:"setUniforms",value:function(o,s){var a=s.gl,u=s.uniformLocations,l=u.u_zoomRatio,d=u.u_feather,h=u.u_pixelRatio,f=u.u_correctionRatio,v=u.u_sizeRatio,m=u.u_minEdgeThickness,y=u.u_lengthToThicknessRatio;a.uniformMatrix3fv(u.u_matrix,!1,o.matrix),a.uniform1f(l,o.zoomRatio),a.uniform1f(v,o.sizeRatio),a.uniform1f(f,o.correctionRatio),a.uniform1f(h,o.pixelRatio),a.uniform1f(d,o.antiAliasingFeather),a.uniform1f(m,o.minEdgeThickness),a.uniform1f(y,t.lengthToThicknessRatio)}}]),r}(Jp)}fD();var qF=function zF(e){return function TF(e,t){return function(){function n(r,i,o){tn(this,n),oe(this,"drawLabel",t),this.programs=e.map(function(s){return new s(r,i,o)})}return nn(n,[{key:"reallocate",value:function(i){this.programs.forEach(function(o){return o.reallocate(i)})}},{key:"process",value:function(i,o,s,a,u){this.programs.forEach(function(c){return c.process(i,o,s,a,u)})}},{key:"render",value:function(i){this.programs.forEach(function(o){return o.render(i)})}},{key:"kill",value:function(){this.programs.forEach(function(i){return i.kill()})}}]),n}()}([fD(e),uD(e)])}(),hD=WebGLRenderingContext,pD=hD.UNSIGNED_BYTE,ru=hD.FLOAT,KF=["u_matrix","u_zoomRatio","u_sizeRatio","u_correctionRatio","u_pixelRatio","u_feather","u_minEdgeThickness"],XF=function(e){function t(){return tn(this,t),nr(this,t,arguments)}return rr(t,e),nn(t,[{key:"getDefinition",value:function(){return{VERTICES:6,VERTEX_SHADER_SOURCE:'\nattribute vec4 a_id;\nattribute vec4 a_color;\nattribute vec2 a_normal;\nattribute float a_normalCoef;\nattribute vec2 a_positionStart;\nattribute vec2 a_positionEnd;\nattribute float a_positionCoef;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_zoomRatio;\nuniform float u_pixelRatio;\nuniform float u_correctionRatio;\nuniform float u_minEdgeThickness;\nuniform float u_feather;\n\nvarying vec4 v_color;\nvarying vec2 v_normal;\nvarying float v_thickness;\nvarying float v_feather;\n\nconst float bias = 255.0 / 254.0;\n\nvoid main() {\n  float minThickness = u_minEdgeThickness;\n\n  vec2 normal = a_normal * a_normalCoef;\n  vec2 position = a_positionStart * (1.0 - a_positionCoef) + a_positionEnd * a_positionCoef;\n\n  float normalLength = length(normal);\n  vec2 unitNormal = normal / normalLength;\n\n  // We require edges to be at least "minThickness" pixels thick *on screen*\n  // (so we need to compensate the size ratio):\n  float pixelsThickness = max(normalLength, minThickness * u_sizeRatio);\n\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\n  // referential (in a ([0, 1], [0, 1]) space), using our "magic" correction\n  // ratio:\n  float webGLThickness = pixelsThickness * u_correctionRatio / u_sizeRatio;\n\n  // Here is the proper position of the vertex\n  gl_Position = vec4((u_matrix * vec3(position + unitNormal * webGLThickness, 1)).xy, 0, 1);\n\n  // For the fragment shader though, we need a thickness that takes the "magic"\n  // correction ratio into account (as in webGLThickness), but so that the\n  // antialiasing effect does not depend on the zoom level. So here\'s yet\n  // another thickness version:\n  v_thickness = webGLThickness / u_zoomRatio;\n\n  v_normal = unitNormal;\n\n  v_feather = u_feather * u_correctionRatio / u_zoomRatio / u_pixelRatio * 2.0;\n\n  #ifdef PICKING_MODE\n  // For picking mode, we use the ID as the color:\n  v_color = a_id;\n  #else\n  // For normal mode, we use the color:\n  v_color = a_color;\n  #endif\n\n  v_color.a *= bias;\n}\n',FRAGMENT_SHADER_SOURCE:cD,METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:KF,ATTRIBUTES:[{name:"a_positionStart",size:2,type:ru},{name:"a_positionEnd",size:2,type:ru},{name:"a_normal",size:2,type:ru},{name:"a_color",size:4,type:pD,normalized:!0},{name:"a_id",size:4,type:pD,normalized:!0}],CONSTANT_ATTRIBUTES:[{name:"a_positionCoef",size:1,type:ru},{name:"a_normalCoef",size:1,type:ru}],CONSTANT_DATA:[[0,1],[0,-1],[1,1],[1,1],[0,-1],[1,-1]]}}},{key:"processVisibleItem",value:function(r,i,o,s,a){var u=a.size||1,c=o.x,l=o.y,d=s.x,h=s.y,f=oo(a.color),v=d-c,m=h-l,y=v*v+m*m,_=0,b=0;y&&(_=-m*(y=1/Math.sqrt(y))*u,b=v*y*u);var S=this.array;S[i++]=c,S[i++]=l,S[i++]=d,S[i++]=h,S[i++]=_,S[i++]=b,S[i++]=f,S[i++]=r}},{key:"setUniforms",value:function(r,i){var o=i.gl,s=i.uniformLocations,u=s.u_zoomRatio,c=s.u_feather,l=s.u_pixelRatio,d=s.u_correctionRatio,h=s.u_sizeRatio,f=s.u_minEdgeThickness;o.uniformMatrix3fv(s.u_matrix,!1,r.matrix),o.uniform1f(u,r.zoomRatio),o.uniform1f(h,r.sizeRatio),o.uniform1f(d,r.correctionRatio),o.uniform1f(l,r.pixelRatio),o.uniform1f(c,r.antiAliasingFeather),o.uniform1f(f,r.minEdgeThickness)}}]),t}(Jp),tg=function(e){function t(){var n;return tn(this,t),(n=nr(this,t)).rawEmitter=le(n),n}return rr(t,e),nn(t)}(ct(356).EventEmitter),JF=ct(791),e2=ct.n(JF),gD={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},mD={easing:"quadraticInOut",duration:150};function gr(){return Float32Array.of(1,0,0,0,1,0,0,0,1)}function Nl(e,t,n){return e[0]=t,e[4]="number"==typeof n?n:t,e}function vD(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[3]=-n,e[4]=r,e}function yD(e,t,n){return e[6]=t,e[7]=n,e}function Ni(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],l=e[8],d=t[0],h=t[1],f=t[2],v=t[3],m=t[4],y=t[5],_=t[6],b=t[7],S=t[8];return e[0]=d*n+h*o+f*u,e[1]=d*r+h*s+f*c,e[2]=d*i+h*a+f*l,e[3]=v*n+m*o+y*u,e[4]=v*r+m*s+y*c,e[5]=v*i+m*a+y*l,e[6]=_*n+b*o+S*u,e[7]=_*r+b*s+S*c,e[8]=_*i+b*a+S*l,e}function ng(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=t.x,l=t.y;return{x:c*e[0]+l*e[3]+e[6]*n,y:c*e[1]+l*e[4]+e[7]*n}}function iu(e,t,n,r,i){var o=e.angle,s=e.ratio,a=e.x,u=e.y,c=t.width,l=t.height,d=gr(),h=Math.min(c,l)-2*r,f=function u2(e,t){var n=e.height/e.width,r=t.height/t.width;return n<1&&r>1||n>1&&r<1?1:Math.min(Math.max(r,1/r),Math.max(1/n,n))}(t,n);return i?(Ni(d,yD(gr(),a,u)),Ni(d,Nl(gr(),s)),Ni(d,vD(gr(),o)),Ni(d,Nl(gr(),c/h/2/f,l/h/2/f))):(Ni(d,Nl(gr(),h/c*2*f,h/l*2*f)),Ni(d,vD(gr(),-o)),Ni(d,Nl(gr(),1/s)),Ni(d,yD(gr(),-a,-u))),d}function _D(){return typeof window.devicePixelRatio<"u"?window.devicePixelRatio:1}function wD(e,t,n){return n.sort(function(r,i){var o=t(r)||0,s=t(i)||0;return o<s?-1:o>s?1:0})}function bD(e){var t=Sl(e.x,2),n=t[0],r=t[1],i=Sl(e.y,2),o=i[0],s=i[1],a=Math.max(r-n,s-o),u=(r+n)/2,c=(s+o)/2;(0===a||Math.abs(a)===1/0||isNaN(a))&&(a=1),isNaN(u)&&(u=0),isNaN(c)&&(c=0);var l=function(h){return{x:.5+(h.x-u)/a,y:.5+(h.y-c)/a}};return l.applyTo=function(d){d.x=.5+(d.x-u)/a,d.y=.5+(d.y-c)/a},l.inverse=function(d){return{x:u+a*(d.x-.5),y:c+a*(d.y-.5)}},l.ratio=a,l}function ED(e,t){var n=t.size;if(0!==n){var r=e.length;e.length+=n;var i=0;t.forEach(function(o){e[r+i]=o,i++})}}function ig(e){e=e||{};for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;t++){var r=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];r&&Object.assign(e,r)}return e}var g2={hideEdgesOnMove:!1,hideLabelsOnMove:!1,renderLabels:!0,renderEdgeLabels:!1,enableEdgeEvents:!1,defaultNodeColor:"#999",defaultNodeType:"circle",defaultEdgeColor:"#ccc",defaultEdgeType:"line",labelFont:"Arial",labelSize:14,labelWeight:"normal",labelColor:{color:"#000"},edgeLabelFont:"Arial",edgeLabelSize:14,edgeLabelWeight:"normal",edgeLabelColor:{attribute:"color"},stagePadding:30,zoomToSizeRatioFunction:Math.sqrt,itemSizesReference:"screen",defaultDrawEdgeLabel:function AF(e,t,n,r,i){var o=i.edgeLabelSize,s=i.edgeLabelFont,a=i.edgeLabelWeight,c=t.label;if(c){e.fillStyle=i.edgeLabelColor.attribute?t[i.edgeLabelColor.attribute]||i.edgeLabelColor.color||"#000":i.edgeLabelColor.color,e.font="".concat(a," ").concat(o,"px ").concat(s);var l=n.size,d=r.size,h=n.x,f=n.y,v=r.x,m=r.y,y=(h+v)/2,_=(f+m)/2,b=v-h,S=m-f,R=Math.sqrt(b*b+S*S);if(!(R<l+d)){y=((h+=b*l/R)+(v-=b*d/R))/2,_=((f+=S*l/R)+(m-=S*d/R))/2,b=v-h,S=m-f,R=Math.sqrt(b*b+S*S);var B,x=e.measureText(c).width;if(x>R){for(x=e.measureText(c+="\u2026").width;x>R&&c.length>1;)c=c.slice(0,-2)+"\u2026",x=e.measureText(c).width;if(c.length<4)return}B=b>0?S>0?Math.acos(b/R):Math.asin(S/R):S>0?Math.acos(b/R)+Math.PI:Math.asin(b/R)+Math.PI/2,e.save(),e.translate(y,_),e.rotate(B),e.fillText(c,-x/2,t.size/2+o),e.restore()}}},defaultDrawNodeLabel:nD,defaultDrawNodeHover:function MF(e,t,n){var r=n.labelSize,i=n.labelFont;if(e.font="".concat(n.labelWeight," ").concat(r,"px ").concat(i),e.fillStyle="#FFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=8,e.shadowColor="#000","string"==typeof t.label){var a=e.measureText(t.label).width,u=Math.round(a+5),c=Math.round(r+4),l=Math.max(t.size,r/2)+2,d=Math.asin(c/2/l),h=Math.sqrt(Math.abs(Math.pow(l,2)-Math.pow(c/2,2)));e.beginPath(),e.moveTo(t.x+h,t.y+c/2),e.lineTo(t.x+l+u,t.y+c/2),e.lineTo(t.x+l+u,t.y-c/2),e.lineTo(t.x+h,t.y-c/2),e.arc(t.x,t.y,l,d,-d),e.closePath(),e.fill()}else e.beginPath(),e.arc(t.x,t.y,t.size+2,0,2*Math.PI),e.closePath(),e.fill();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,nD(e,t,n)},minEdgeThickness:1.7,antiAliasingFeather:1,labelDensity:1,labelGridCellSize:100,labelRenderedSizeThreshold:6,nodeReducer:null,edgeReducer:null,zIndex:!1,minCameraRatio:null,maxCameraRatio:null,enableCameraRotation:!0,allowInvalidContainer:!1,nodeProgramClasses:{},nodeHoverProgramClasses:{},edgeProgramClasses:{}},m2={circle:Ml},v2={arrow:qF,line:XF};function DD(e){if("number"!=typeof e.labelDensity||e.labelDensity<0)throw new Error("Settings: invalid `labelDensity`. Expecting a positive number.");var t=e.minCameraRatio,n=e.maxCameraRatio;if("number"==typeof t&&"number"==typeof n&&n<t)throw new Error("Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.")}var CD=function(e){function t(){var n;return tn(this,t),oe(le(n=nr(this,t)),"x",.5),oe(le(n),"y",.5),oe(le(n),"angle",0),oe(le(n),"ratio",1),oe(le(n),"minRatio",null),oe(le(n),"maxRatio",null),oe(le(n),"enabledRotation",!0),oe(le(n),"nextFrame",null),oe(le(n),"previousState",null),oe(le(n),"enabled",!0),n.previousState=n.getState(),n}return rr(t,e),nn(t,[{key:"enable",value:function(){return this.enabled=!0,this}},{key:"disable",value:function(){return this.enabled=!1,this}},{key:"getState",value:function(){return{x:this.x,y:this.y,angle:this.angle,ratio:this.ratio}}},{key:"hasState",value:function(r){return this.x===r.x&&this.y===r.y&&this.ratio===r.ratio&&this.angle===r.angle}},{key:"getPreviousState",value:function(){var r=this.previousState;return r?{x:r.x,y:r.y,angle:r.angle,ratio:r.ratio}:null}},{key:"getBoundedRatio",value:function(r){var i=r;return"number"==typeof this.minRatio&&(i=Math.max(i,this.minRatio)),"number"==typeof this.maxRatio&&(i=Math.min(i,this.maxRatio)),i}},{key:"validateState",value:function(r){var i={};return"number"==typeof r.x&&(i.x=r.x),"number"==typeof r.y&&(i.y=r.y),this.enabledRotation&&"number"==typeof r.angle&&(i.angle=r.angle),"number"==typeof r.ratio&&(i.ratio=this.getBoundedRatio(r.ratio)),i}},{key:"isAnimated",value:function(){return!!this.nextFrame}},{key:"setState",value:function(r){if(!this.enabled)return this;this.previousState=this.getState();var i=this.validateState(r);return"number"==typeof i.x&&(this.x=i.x),"number"==typeof i.y&&(this.y=i.y),this.enabledRotation&&"number"==typeof i.angle&&(this.angle=i.angle),"number"==typeof i.ratio&&(this.ratio=i.ratio),this.hasState(this.previousState)||this.emit("updated",this.getState()),this}},{key:"updateState",value:function(r){return this.setState(r(this.getState())),this}},{key:"animate",value:function(r,i,o){var s=this;if(this.enabled){var a=Object.assign({},mD,i),u=this.validateState(r),c="function"==typeof a.easing?a.easing:gD[a.easing],l=Date.now(),d=this.getState(),h=function f(){var v=(Date.now()-l)/a.duration;if(v>=1)return s.nextFrame=null,s.setState(u),void(s.animationCallback&&(s.animationCallback.call(null),s.animationCallback=void 0));var m=c(v),y={};"number"==typeof u.x&&(y.x=d.x+(u.x-d.x)*m),"number"==typeof u.y&&(y.y=d.y+(u.y-d.y)*m),s.enabledRotation&&"number"==typeof u.angle&&(y.angle=d.angle+(u.angle-d.angle)*m),"number"==typeof u.ratio&&(y.ratio=d.ratio+(u.ratio-d.ratio)*m),s.setState(y),s.nextFrame=requestAnimationFrame(f)};this.nextFrame?(cancelAnimationFrame(this.nextFrame),this.animationCallback&&this.animationCallback.call(null),this.nextFrame=requestAnimationFrame(h)):h(),this.animationCallback=o}}},{key:"animatedZoom",value:function(r){if(r){if("number"==typeof r)return this.animate({ratio:this.ratio/r});this.animate({ratio:this.ratio/(r.factor||1.5)},r)}else this.animate({ratio:this.ratio/1.5})}},{key:"animatedUnzoom",value:function(r){if(r){if("number"==typeof r)return this.animate({ratio:this.ratio*r});this.animate({ratio:this.ratio*(r.factor||1.5)},r)}else this.animate({ratio:1.5*this.ratio})}},{key:"animatedReset",value:function(r){this.animate({x:.5,y:.5,ratio:1,angle:0},r)}},{key:"copy",value:function(){return t.from(this.getState())}}],[{key:"from",value:function(r){return(new t).setState(r)}}]),t}(tg);function di(e,t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function fi(e,t){var n=xe(xe({},di(e,t)),{},{sigmaDefaultPrevented:!1,preventSigmaDefault:function(){n.sigmaDefaultPrevented=!0},original:e});return n}var w2=2;function og(e){for(var t=[],n=0,r=Math.min(e.length,w2);n<r;n++)t.push(e[n]);return t}function sg(e,t){return{touches:og(e.touches).map(function(n){return di(n,t)}),original:e}}function ID(e){if(typeof e.deltaY<"u")return-3*e.deltaY/360;if(typeof e.detail<"u")return e.detail/-9;throw new Error("Captor: could not extract delta from event.")}var SD=function(e){function t(n,r){var i;return tn(this,t),(i=nr(this,t)).container=n,i.renderer=r,i}return rr(t,e),nn(t)}(tg),T2=function(e){function t(n,r){var i;return tn(this,t),oe(le(i=nr(this,t,[n,r])),"enabled",!0),oe(le(i),"draggedEvents",0),oe(le(i),"downStartTime",null),oe(le(i),"lastMouseX",null),oe(le(i),"lastMouseY",null),oe(le(i),"isMouseDown",!1),oe(le(i),"isMoving",!1),oe(le(i),"movingTimeout",null),oe(le(i),"startCameraState",null),oe(le(i),"clicks",0),oe(le(i),"doubleClickTimeout",null),oe(le(i),"currentWheelDirection",0),i.handleClick=i.handleClick.bind(le(i)),i.handleRightClick=i.handleRightClick.bind(le(i)),i.handleDown=i.handleDown.bind(le(i)),i.handleUp=i.handleUp.bind(le(i)),i.handleMove=i.handleMove.bind(le(i)),i.handleWheel=i.handleWheel.bind(le(i)),i.handleLeave=i.handleLeave.bind(le(i)),i.handleEnter=i.handleEnter.bind(le(i)),n.addEventListener("click",i.handleClick,!1),n.addEventListener("contextmenu",i.handleRightClick,!1),n.addEventListener("mousedown",i.handleDown,!1),n.addEventListener("wheel",i.handleWheel,!1),n.addEventListener("mouseleave",i.handleLeave,!1),n.addEventListener("mouseenter",i.handleEnter,!1),document.addEventListener("mousemove",i.handleMove,!1),document.addEventListener("mouseup",i.handleUp,!1),i}return rr(t,e),nn(t,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("click",this.handleClick),r.removeEventListener("contextmenu",this.handleRightClick),r.removeEventListener("mousedown",this.handleDown),r.removeEventListener("wheel",this.handleWheel),r.removeEventListener("mouseleave",this.handleLeave),r.removeEventListener("mouseenter",this.handleEnter),document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("mouseup",this.handleUp)}},{key:"handleClick",value:function(r){var i=this;if(this.enabled){if(this.clicks++,2===this.clicks)return this.clicks=0,"number"==typeof this.doubleClickTimeout&&(clearTimeout(this.doubleClickTimeout),this.doubleClickTimeout=null),this.handleDoubleClick(r);setTimeout(function(){i.clicks=0,i.doubleClickTimeout=null},300),this.draggedEvents<3&&this.emit("click",fi(r,this.container))}}},{key:"handleRightClick",value:function(r){this.enabled&&this.emit("rightClick",fi(r,this.container))}},{key:"handleDoubleClick",value:function(r){if(this.enabled){r.preventDefault(),r.stopPropagation();var i=fi(r,this.container);if(this.emit("doubleClick",i),!i.sigmaDefaultPrevented){var o=this.renderer.getCamera(),s=o.getBoundedRatio(o.getState().ratio/2.2);o.animate(this.renderer.getViewportZoomedState(di(r,this.container),s),{easing:"quadraticInOut",duration:200})}}}},{key:"handleDown",value:function(r){if(this.enabled){if(0===r.button){this.startCameraState=this.renderer.getCamera().getState();var i=di(r,this.container),s=i.y;this.lastMouseX=i.x,this.lastMouseY=s,this.draggedEvents=0,this.downStartTime=Date.now(),this.isMouseDown=!0}this.emit("mousedown",fi(r,this.container))}}},{key:"handleUp",value:function(r){var i=this;if(this.enabled&&this.isMouseDown){var o=this.renderer.getCamera();this.isMouseDown=!1,"number"==typeof this.movingTimeout&&(clearTimeout(this.movingTimeout),this.movingTimeout=null);var s=di(r,this.container),a=s.x,u=s.y,c=o.getState(),l=o.getPreviousState()||{x:0,y:0};this.isMoving?o.animate({x:c.x+3*(c.x-l.x),y:c.y+3*(c.y-l.y)},{duration:200,easing:"quadraticOut"}):(this.lastMouseX!==a||this.lastMouseY!==u)&&o.setState({x:c.x,y:c.y}),this.isMoving=!1,setTimeout(function(){var d=i.draggedEvents>0;i.draggedEvents=0,d&&i.renderer.refresh()},0),this.emit("mouseup",fi(r,this.container))}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled){var o=fi(r,this.container);if(this.emit("mousemovebody",o),(r.target===this.container||r.composedPath()[0]===this.container)&&this.emit("mousemove",o),!o.sigmaDefaultPrevented&&this.isMouseDown){this.isMoving=!0,this.draggedEvents++,"number"==typeof this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.movingTimeout=null,i.isMoving=!1},100);var s=this.renderer.getCamera(),a=di(r,this.container),u=a.x,c=a.y,l=this.renderer.viewportToFramedGraph({x:this.lastMouseX,y:this.lastMouseY}),d=this.renderer.viewportToFramedGraph({x:u,y:c}),h=l.x-d.x,f=l.y-d.y,v=s.getState();s.setState({x:v.x+h,y:v.y+f}),this.lastMouseX=u,this.lastMouseY=c,r.preventDefault(),r.stopPropagation()}}}},{key:"handleLeave",value:function(r){this.emit("mouseleave",fi(r,this.container))}},{key:"handleEnter",value:function(r){this.emit("mouseenter",fi(r,this.container))}},{key:"handleWheel",value:function(r){var i=this;if(this.enabled){r.preventDefault(),r.stopPropagation();var o=ID(r);if(o){var s=function _2(e,t){return xe(xe({},fi(e,t)),{},{delta:ID(e)})}(r,this.container);if(this.emit("wheel",s),!s.sigmaDefaultPrevented){var a=o>0?1/1.7:1.7,u=this.renderer.getCamera(),c=u.getBoundedRatio(u.getState().ratio*a),l=o>0?1:-1,d=Date.now();this.currentWheelDirection===l&&this.lastWheelTriggerTime&&d-this.lastWheelTriggerTime<50||(u.animate(this.renderer.getViewportZoomedState(di(r,this.container),c),{easing:"quadraticOut",duration:250},function(){i.currentWheelDirection=0}),this.currentWheelDirection=l,this.lastWheelTriggerTime=d)}}}}}]),t}(SD),x2=function(e){function t(n,r){var i;return tn(this,t),oe(le(i=nr(this,t,[n,r])),"enabled",!0),oe(le(i),"isMoving",!1),oe(le(i),"hasMoved",!1),oe(le(i),"touchMode",0),oe(le(i),"startTouchesPositions",[]),i.handleStart=i.handleStart.bind(le(i)),i.handleLeave=i.handleLeave.bind(le(i)),i.handleMove=i.handleMove.bind(le(i)),n.addEventListener("touchstart",i.handleStart,!1),n.addEventListener("touchend",i.handleLeave,!1),n.addEventListener("touchcancel",i.handleLeave,!1),n.addEventListener("touchmove",i.handleMove,!1),i}return rr(t,e),nn(t,[{key:"kill",value:function(){var r=this.container;r.removeEventListener("touchstart",this.handleStart),r.removeEventListener("touchend",this.handleLeave),r.removeEventListener("touchcancel",this.handleLeave),r.removeEventListener("touchmove",this.handleMove)}},{key:"getDimensions",value:function(){return{width:this.container.offsetWidth,height:this.container.offsetHeight}}},{key:"dispatchRelatedMouseEvent",value:function(r,i,o,s){var a=o||i.touches[0],u=new MouseEvent(r,{clientX:a.clientX,clientY:a.clientY,altKey:i.altKey,ctrlKey:i.ctrlKey});u.isFakeSigmaMouseEvent=!0,(s||this.container).dispatchEvent(u)}},{key:"handleStart",value:function(r){var i=this;if(this.enabled){r.preventDefault(),1===r.touches.length&&this.dispatchRelatedMouseEvent("mousedown",r);var o=og(r.touches);if(this.touchMode=o.length,this.startCameraState=this.renderer.getCamera().getState(),this.startTouchesPositions=o.map(function(f){return di(f,i.container)}),this.lastTouches=o,this.lastTouchesPositions=this.startTouchesPositions,2===this.touchMode){var s=Sl(this.startTouchesPositions,2),a=s[0],u=a.x,c=a.y,l=s[1],d=l.x,h=l.y;this.startTouchesAngle=Math.atan2(h-c,d-u),this.startTouchesDistance=Math.sqrt(Math.pow(d-u,2)+Math.pow(h-c,2))}this.emit("touchdown",sg(r,this.container))}}},{key:"handleLeave",value:function(r){if(this.enabled){switch(r.preventDefault(),0===r.touches.length&&this.lastTouches&&this.lastTouches.length&&(this.dispatchRelatedMouseEvent("mouseup",r,this.lastTouches[0],document),this.hasMoved||this.dispatchRelatedMouseEvent("click",r,this.lastTouches[0])),this.movingTimeout&&(this.isMoving=!1,clearTimeout(this.movingTimeout)),this.touchMode){case 2:if(1===r.touches.length){this.handleStart(r),r.preventDefault();break}case 1:if(this.isMoving){var i=this.renderer.getCamera(),o=i.getState(),s=i.getPreviousState()||{x:0,y:0};i.animate({x:o.x+3*(o.x-s.x),y:o.y+3*(o.y-s.y)},{duration:200,easing:"quadraticOut"})}this.hasMoved=!1,this.isMoving=!1,this.touchMode=0}this.emit("touchup",sg(r,this.container))}}},{key:"handleMove",value:function(r){var i=this;if(this.enabled){r.preventDefault(),1===r.touches.length&&this.dispatchRelatedMouseEvent("mousemove",r);var o=og(r.touches),s=o.map(function(M){return di(M,i.container)});if(this.lastTouches=o,this.lastTouchesPositions=s,this.hasMoved||(this.hasMoved=s.some(function(M,L){var N=i.startTouchesPositions[L];return M.x!==N.x||M.y!==N.y})),this.hasMoved){this.isMoving=!0,this.movingTimeout&&clearTimeout(this.movingTimeout),this.movingTimeout=window.setTimeout(function(){i.isMoving=!1},200);var a=this.renderer.getCamera(),u=this.startCameraState;switch(this.touchMode){case 1:var c=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0]),l=c.x,d=c.y,h=this.renderer.viewportToFramedGraph(s[0]);a.setState({x:u.x+l-h.x,y:u.y+d-h.y});break;case 2:var m={},y=s[0],_=y.x,b=y.y,S=s[1],R=S.x,x=S.y,F=Math.atan2(x-b,R-_)-this.startTouchesAngle,B=Math.hypot(x-b,R-_)/this.startTouchesDistance,U=a.getBoundedRatio(u.ratio/B);m.ratio=U,m.angle=u.angle+F;var H=this.getDimensions(),$=this.renderer.viewportToFramedGraph((this.startTouchesPositions||[])[0],{cameraState:u}),W=Math.min(H.width,H.height),C=U/W,k=_-W/2/(W/H.width),A=b-W/2/(W/H.height),P=[k*Math.cos(-m.angle)-A*Math.sin(-m.angle),A*Math.cos(-m.angle)+k*Math.sin(-m.angle)];A=P[1],m.x=$.x-(k=P[0])*C,m.y=$.y+A*C,a.setState(m)}this.emit("touchmove",sg(r,this.container))}}}}]),t}(SD);function ND(e){return function N2(e){if(Array.isArray(e))return Zp(e)}(e)||function R2(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||GE(e)||function k2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ag(e,t){if(null==e)return{};var r,i,n=function O2(e,t){if(null==e)return{};var i,o,n={},r=Object.keys(e);for(o=0;o<r.length;o++)!(t.indexOf(i=r[o])>=0)&&(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)!(t.indexOf(r=o[i])>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var RD=function(){function e(t,n){tn(this,e),this.key=t,this.size=n}return nn(e,null,[{key:"compare",value:function(n,r){return n.size>r.size?-1:n.size<r.size||n.key>r.key?1:-1}}]),e}(),kD=function(){function e(){tn(this,e),oe(this,"width",0),oe(this,"height",0),oe(this,"cellSize",0),oe(this,"columns",0),oe(this,"rows",0),oe(this,"cells",{})}return nn(e,[{key:"resizeAndClear",value:function(n,r){this.width=n.width,this.height=n.height,this.cellSize=r,this.columns=Math.ceil(n.width/r),this.rows=Math.ceil(n.height/r),this.cells={}}},{key:"getIndex",value:function(n){var r=Math.floor(n.x/this.cellSize);return Math.floor(n.y/this.cellSize)*this.columns+r}},{key:"add",value:function(n,r,i){var o=new RD(n,r),s=this.getIndex(i),a=this.cells[s];a||(this.cells[s]=a=[]),a.push(o)}},{key:"organize",value:function(){for(var n in this.cells)this.cells[n].sort(RD.compare)}},{key:"getLabelsToDisplay",value:function(n,r){var i=this.cellSize*this.cellSize,a=Math.ceil(i/n/n*r/i),u=[];for(var c in this.cells)for(var l=this.cells[c],d=0;d<Math.min(a,l.length);d++)u.push(l[d].key);return u}}]),e}(),hi=Object.prototype.hasOwnProperty,j2=function(e){function t(n,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(tn(this,t),oe(le(i=nr(this,t)),"elements",{}),oe(le(i),"canvasContexts",{}),oe(le(i),"webGLContexts",{}),oe(le(i),"pickingLayers",new Set),oe(le(i),"textures",{}),oe(le(i),"frameBuffers",{}),oe(le(i),"activeListeners",{}),oe(le(i),"labelGrid",new kD),oe(le(i),"nodeDataCache",{}),oe(le(i),"edgeDataCache",{}),oe(le(i),"nodeProgramIndex",{}),oe(le(i),"edgeProgramIndex",{}),oe(le(i),"nodesWithForcedLabels",new Set),oe(le(i),"edgesWithForcedLabels",new Set),oe(le(i),"nodeExtent",{x:[0,1],y:[0,1]}),oe(le(i),"nodeZExtent",[1/0,-1/0]),oe(le(i),"edgeZExtent",[1/0,-1/0]),oe(le(i),"matrix",gr()),oe(le(i),"invMatrix",gr()),oe(le(i),"correctionRatio",1),oe(le(i),"customBBox",null),oe(le(i),"normalizationFunction",bD({x:[0,1],y:[0,1]})),oe(le(i),"graphToViewportRatio",1),oe(le(i),"itemIDsIndex",{}),oe(le(i),"nodeIndices",{}),oe(le(i),"edgeIndices",{}),oe(le(i),"width",0),oe(le(i),"height",0),oe(le(i),"pixelRatio",_D()),oe(le(i),"pickingDownSizingRatio",2*i.pixelRatio),oe(le(i),"displayedNodeLabels",new Set),oe(le(i),"displayedEdgeLabels",new Set),oe(le(i),"highlightedNodes",new Set),oe(le(i),"hoveredNode",null),oe(le(i),"hoveredEdge",null),oe(le(i),"renderFrame",null),oe(le(i),"renderHighlightedNodesFrame",null),oe(le(i),"needToProcess",!1),oe(le(i),"checkEdgesEventsFrame",null),oe(le(i),"nodePrograms",{}),oe(le(i),"nodeHoverPrograms",{}),oe(le(i),"edgePrograms",{}),i.settings=function y2(e){var t=ig({},g2,e);return t.nodeProgramClasses=ig({},m2,t.nodeProgramClasses),t.edgeProgramClasses=ig({},v2,t.edgeProgramClasses),t}(o),DD(i.settings),function d2(e){if(!e2()(e))throw new Error("Sigma: invalid graph instance.");e.forEachNode(function(t,n){if(!Number.isFinite(n.x)||!Number.isFinite(n.y))throw new Error("Sigma: Coordinates of node ".concat(t," are invalid. A node must have a numeric 'x' and 'y' attribute."))})}(n),!(r instanceof HTMLElement))throw new Error("Sigma: container should be an html element.");for(var s in i.graph=n,i.container=r,i.createWebGLContext("edges",{picking:o.enableEdgeEvents}),i.createCanvasContext("edgeLabels"),i.createWebGLContext("nodes",{picking:!0}),i.createCanvasContext("labels"),i.createCanvasContext("hovers"),i.createWebGLContext("hoverNodes"),i.createCanvasContext("mouse"),i.resize(),i.settings.nodeProgramClasses)i.registerNodeProgram(s,i.settings.nodeProgramClasses[s],i.settings.nodeHoverProgramClasses[s]);for(var a in i.settings.edgeProgramClasses)i.registerEdgeProgram(a,i.settings.edgeProgramClasses[a]);return i.camera=new CD,i.bindCameraHandlers(),i.mouseCaptor=new T2(i.elements.mouse,le(i)),i.touchCaptor=new x2(i.elements.mouse,le(i)),i.bindEventHandlers(),i.bindGraphHandlers(),i.handleSettingsUpdate(),i.refresh(),i}return rr(t,e),nn(t,[{key:"registerNodeProgram",value:function(r,i,o){return this.nodePrograms[r]&&this.nodePrograms[r].kill(),this.nodeHoverPrograms[r]&&this.nodeHoverPrograms[r].kill(),this.nodePrograms[r]=new i(this.webGLContexts.nodes,this.frameBuffers.nodes,this),this.nodeHoverPrograms[r]=new(o||i)(this.webGLContexts.hoverNodes,null,this),this}},{key:"registerEdgeProgram",value:function(r,i){return this.edgePrograms[r]&&this.edgePrograms[r].kill(),this.edgePrograms[r]=new i(this.webGLContexts.edges,this.frameBuffers.edges,this),this}},{key:"unregisterNodeProgram",value:function(r){if(this.nodePrograms[r]){var i=this.nodePrograms,o=i[r],s=ag(i,[r].map(tu));o.kill(),this.nodePrograms=s}if(this.nodeHoverPrograms[r]){var a=this.nodeHoverPrograms,u=a[r],c=ag(a,[r].map(tu));u.kill(),this.nodePrograms=c}return this}},{key:"unregisterEdgeProgram",value:function(r){if(this.edgePrograms[r]){var i=this.edgePrograms,o=i[r],s=ag(i,[r].map(tu));o.kill(),this.edgePrograms=s}return this}},{key:"resetWebGLTexture",value:function(r){var i=this.webGLContexts[r],o=this.frameBuffers[r],s=this.textures[r];s&&i.deleteTexture(s);var a=i.createTexture();return i.bindFramebuffer(i.FRAMEBUFFER,o),i.bindTexture(i.TEXTURE_2D,a),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,this.width,this.height,0,i.RGBA,i.UNSIGNED_BYTE,null),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,a,0),this.textures[r]=a,this}},{key:"bindCameraHandlers",value:function(){var r=this;return this.activeListeners.camera=function(){r.scheduleRender()},this.camera.on("updated",this.activeListeners.camera),this}},{key:"unbindCameraHandlers",value:function(){return this.camera.removeListener("updated",this.activeListeners.camera),this}},{key:"getNodeAtPosition",value:function(r){var s=YE(this.webGLContexts.nodes,this.frameBuffers.nodes,r.x,r.y,this.pixelRatio,this.pickingDownSizingRatio),a=qE.apply(void 0,ND(s)),u=this.itemIDsIndex[a];return u&&"node"===u.type?u.id:null}},{key:"bindEventHandlers",value:function(){var r=this;this.activeListeners.handleResize=function(){r.scheduleRefresh()},window.addEventListener("resize",this.activeListeners.handleResize),this.activeListeners.handleMove=function(o){var s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}},a=r.getNodeAtPosition(o);if(a&&r.hoveredNode!==a&&!r.nodeDataCache[a].hidden)return r.hoveredNode&&r.emit("leaveNode",xe(xe({},s),{},{node:r.hoveredNode})),r.hoveredNode=a,r.emit("enterNode",xe(xe({},s),{},{node:a})),void r.scheduleHighlightedNodesRender();if(r.hoveredNode&&r.getNodeAtPosition(o)!==r.hoveredNode){var u=r.hoveredNode;return r.hoveredNode=null,r.emit("leaveNode",xe(xe({},s),{},{node:u})),void r.scheduleHighlightedNodesRender()}if(r.settings.enableEdgeEvents){var c=r.hoveredNode?null:r.getEdgeAtPoint(s.event.x,s.event.y);c!==r.hoveredEdge&&(r.hoveredEdge&&r.emit("leaveEdge",xe(xe({},s),{},{edge:r.hoveredEdge})),c&&r.emit("enterEdge",xe(xe({},s),{},{edge:c})),r.hoveredEdge=c)}},this.activeListeners.handleLeave=function(o){var s={event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}};r.hoveredNode&&(r.emit("leaveNode",xe(xe({},s),{},{node:r.hoveredNode})),r.scheduleHighlightedNodesRender()),r.settings.enableEdgeEvents&&r.hoveredEdge&&(r.emit("leaveEdge",xe(xe({},s),{},{edge:r.hoveredEdge})),r.scheduleHighlightedNodesRender()),r.emit("leaveStage",xe({},s))},this.activeListeners.handleEnter=function(o){r.emit("enterStage",xe({},{event:o,preventSigmaDefault:function(){o.preventSigmaDefault()}}))};var i=function(s){return function(a){var u={event:a,preventSigmaDefault:function(){a.preventSigmaDefault()}},l=a.original.isFakeSigmaMouseEvent?r.getNodeAtPosition(a):r.hoveredNode;if(l)return r.emit("".concat(s,"Node"),xe(xe({},u),{},{node:l}));if(r.settings.enableEdgeEvents){var d=r.getEdgeAtPoint(a.x,a.y);if(d)return r.emit("".concat(s,"Edge"),xe(xe({},u),{},{edge:d}))}return r.emit("".concat(s,"Stage"),u)}};return this.activeListeners.handleClick=i("click"),this.activeListeners.handleRightClick=i("rightClick"),this.activeListeners.handleDoubleClick=i("doubleClick"),this.activeListeners.handleWheel=i("wheel"),this.activeListeners.handleDown=i("down"),this.activeListeners.handleUp=i("up"),this.mouseCaptor.on("mousemove",this.activeListeners.handleMove),this.mouseCaptor.on("click",this.activeListeners.handleClick),this.mouseCaptor.on("rightClick",this.activeListeners.handleRightClick),this.mouseCaptor.on("doubleClick",this.activeListeners.handleDoubleClick),this.mouseCaptor.on("wheel",this.activeListeners.handleWheel),this.mouseCaptor.on("mousedown",this.activeListeners.handleDown),this.mouseCaptor.on("mouseup",this.activeListeners.handleUp),this.mouseCaptor.on("mouseleave",this.activeListeners.handleLeave),this.mouseCaptor.on("mouseenter",this.activeListeners.handleEnter),this}},{key:"bindGraphHandlers",value:function(){var r=this,i=this.graph,o=new Set(["x","y","zIndex","type"]);return this.activeListeners.eachNodeAttributesUpdatedGraphUpdate=function(s){var a,u=null===(a=s.hints)||void 0===a?void 0:a.attributes;r.graph.forEachNode(function(l){return r.updateNode(l)});var c=!u||u.some(function(l){return o.has(l)});r.refresh({partialGraph:{nodes:i.nodes()},skipIndexation:!c,schedule:!0})},this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate=function(s){var a,u=null===(a=s.hints)||void 0===a?void 0:a.attributes;r.graph.forEachEdge(function(l){return r.updateEdge(l)});var c=u&&["zIndex","type"].some(function(l){return u?.includes(l)});r.refresh({partialGraph:{edges:i.edges()},skipIndexation:!c,schedule:!0})},this.activeListeners.addNodeGraphUpdate=function(s){var a=s.key;r.addNode(a),r.refresh({partialGraph:{nodes:[a]},skipIndexation:!1,schedule:!0})},this.activeListeners.updateNodeGraphUpdate=function(s){r.refresh({partialGraph:{nodes:[s.key]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropNodeGraphUpdate=function(s){r.removeNode(s.key),r.refresh({schedule:!0})},this.activeListeners.addEdgeGraphUpdate=function(s){var a=s.key;r.addEdge(a),r.refresh({partialGraph:{edges:[a]},schedule:!0})},this.activeListeners.updateEdgeGraphUpdate=function(s){r.refresh({partialGraph:{edges:[s.key]},skipIndexation:!1,schedule:!0})},this.activeListeners.dropEdgeGraphUpdate=function(s){r.removeEdge(s.key),r.refresh({schedule:!0})},this.activeListeners.clearEdgesGraphUpdate=function(){r.clearEdgeState(),r.clearEdgeIndices(),r.refresh({schedule:!0})},this.activeListeners.clearGraphUpdate=function(){r.clearEdgeState(),r.clearNodeState(),r.clearEdgeIndices(),r.clearNodeIndices(),r.refresh({schedule:!0})},i.on("nodeAdded",this.activeListeners.addNodeGraphUpdate),i.on("nodeDropped",this.activeListeners.dropNodeGraphUpdate),i.on("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),i.on("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),i.on("edgeAdded",this.activeListeners.addEdgeGraphUpdate),i.on("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),i.on("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),i.on("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),i.on("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),i.on("cleared",this.activeListeners.clearGraphUpdate),this}},{key:"unbindGraphHandlers",value:function(){var r=this.graph;r.removeListener("nodeAdded",this.activeListeners.addNodeGraphUpdate),r.removeListener("nodeDropped",this.activeListeners.dropNodeGraphUpdate),r.removeListener("nodeAttributesUpdated",this.activeListeners.updateNodeGraphUpdate),r.removeListener("eachNodeAttributesUpdated",this.activeListeners.eachNodeAttributesUpdatedGraphUpdate),r.removeListener("edgeAdded",this.activeListeners.addEdgeGraphUpdate),r.removeListener("edgeDropped",this.activeListeners.dropEdgeGraphUpdate),r.removeListener("edgeAttributesUpdated",this.activeListeners.updateEdgeGraphUpdate),r.removeListener("eachEdgeAttributesUpdated",this.activeListeners.eachEdgeAttributesUpdatedGraphUpdate),r.removeListener("edgesCleared",this.activeListeners.clearEdgesGraphUpdate),r.removeListener("cleared",this.activeListeners.clearGraphUpdate)}},{key:"getEdgeAtPoint",value:function(r,i){var o=YE(this.webGLContexts.edges,this.frameBuffers.edges,r,i,this.pixelRatio,this.pickingDownSizingRatio),s=qE.apply(void 0,ND(o)),a=this.itemIDsIndex[s];return a&&"edge"===a.type?a.id:null}},{key:"process",value:function(){var r=this;this.emit("beforeProcess");var i=this.graph,o=this.settings,s=this.getDimensions();this.nodeExtent=function l2(e){if(!e.order)return{x:[0,1],y:[0,1]};var t=1/0,n=-1/0,r=1/0,i=-1/0;return e.forEachNode(function(o,s){var a=s.x,u=s.y;a<t&&(t=a),a>n&&(n=a),u<r&&(r=u),u>i&&(i=u)}),{x:[t,n],y:[r,i]}}(this.graph),this.normalizationFunction=bD(this.customBBox||this.nodeExtent);var u=iu((new CD).getState(),s,this.getGraphDimensions(),this.getSetting("stagePadding")||0);this.labelGrid.resizeAndClear(s,o.labelGridCellSize);for(var c={},l={},d={},h={},f=1,v=i.nodes(),m=0,y=v.length;m<y;m++){var _=v[m],b=this.nodeDataCache[_],S=i.getNodeAttributes(_);b.x=S.x,b.y=S.y,this.normalizationFunction.applyTo(b),"string"==typeof b.label&&!b.hidden&&this.labelGrid.add(_,b.size,this.framedGraphToViewport(b,{matrix:u})),c[b.type]=(c[b.type]||0)+1}for(var R in this.labelGrid.organize(),this.nodePrograms){if(!hi.call(this.nodePrograms,R))throw new Error('Sigma: could not find a suitable program for node type "'.concat(R,'"!'));this.nodePrograms[R].reallocate(c[R]||0),c[R]=0}this.settings.zIndex&&this.nodeZExtent[0]!==this.nodeZExtent[1]&&(v=wD(0,function(N){return r.nodeDataCache[N].zIndex},v));for(var x=0,F=v.length;x<F;x++){var B=v[x];l[B]=f,h[l[B]]={type:"node",id:B},f++,this.addNodeToProgram(B,l[B],c[this.nodeDataCache[B].type]++)}for(var H={},$=i.edges(),W=0,Z=$.length;W<Z;W++){var C=this.edgeDataCache[$[W]];H[C.type]=(H[C.type]||0)+1}for(var k in this.settings.zIndex&&this.edgeZExtent[0]!==this.edgeZExtent[1]&&($=wD(0,function(N){return r.edgeDataCache[N].zIndex},$)),this.edgePrograms){if(!hi.call(this.edgePrograms,k))throw new Error('Sigma: could not find a suitable program for edge type "'.concat(k,'"!'));this.edgePrograms[k].reallocate(H[k]||0),H[k]=0}for(var A=0,P=$.length;A<P;A++){var M=$[A];d[M]=f,h[d[M]]={type:"edge",id:M},f++,this.addEdgeToProgram(M,d[M],H[this.edgeDataCache[M].type]++)}return this.itemIDsIndex=h,this.nodeIndices=l,this.edgeIndices=d,this.emit("afterProcess"),this}},{key:"handleSettingsUpdate",value:function(r){var i=this.settings;if(this.camera.minRatio=i.minCameraRatio,this.camera.maxRatio=i.maxCameraRatio,this.camera.enabledRotation=i.enableCameraRotation,this.camera.setState(this.camera.validateState(this.camera.getState())),r){if(r.edgeProgramClasses!==i.edgeProgramClasses){for(var o in i.edgeProgramClasses)i.edgeProgramClasses[o]!==r.edgeProgramClasses[o]&&this.registerEdgeProgram(o,i.edgeProgramClasses[o]);for(var s in r.edgeProgramClasses)i.edgeProgramClasses[s]||this.unregisterEdgeProgram(s)}if(r.nodeProgramClasses!==i.nodeProgramClasses||r.nodeHoverProgramClasses!==i.nodeHoverProgramClasses){for(var a in i.nodeProgramClasses)(i.nodeProgramClasses[a]!==r.nodeProgramClasses[a]||i.nodeHoverProgramClasses[a]!==r.nodeHoverProgramClasses[a])&&this.registerNodeProgram(a,i.nodeProgramClasses[a],i.nodeHoverProgramClasses[a]);for(var u in r.nodeProgramClasses)i.nodeProgramClasses[u]||this.unregisterNodeProgram(u)}}return this}},{key:"renderLabels",value:function(){if(!this.settings.renderLabels)return this;var r=this.camera.getState(),i=this.labelGrid.getLabelsToDisplay(r.ratio,this.settings.labelDensity);ED(i,this.nodesWithForcedLabels),this.displayedNodeLabels=new Set;for(var o=this.canvasContexts.labels,s=0,a=i.length;s<a;s++){var u=i[s],c=this.nodeDataCache[u];if(!this.displayedNodeLabels.has(u)&&!c.hidden){var l=this.framedGraphToViewport(c),d=l.x,h=l.y,f=this.scaleSize(c.size);if((c.forceLabel||!(f<this.settings.labelRenderedSizeThreshold))&&!(d<-150||d>this.width+150||h<-50||h>this.height+50)){this.displayedNodeLabels.add(u);var v=this.settings.defaultDrawNodeLabel,m=this.nodePrograms[c.type];(m?.drawLabel||v)(o,xe(xe({key:u},c),{},{size:f,x:d,y:h}),this.settings)}}}return this}},{key:"renderEdgeLabels",value:function(){if(!this.settings.renderEdgeLabels)return this;var r=this.canvasContexts.edgeLabels;r.clearRect(0,0,this.width,this.height);var i=function L2(e){var n=e.hoveredNode,r=e.highlightedNodes,i=e.displayedNodeLabels,o=[];return e.graph.forEachEdge(function(s,a,u,c){(u===n||c===n||r.has(u)||r.has(c)||i.has(u)&&i.has(c))&&o.push(s)}),o}({graph:this.graph,hoveredNode:this.hoveredNode,displayedNodeLabels:this.displayedNodeLabels,highlightedNodes:this.highlightedNodes});ED(i,this.edgesWithForcedLabels);for(var o=new Set,s=0,a=i.length;s<a;s++){var u=i[s],c=this.graph.extremities(u),l=this.nodeDataCache[c[0]],d=this.nodeDataCache[c[1]],h=this.edgeDataCache[u];if(!o.has(u)&&!(h.hidden||l.hidden||d.hidden)){var f=this.settings.defaultDrawEdgeLabel,v=this.edgePrograms[h.type];(v?.drawLabel||f)(r,xe(xe({key:u},h),{},{size:this.scaleSize(h.size)}),xe(xe(xe({key:c[0]},l),this.framedGraphToViewport(l)),{},{size:this.scaleSize(l.size)}),xe(xe(xe({key:c[1]},d),this.framedGraphToViewport(d)),{},{size:this.scaleSize(d.size)}),this.settings),o.add(u)}}return this.displayedEdgeLabels=o,this}},{key:"renderHighlightedNodes",value:function(){var r=this,i=this.canvasContexts.hovers;i.clearRect(0,0,this.width,this.height);var s=[];this.hoveredNode&&!this.nodeDataCache[this.hoveredNode].hidden&&s.push(this.hoveredNode),this.highlightedNodes.forEach(function(h){h!==r.hoveredNode&&s.push(h)}),s.forEach(function(h){return y=(m=r.framedGraphToViewport(v=r.nodeDataCache[f=h])).x,_=m.y,b=r.scaleSize(v.size),S=r.settings.defaultDrawNodeHover,R=r.nodePrograms[v.type],void(R?.drawHover||S)(i,xe(xe({key:f},v),{},{size:b,x:y,y:_}),r.settings);var f,v,m,y,_,b,S,R});var a={};for(var u in s.forEach(function(h){var f=r.nodeDataCache[h].type;a[f]=(a[f]||0)+1}),this.nodeHoverPrograms)this.nodeHoverPrograms[u].reallocate(a[u]||0),a[u]=0;s.forEach(function(h){var f=r.nodeDataCache[h];r.nodeHoverPrograms[f.type].process(0,a[f.type]++,f)}),this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);var c=this.getRenderParams();for(var l in this.nodeHoverPrograms)this.nodeHoverPrograms[l].render(c)}},{key:"scheduleHighlightedNodesRender",value:function(){var r=this;this.renderHighlightedNodesFrame||this.renderFrame||(this.renderHighlightedNodesFrame=requestAnimationFrame(function(){r.renderHighlightedNodesFrame=null,r.renderHighlightedNodes(),r.renderEdgeLabels()}))}},{key:"render",value:function(){var r=this;this.emit("beforeRender");var i=function(){return r.emit("afterRender"),r};if(this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.resize(),this.needToProcess&&this.process(),this.needToProcess=!1,this.clear(),this.pickingLayers.forEach(function(y){return r.resetWebGLTexture(y)}),!this.graph.order)return i();var o=this.mouseCaptor,s=this.camera.isAnimated()||o.isMoving||o.draggedEvents||o.currentWheelDirection,a=this.camera.getState(),u=this.getDimensions(),c=this.getGraphDimensions(),l=this.getSetting("stagePadding")||0;this.matrix=iu(a,u,c,l),this.invMatrix=iu(a,u,c,l,!0),this.correctionRatio=function c2(e,t,n){var r=ng(e,{x:Math.cos(t.angle),y:Math.sin(t.angle)},0),o=r.y;return 1/Math.sqrt(Math.pow(r.x,2)+Math.pow(o,2))/n.width}(this.matrix,a,u),this.graphToViewportRatio=this.getGraphToViewportRatio();var d=this.getRenderParams();for(var h in this.nodePrograms)this.nodePrograms[h].render(d);if(!this.settings.hideEdgesOnMove||!s)for(var v in this.edgePrograms)this.edgePrograms[v].render(d);return this.settings.hideLabelsOnMove&&s||(this.renderLabels(),this.renderEdgeLabels(),this.renderHighlightedNodes()),i()}},{key:"addNode",value:function(r){var i=Object.assign({},this.graph.getNodeAttributes(r));this.settings.nodeReducer&&(i=this.settings.nodeReducer(r,i));var o=function P2(e,t,n){if(!hi.call(n,"x")||!hi.call(n,"y"))throw new Error('Sigma: could not find a valid position (x, y) for node "'.concat(t,'". All your nodes must have a number "x" and "y". Maybe your forgot to apply a layout or your "nodeReducer" is not returning the correct data?'));return n.color||(n.color=e.defaultNodeColor),!n.label&&""!==n.label&&(n.label=null),n.label=null!=n.label?""+n.label:null,n.size||(n.size=2),hi.call(n,"hidden")||(n.hidden=!1),hi.call(n,"highlighted")||(n.highlighted=!1),hi.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||""===n.type)&&(n.type=e.defaultNodeType),n.zIndex||(n.zIndex=0),n}(this.settings,r,i);this.nodeDataCache[r]=o,this.nodesWithForcedLabels.delete(r),o.forceLabel&&!o.hidden&&this.nodesWithForcedLabels.add(r),this.highlightedNodes.delete(r),o.highlighted&&!o.hidden&&this.highlightedNodes.add(r),this.settings.zIndex&&(o.zIndex<this.nodeZExtent[0]&&(this.nodeZExtent[0]=o.zIndex),o.zIndex>this.nodeZExtent[1]&&(this.nodeZExtent[1]=o.zIndex))}},{key:"updateNode",value:function(r){this.addNode(r),this.normalizationFunction.applyTo(this.nodeDataCache[r])}},{key:"removeNode",value:function(r){delete this.nodeDataCache[r],delete this.nodeProgramIndex[r],this.highlightedNodes.delete(r),this.hoveredNode===r&&(this.hoveredNode=null),this.nodesWithForcedLabels.delete(r)}},{key:"addEdge",value:function(r){var i=Object.assign({},this.graph.getEdgeAttributes(r));this.settings.edgeReducer&&(i=this.settings.edgeReducer(r,i));var o=function F2(e,t,n){return n.color||(n.color=e.defaultEdgeColor),n.label||(n.label=""),n.size||(n.size=.5),hi.call(n,"hidden")||(n.hidden=!1),hi.call(n,"forceLabel")||(n.forceLabel=!1),(!n.type||""===n.type)&&(n.type=e.defaultEdgeType),n.zIndex||(n.zIndex=0),n}(this.settings,0,i);this.edgeDataCache[r]=o,this.edgesWithForcedLabels.delete(r),o.forceLabel&&!o.hidden&&this.edgesWithForcedLabels.add(r),this.settings.zIndex&&(o.zIndex<this.edgeZExtent[0]&&(this.edgeZExtent[0]=o.zIndex),o.zIndex>this.edgeZExtent[1]&&(this.edgeZExtent[1]=o.zIndex))}},{key:"updateEdge",value:function(r){this.addEdge(r)}},{key:"removeEdge",value:function(r){delete this.edgeDataCache[r],delete this.edgeProgramIndex[r],this.hoveredEdge===r&&(this.hoveredEdge=null),this.edgesWithForcedLabels.delete(r)}},{key:"clearNodeIndices",value:function(){this.labelGrid=new kD,this.nodeExtent={x:[0,1],y:[0,1]},this.nodeDataCache={},this.edgeProgramIndex={},this.nodesWithForcedLabels=new Set,this.nodeZExtent=[1/0,-1/0]}},{key:"clearEdgeIndices",value:function(){this.edgeDataCache={},this.edgeProgramIndex={},this.edgesWithForcedLabels=new Set,this.edgeZExtent=[1/0,-1/0]}},{key:"clearIndices",value:function(){this.clearEdgeIndices(),this.clearNodeIndices()}},{key:"clearNodeState",value:function(){this.displayedNodeLabels=new Set,this.highlightedNodes=new Set,this.hoveredNode=null}},{key:"clearEdgeState",value:function(){this.displayedEdgeLabels=new Set,this.highlightedNodes=new Set,this.hoveredEdge=null}},{key:"clearState",value:function(){this.clearEdgeState(),this.clearNodeState()}},{key:"addNodeToProgram",value:function(r,i,o){var s=this.nodeDataCache[r],a=this.nodePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for node type "'.concat(s.type,'"!'));a.process(i,o,s),this.nodeProgramIndex[r]=o}},{key:"addEdgeToProgram",value:function(r,i,o){var s=this.edgeDataCache[r],a=this.edgePrograms[s.type];if(!a)throw new Error('Sigma: could not find a suitable program for edge type "'.concat(s.type,'"!'));var u=this.graph.extremities(r);a.process(i,o,this.nodeDataCache[u[0]],this.nodeDataCache[u[1]],s),this.edgeProgramIndex[r]=o}},{key:"getRenderParams",value:function(){return{matrix:this.matrix,invMatrix:this.invMatrix,width:this.width,height:this.height,pixelRatio:this.pixelRatio,zoomRatio:this.camera.ratio,cameraAngle:this.camera.angle,sizeRatio:1/this.scaleSize(),correctionRatio:this.correctionRatio,downSizingRatio:this.pickingDownSizingRatio,minEdgeThickness:this.settings.minEdgeThickness,antiAliasingFeather:this.settings.antiAliasingFeather}}},{key:"createCanvas",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.elements[r])throw new Error('Sigma: a layer named "'.concat(r,'" already exists'));var o=function f2(e,t,n){var r=document.createElement(e);if(t)for(var i in t)r.style[i]=t[i];if(n)for(var o in n)r.setAttribute(o,n[o]);return r}("canvas",{position:"absolute"},{class:"sigma-".concat(r)});return this.elements[r]=o,"beforeLayer"in i&&i.beforeLayer?this.elements[i.beforeLayer].before(o):"afterLayer"in i&&i.afterLayer?this.elements[i.afterLayer].after(o):this.container.appendChild(o),o}},{key:"createCanvasContext",value:function(r){var i=this.createCanvas(r);return this.canvasContexts[r]=i.getContext("2d",{preserveDrawingBuffer:!1,antialias:!1}),this}},{key:"createWebGLContext",value:function(r,i){var o=i?.canvas||this.createCanvas(r);null!=i&&i.hidden&&o.remove();var a,s=xe({preserveDrawingBuffer:!1,antialias:!1},i||{});(a=o.getContext("webgl2",s))||(a=o.getContext("webgl",s)),a||(a=o.getContext("experimental-webgl",s));var u=a;if(this.webGLContexts[r]=u,u.blendFunc(u.ONE,u.ONE_MINUS_SRC_ALPHA),null!=i&&i.picking){this.pickingLayers.add(r);var c=u.createFramebuffer();if(!c)throw new Error("Sigma: cannot create a new frame buffer for layer ".concat(r));this.frameBuffers[r]=c}return u}},{key:"killLayer",value:function(r){var o,i=this.elements[r];if(!i)throw new Error("Sigma: cannot kill layer ".concat(r,", which does not exist"));return this.webGLContexts[r]?(null===(o=this.webGLContexts[r].getExtension("WEBGL_lose_context"))||void 0===o||o.loseContext(),delete this.webGLContexts[r]):delete this.canvasContexts[r],i.remove(),delete this.elements[r],this}},{key:"getCamera",value:function(){return this.camera}},{key:"setCamera",value:function(r){this.unbindCameraHandlers(),this.camera=r,this.bindCameraHandlers()}},{key:"getContainer",value:function(){return this.container}},{key:"getGraph",value:function(){return this.graph}},{key:"setGraph",value:function(r){r!==this.graph&&(this.unbindGraphHandlers(),null!==this.checkEdgesEventsFrame&&(cancelAnimationFrame(this.checkEdgesEventsFrame),this.checkEdgesEventsFrame=null),this.graph=r,this.bindGraphHandlers(),this.refresh())}},{key:"getMouseCaptor",value:function(){return this.mouseCaptor}},{key:"getTouchCaptor",value:function(){return this.touchCaptor}},{key:"getDimensions",value:function(){return{width:this.width,height:this.height}}},{key:"getGraphDimensions",value:function(){var r=this.customBBox||this.nodeExtent;return{width:r.x[1]-r.x[0]||1,height:r.y[1]-r.y[0]||1}}},{key:"getNodeDisplayData",value:function(r){var i=this.nodeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getEdgeDisplayData",value:function(r){var i=this.edgeDataCache[r];return i?Object.assign({},i):void 0}},{key:"getNodeDisplayedLabels",value:function(){return new Set(this.displayedNodeLabels)}},{key:"getEdgeDisplayedLabels",value:function(){return new Set(this.displayedEdgeLabels)}},{key:"getSettings",value:function(){return xe({},this.settings)}},{key:"getSetting",value:function(r){return this.settings[r]}},{key:"setSetting",value:function(r,i){var o=xe({},this.settings);return this.settings[r]=i,DD(this.settings),this.handleSettingsUpdate(o),this.scheduleRefresh(),this}},{key:"updateSetting",value:function(r,i){return this.setSetting(r,i(this.settings[r])),this}},{key:"resize",value:function(r){var i=this.width,o=this.height;if(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.pixelRatio=_D(),0===this.width){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.width=1}if(0===this.height){if(!this.settings.allowInvalidContainer)throw new Error("Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seeing this error.");this.height=1}if(!r&&i===this.width&&o===this.height)return this;for(var s in this.emit("resize"),this.elements){var a=this.elements[s];a.style.width=this.width+"px",a.style.height=this.height+"px"}for(var u in this.canvasContexts)this.elements[u].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[u].setAttribute("height",this.height*this.pixelRatio+"px"),1!==this.pixelRatio&&this.canvasContexts[u].scale(this.pixelRatio,this.pixelRatio);for(var c in this.webGLContexts){this.elements[c].setAttribute("width",this.width*this.pixelRatio+"px"),this.elements[c].setAttribute("height",this.height*this.pixelRatio+"px");var l=this.webGLContexts[c];if(l.viewport(0,0,this.width*this.pixelRatio,this.height*this.pixelRatio),this.pickingLayers.has(c)){var d=this.textures[c];d&&l.deleteTexture(d)}}return this}},{key:"clear",value:function(){return this.emit("beforeClear"),this.webGLContexts.nodes.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.nodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.edges.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this.webGLContexts.edges.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.webGLContexts.hoverNodes.clear(WebGLRenderingContext.COLOR_BUFFER_BIT),this.canvasContexts.labels.clearRect(0,0,this.width,this.height),this.canvasContexts.hovers.clearRect(0,0,this.width,this.height),this.canvasContexts.edgeLabels.clearRect(0,0,this.width,this.height),this.emit("afterClear"),this}},{key:"refresh",value:function(r){var i=this,o=void 0!==r?.skipIndexation&&r?.skipIndexation,s=void 0!==r?.schedule&&r.schedule,a=!r||!r.partialGraph;if(a)this.clearEdgeIndices(),this.clearNodeIndices(),this.graph.forEachNode(function(R){return i.addNode(R)}),this.graph.forEachEdge(function(R){return i.addEdge(R)});else{for(var u,c,l=(null===(u=r.partialGraph)||void 0===u?void 0:u.nodes)||[],d=0,h=l?.length||0;d<h;d++){var f=l[d];if(this.updateNode(f),o){var v=this.nodeProgramIndex[f];if(void 0===v)throw new Error('Sigma: node "'.concat(f,"\" can't be repaint"));this.addNodeToProgram(f,this.nodeIndices[f],v)}}for(var m=(null==r||null===(c=r.partialGraph)||void 0===c?void 0:c.edges)||[],y=0,_=m.length;y<_;y++){var b=m[y];if(this.updateEdge(b),o){var S=this.edgeProgramIndex[b];if(void 0===S)throw new Error('Sigma: edge "'.concat(b,"\" can't be repaint"));this.addEdgeToProgram(b,this.edgeIndices[b],S)}}}return(a||!o)&&(this.needToProcess=!0),s?this.scheduleRender():this.render(),this}},{key:"scheduleRender",value:function(){var r=this;return this.renderFrame||(this.renderFrame=requestAnimationFrame(function(){r.render()})),this}},{key:"scheduleRefresh",value:function(r){return this.refresh(xe(xe({},r),{},{schedule:!0}))}},{key:"getViewportZoomedState",value:function(r,i){var o=this.camera.getState(),a=o.angle,u=o.x,c=o.y,l=i/o.ratio,d={x:this.width/2,y:this.height/2},h=this.viewportToFramedGraph(r),f=this.viewportToFramedGraph(d);return{angle:a,x:(h.x-f.x)*(1-l)+u,y:(h.y-f.y)*(1-l)+c,ratio:i}}},{key:"viewRectangle",value:function(){var r=0*this.width/8,i=0*this.height/8,o=this.viewportToFramedGraph({x:0-r,y:0-i}),s=this.viewportToFramedGraph({x:this.width+r,y:0-i}),a=this.viewportToFramedGraph({x:0,y:this.height+i});return{x1:o.x,y1:o.y,x2:s.x,y2:s.y,height:s.y-a.y}}},{key:"framedGraphToViewport",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ng(i.matrix?i.matrix:i.cameraState||i.viewportDimensions||i.graphDimensions?iu(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getSetting("stagePadding")||0):this.matrix,r);return{x:(1+a.x)*this.width/2,y:(1-a.y)*this.height/2}}},{key:"viewportToFramedGraph",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=ng(i.matrix?i.matrix:i.cameraState||i.viewportDimensions||!i.graphDimensions?iu(i.cameraState||this.camera.getState(),i.viewportDimensions||this.getDimensions(),i.graphDimensions||this.getGraphDimensions(),i.padding||this.getSetting("stagePadding")||0,!0):this.invMatrix,{x:r.x/this.width*2-1,y:1-r.y/this.height*2});return isNaN(a.x)&&(a.x=0),isNaN(a.y)&&(a.y=0),a}},{key:"viewportToGraph",value:function(r){return this.normalizationFunction.inverse(this.viewportToFramedGraph(r,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"graphToViewport",value:function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.framedGraphToViewport(this.normalizationFunction(r),i)}},{key:"getGraphToViewportRatio",value:function(){var r={x:0,y:0},i={x:1,y:1},o=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),s=this.graphToViewport(r),a=this.graphToViewport(i);return Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2))/o}},{key:"getBBox",value:function(){return this.nodeExtent}},{key:"getCustomBBox",value:function(){return this.customBBox}},{key:"setCustomBBox",value:function(r){return this.customBBox=r,this.scheduleRender(),this}},{key:"kill",value:function(){this.emit("kill"),this.removeAllListeners(),this.unbindCameraHandlers(),window.removeEventListener("resize",this.activeListeners.handleResize),this.mouseCaptor.kill(),this.touchCaptor.kill(),this.unbindGraphHandlers(),this.clearIndices(),this.clearState(),this.nodeDataCache={},this.edgeDataCache={},this.highlightedNodes.clear(),this.renderFrame&&(cancelAnimationFrame(this.renderFrame),this.renderFrame=null),this.renderHighlightedNodesFrame&&(cancelAnimationFrame(this.renderHighlightedNodesFrame),this.renderHighlightedNodesFrame=null);for(var r=this.container;r.firstChild;)r.removeChild(r.firstChild);for(var i in this.canvasContexts={},this.webGLContexts={},this.elements={},this.nodePrograms)this.nodePrograms[i].kill();for(var o in this.nodeHoverPrograms)this.nodeHoverPrograms[o].kill();for(var s in this.edgePrograms)this.edgePrograms[s].kill();for(var a in this.nodePrograms={},this.nodeHoverPrograms={},this.edgePrograms={},this.elements)this.killLayer(a)}},{key:"scaleSize",value:function(){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.camera.ratio;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)/this.settings.zoomToSizeRatioFunction(i)*("positions"===this.getSetting("itemSizesReference")?i*this.graphToViewportRatio:1)}},{key:"getCanvases",value:function(){return xe({},this.elements)}}]),t}(tg);function ug(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jD(e,t){if(e){if("string"==typeof e)return ug(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ug(e,t)}}function HD(e){var t=function z2(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function UD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,HD(r.key),r)}}function kl(e){return(kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)})(e)}function GD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GD=function(){return!!e})()}function cg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lg(e,t){return(lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r})(e,t)}function Ds(e,t,n){return(t=HD(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dg(e){return function K2(e){if(Array.isArray(e))return ug(e)}(e)||function X2(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jD(e)||function Q2(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VD(Object(n),!0).forEach(function(r){Ds(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VD(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}WebGLRenderingContext,WebGLRenderingContext,WebGLRenderingContext;var J2="relative",eB={drawLabel:void 0,drawHover:void 0,borders:[{size:{value:.1},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]};function nB(e){var t=e.borders,n=QE(t.filter(function(i){return"fill"in i.size}).length);return"\nprecision highp float;\n\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\n#ifdef PICKING_MODE\nvarying vec4 v_color;\n#else\n// For normal mode, we use the border colors defined in the program:\n".concat(t.flatMap(function(i,o){return"attribute"in i.size?["varying float v_borderSize_".concat(o+1,";")]:[]}).join("\n"),"\n").concat(t.flatMap(function(i,o){var s=i.color;return"attribute"in s?["varying vec4 v_borderColor_".concat(o+1,";")]:"value"in s?["uniform vec4 u_borderColor_".concat(o+1,";")]:[]}).join("\n"),"\n#endif\n\nuniform float u_correctionRatio;\n\nconst float bias = 255.0 / 254.0;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main(void) {\n  float dist = length(v_diffVector);\n  float aaBorder = 2.0 * u_correctionRatio;\n  float v_borderSize_0 = v_radius;\n  vec4 v_borderColor_0 = transparent;\n\n  // No antialiasing for picking mode:\n  #ifdef PICKING_MODE\n  if (dist > v_radius)\n    gl_FragColor = transparent;\n  else {\n    gl_FragColor = v_color;\n    gl_FragColor.a *= bias;\n  }\n  #else\n  // Sizes:\n").concat(t.flatMap(function(i,o){var s=i.size;if("fill"in s)return[];var a="attribute"in s?"v_borderSize_".concat(o+1):QE(s.value),u="pixels"===(s.mode||J2)?"u_correctionRatio":"v_radius";return["  float borderSize_".concat(o+1," = ").concat(u," * ").concat(a,";")]}).join("\n"),'\n  // Now, let\'s split the remaining space between "fill" borders:\n  float fillBorderSize = (v_radius - (').concat(t.flatMap(function(i,o){return"fill"in i.size?[]:["borderSize_".concat(o+1)]}).join(" + "),") ) / ").concat(n,";\n").concat(t.flatMap(function(i,o){return"fill"in i.size?["  float borderSize_".concat(o+1," = fillBorderSize;")]:[]}).join("\n"),"\n\n  // Finally, normalize all border sizes, to start from the full size and to end with the smallest:\n  float adjustedBorderSize_0 = v_radius;\n").concat(t.map(function(i,o){return"  float adjustedBorderSize_".concat(o+1," = adjustedBorderSize_").concat(o," - borderSize_").concat(o+1,";")}).join("\n"),"\n\n  // Colors:\n  vec4 borderColor_0 = transparent;\n").concat(t.map(function(i,o){var s=i.color,a=[];return a.push("attribute"in s?"  vec4 borderColor_".concat(o+1," = v_borderColor_").concat(o+1,";"):"transparent"in s?"  vec4 borderColor_".concat(o+1," = vec4(0.0, 0.0, 0.0, 0.0);"):"  vec4 borderColor_".concat(o+1," = u_borderColor_").concat(o+1,";")),a.push("  borderColor_".concat(o+1,".a *= bias;")),a.push("  if (borderSize_".concat(o+1," <= 1.0 * u_correctionRatio) { borderColor_").concat(o+1," = borderColor_").concat(o,"; }")),a.join("\n")}).join("\n"),"\n  if (dist > adjustedBorderSize_0) {\n    gl_FragColor = borderColor_0;\n  } else ").concat(t.map(function(i,o){return"if (dist > adjustedBorderSize_".concat(o," - aaBorder) {\n    gl_FragColor = mix(borderColor_").concat(o+1,", borderColor_").concat(o,", (dist - adjustedBorderSize_").concat(o," + aaBorder) / aaBorder);\n  } else if (dist > adjustedBorderSize_").concat(o+1,") {\n    gl_FragColor = borderColor_").concat(o+1,";\n  } else ")}).join("")," { /* Nothing to add here */ }\n  #endif\n}\n")}function rB(e){var t=e.borders;return"\nattribute vec2 a_position;\nattribute float a_size;\nattribute float a_angle;\n\nuniform mat3 u_matrix;\nuniform float u_sizeRatio;\nuniform float u_correctionRatio;\n\nvarying vec2 v_diffVector;\nvarying float v_radius;\n\n#ifdef PICKING_MODE\nattribute vec4 a_id;\nvarying vec4 v_color;\n#else\n".concat(t.flatMap(function(r,i){return"attribute"in r.size?["attribute float a_borderSize_".concat(i+1,";"),"varying float v_borderSize_".concat(i+1,";")]:[]}).join("\n"),"\n").concat(t.flatMap(function(r,i){return"attribute"in r.color?["attribute vec4 a_borderColor_".concat(i+1,";"),"varying vec4 v_borderColor_".concat(i+1,";")]:[]}).join("\n"),"\n#endif\n\nconst float bias = 255.0 / 254.0;\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\n\nvoid main() {\n  float size = a_size * u_correctionRatio / u_sizeRatio * 4.0;\n  vec2 diffVector = size * vec2(cos(a_angle), sin(a_angle));\n  vec2 position = a_position + diffVector;\n  gl_Position = vec4(\n    (u_matrix * vec3(position, 1)).xy,\n    0,\n    1\n  );\n\n  v_radius = size / 2.0;\n  v_diffVector = diffVector;\n\n  #ifdef PICKING_MODE\n  v_color = a_id;\n  #else\n").concat(t.flatMap(function(r,i){return"attribute"in r.size?["  v_borderSize_".concat(i+1," = a_borderSize_").concat(i+1,";")]:[]}).join("\n"),"\n").concat(t.flatMap(function(r,i){return"attribute"in r.color?["  v_borderColor_".concat(i+1," = a_borderColor_").concat(i+1,";")]:[]}).join("\n"),"\n  #endif\n}\n")}var zD=WebGLRenderingContext,WD=zD.UNSIGNED_BYTE,Ol=zD.FLOAT;function qD(e){var t,n=$D($D({},eB),e||{}),r=n.borders,i=n.drawLabel,o=n.drawHover,s=["u_sizeRatio","u_correctionRatio","u_matrix"].concat(dg(r.flatMap(function(a,u){return"value"in a.color?["u_borderColor_".concat(u+1)]:[]})));return t=function(a){function u(){var c;!function $2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var l=arguments.length,d=new Array(l),h=0;h<l;h++)d[h]=arguments[h];return Ds(cg(c=function Y2(e,t,n){return t=kl(t),function q2(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return cg(e)}(e,GD()?Reflect.construct(t,n||[],kl(e).constructor):t.apply(e,n))}(this,u,[].concat(d))),"drawLabel",i),Ds(cg(c),"drawHover",o),c}return function Z2(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lg(e,t)}(u,a),function W2(e,t,n){t&&UD(e.prototype,t),n&&UD(e,n),Object.defineProperty(e,"prototype",{writable:!1})}(u,[{key:"getDefinition",value:function(){return{VERTICES:3,VERTEX_SHADER_SOURCE:rB(n),FRAGMENT_SHADER_SOURCE:nB(n),METHOD:WebGLRenderingContext.TRIANGLES,UNIFORMS:s,ATTRIBUTES:[{name:"a_position",size:2,type:Ol},{name:"a_id",size:4,type:WD,normalized:!0},{name:"a_size",size:1,type:Ol}].concat(dg(r.flatMap(function(l,d){return"attribute"in l.color?[{name:"a_borderColor_".concat(d+1),size:4,type:WD,normalized:!0}]:[]})),dg(r.flatMap(function(l,d){return"attribute"in l.size?[{name:"a_borderSize_".concat(d+1),size:1,type:Ol}]:[]}))),CONSTANT_ATTRIBUTES:[{name:"a_angle",size:1,type:Ol}],CONSTANT_DATA:[[u.ANGLE_1],[u.ANGLE_2],[u.ANGLE_3]]}}},{key:"processVisibleItem",value:function(l,d,h){var f=this.array;f[d++]=h.x,f[d++]=h.y,f[d++]=l,f[d++]=h.size,r.forEach(function(v){var m=v.color;"attribute"in m&&(f[d++]=oo(h[m.attribute]||m.defaultValue||"#000000"))}),r.forEach(function(v){var m=v.size;"attribute"in m&&(f[d++]=h[m.attribute]||m.defaultValue)})}},{key:"setUniforms",value:function(l,d){var h=d.gl,f=d.uniformLocations,v=f.u_sizeRatio,y=f.u_matrix;h.uniform1f(f.u_correctionRatio,l.correctionRatio),h.uniform1f(v,l.sizeRatio),h.uniformMatrix3fv(y,!1,l.matrix),r.forEach(function(_,b){var S=_.color;if("value"in S){var R=f["u_borderColor_".concat(b+1)],x=function wF(e,t){$E[0]=oo(e);var n=Tl[0];return t&&(n|=16777216),[255&n,n>>8&255,n>>16&255,n>>24&255]}(S.value),F=function V2(e,t){return function H2(e){if(Array.isArray(e))return e}(e)||function U2(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||jD(e,t)||function G2(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(x,4);h.uniform4f(R,F[0]/255,F[1]/255,F[2]/255,F[3]/255)}})}}]),u}(tD),Ds(t,"ANGLE_1",0),Ds(t,"ANGLE_2",2*Math.PI/3),Ds(t,"ANGLE_3",4*Math.PI/3),t}qD();const ou="neighbors";let iB=(()=>{class e{#o;#e;#i;#n;#l;#c;#a;#m;#v;#f;#p;#s;#h;#_;#g;#t;#r;constructor(){this.#o=5,this.#e="clusters",this.#i=200,this.#n="inbox",this.#l=200,this.#c="listen",this.#a="message",this.#m="radii",this.#v="random",this.#f="sleep",this.#p="stash",this.#s="status",this.#h="trueRadii",this.#_=200,this.#g="wakeUp",this.COLORS=["red","green","orange","blue","yellow","purple","pink","brown","aqua","cyan","crimson"],this.#t=[],this.#r=[],this.state=new zr}bfs(n){const i=n.nodes().length;for(let o=0;o<i;o++){this.#t.push(["gray","gray",Math.random()]),this.#r.push([]);const s=n.getNodeAttribute(`${o}`,ou);for(let a=0;a<i;a++)this.#r[o].push(null);for(let a of s)a>o&&(this.#r[o][a]=[0,"lightgray",Math.random()])}return[]}buildClusters(n,r){const i=[],o=n.nodes().length,s=[2,4,8,o];n.setAttribute(this.#m,s);const a=[];n.setAttribute(this.#h,a);for(let u=0;u<o;u++){const c=n.getNodeAttributes(`${u}`);c[this.#e]=[],c[this.#n]=[]}for(let u=0;u<4;u++){let c=0;for(let h=0;h<o;h++){let f=Math.floor(s[u]*Math.log(Math.random()));3==u&&(f=0==h?-1*o:0),c=Math.min(f,c),n.setNodeAttribute(`${h}`,this.#v,f);const v=n.getNodeAttributes(`${h}`);v[this.#n]=[],v[this.#g]=0}a.push(-1*c);let l=0;i.push(...this.simulate(n,u,0,-1*c,(h,f,v)=>{if(h[this.#g]>f)h[this.#s]=this.#f;else if(h[this.#e].length>u)h[this.#s]=this.#f;else if(h[this.#n].length>0){const m=[...h[this.#n][0][1]];m[2]=m[2]+1,v&&h[this.#e].push(m),h[this.#s]=m}else if(h[this.#v]==c+f){const m=[l,this.COLORS[l++%this.COLORS.length],0];v&&h[this.#e].push(m),h[this.#s]=m}else h[this.#s]=this.#c},1==u))}return i}simulate(n,r,i,o,s,a=!1){const u=[],c=n.nodes().length;if(0==r){for(let l=i;l<o;l++){const d=Math.random(),h=[],f=[];u.push({state:`Simulate at level ${r}`,nodeAnimations:h,edgeAnimations:f});for(let _=0;_<c;_++){const b=n.getNodeAttributes(`${_}`);s(b,l,!0),b[this.#n]=[]}let m=0;for(let _=0;_<c;_++){const b=n.getNodeAttributes(`${_}`),S=b[this.#s];if(m=Math.max(m,b[this.#e].length),this.#y(S))for(let R of b[ou]){const x=n.getNodeAttributes(`${R}`);x[this.#s]==this.#c&&x[this.#n].push([_,S])}}for(let _=0;_<c;_++){const b=n.getNodeAttributes(`${_}`);if(this.#y(b[this.#s])){const S=b[this.#e].length-1,R=[b[this.#e][S][1],b[this.#e][S][1],d];this.#u(this.#t[_],R)&&h.push({node:_,from:this.#t[_].slice(0,2),to:R.slice(0,2)}),this.#t[_]=R}else if(b[this.#n].length>0){const S=b[this.#n][Math.floor(Math.random()*b[this.#n].length)];b[this.#n]=[S];const R=S[0],x=n.getNodeAttributes(`${R}`),F=x[this.#e].length-1,B=[x[this.#e][F][1],x[this.#e][F][1],d];this.#u(this.#t[_],B)&&h.push({node:_,from:this.#t[_].slice(0,2),to:B.slice(0,2)}),this.#t[_]=B;const U=[0,x[this.#e][F][1],d],H=Math.min(_,R),$=Math.max(_,R);this.#d(this.#r[H][$],U)&&f.push({u:H,v:$,from:this.#r[H][$][1],to:U[1]}),this.#r[H][$]=U}else if(b[this.#s]==this.#c){const S=["gray","black",d];this.#t[_][2]!=d&&this.#u(this.#t[_],S)&&(h.push({node:_,from:this.#t[_].slice(0,2),to:S.slice(0,2)}),this.#t[_]=S)}else if(b[this.#s]==this.#f){const S=["white",b[this.#e][m-1]?.[1]??"black",d];this.#t[_][2]!=d&&this.#u(this.#t[_],S)&&(h.push({node:_,from:this.#t[_].slice(0,2),to:S.slice(0,2)}),this.#t[_]=S)}}const y=[0,"lightgray",d];for(let _=0;_<c;_++)for(let b=_+1;b<c;b++)this.#r[_][b]&&this.#r[_][b][2]!=d&&this.#d(this.#r[_][b],y)&&(f.push({u:_,v:b,from:this.#r[_][b][1],to:y[1]}),this.#r[_][b]=y)}for(let l=0;l<c;l++){const d=n.getNodeAttributes(`${l}`);d[this.#p]=d[this.#n]}}else{const l=n.getAttribute(this.#m)[r],d=Math.ceil((o-i)/l);for(let h=0;h<d;h++){for(let f=0;f<c;f++){const v=n.getNodeAttributes(`${f}`);v[this.#a]=!1;for(let m=0;m<l;m++)if(v[this.#n]=v[this.#p],s(v,i+h*l+m,!1),this.#y(v[this.#s])){v[this.#a]=!!v[this.#s];break}}u.push(...this.#E(n,r-1));for(let f=0;f<c;f++){const v=n.getNodeAttributes(`${f}`);v[this.#a]||(v[this.#g]=i+(h+1)*l),v[this.#n]=v[this.#p]}u.push(...this.simulate(n,r-1,i+h*l,i+(h+1)*l,s,a))}}return u}#E(n,r){const i=[];for(let o=0;o<1;o++)i.push(...this.#w(n,r)),i.push(...this.#b(n,r)),i.push(...this.#D(n,r));return i.push(...this.#w(n,r)),i.push(...this.#b(n,r)),i}#w(n,r){const i=[],o=n.nodes().length;for(let a=n.getAttribute(this.#h)[r]-1;a>=0;a--){const u=Math.random(),c=[],l=[],d={state:`Upcast at level ${r}`,time:this.#_,nodeAnimations:c,edgeAnimations:l};i.push(d);for(let f=0;f<o;f++)n.getNodeAttributes(`${f}`)[this.#n]=[];for(let f=0;f<o;f++){const v=n.getNodeAttributes(`${f}`);if(v[this.#e][r][2]==a&&v[this.#a]){const y=[v[this.#e][r][1],v[this.#e][r][1],u];this.#u(this.#t[f],y)&&c.push({node:f,from:this.#t[f].slice(0,2),to:y.slice(0,2)}),this.#t[f]=y;for(let _ of v[ou]){const b=n.getNodeAttributes(`${_}`);v[this.#e][r][0]==b[this.#e][r][0]&&b[this.#n].push([f,!0])}}}for(let f=0;f<o;f++){const v=n.getNodeAttributes(`${f}`);if(v[this.#e][r][2]==a-1){const y=[v[this.#e][r][1],v[this.#e][r][1],u];if(this.#u(this.#t[f],y)&&(c.push({node:f,from:this.#t[f].slice(0,2),to:y.slice(0,2)}),this.#t[f]=y),v[this.#n].length>0){const b=v[this.#n][Math.floor(Math.random()*v[this.#n].length)][0],S=n.getNodeAttributes(`${b}`);v[this.#a]=!0;const R=[0,S[this.#e][r][1],u],x=Math.min(f,b),F=Math.max(f,b);this.#d(this.#r[x][F],S[this.#e][r][1])&&(l.push({u:x,v:F,from:this.#r[x][F][1],to:R[1]}),this.#r[x][F]=R)}}else{const y=["white",v[this.#e][r][1],u];this.#t[f][2]!=u&&this.#u(this.#t[f],y)&&(c.push({node:f,from:this.#t[f].slice(0,2),to:y.slice(0,2)}),this.#t[f]=y)}v[this.#n]=[]}const h=[0,"lightgray",u];for(let f=0;f<o;f++)for(let v=f+1;v<o;v++)this.#r[f][v]&&this.#r[f][v][2]!=u&&this.#d(this.#r[f][v],h)&&(l.push({u:f,v,from:this.#r[f][v][1],to:h[1]}),this.#r[f][v]=h)}return i}#b(n,r){const i=[],o=n.nodes().length,s=n.getAttribute(this.#h)[r];for(let a=0;a<s;a++){const u=Math.random(),c=[],l=[],d={state:`Downcast at level ${r}`,time:this.#i,nodeAnimations:c,edgeAnimations:l};i.push(d);for(let f=0;f<o;f++)n.getNodeAttributes(`${f}`)[this.#n]=[];for(let f=0;f<o;f++){const v=n.getNodeAttributes(`${f}`);if(v[this.#e][r][2]==a&&v[this.#a]){const y=[v[this.#e][r][1],v[this.#e][r][1],u];this.#u(this.#t[f],y)&&c.push({node:f,from:this.#t[f].slice(0,2),to:y.slice(0,2)}),this.#t[f]=y;for(let _ of v[ou]){const b=n.getNodeAttributes(`${_}`);v[this.#e][r][0]==b[this.#e][r][0]&&b[this.#n].push([f,!0])}}}for(let f=0;f<o;f++){const v=n.getNodeAttributes(`${f}`);if(v[this.#e][r][2]==a+1){const y=[v[this.#e][r][1],v[this.#e][r][1],u];if(this.#u(this.#t[f],y)&&(c.push({node:f,from:this.#t[f].slice(0,2),to:y.slice(0,2)}),this.#t[f]=y),v[this.#n].length>0){const b=v[this.#n][Math.floor(Math.random()*v[this.#n].length)][0],S=n.getNodeAttributes(`${b}`);v[this.#a]=!0;const R=[0,S[this.#e][r][1],u],x=Math.min(f,b),F=Math.max(f,b);this.#d(this.#r[x][F],S[this.#e][r][1])&&(l.push({u:x,v:F,from:this.#r[x][F][1],to:R[1]}),this.#r[x][F]=R)}}else{const y=["white",v[this.#e][r][1],u];this.#t[f][2]!=u&&this.#u(this.#t[f],y)&&(c.push({node:f,from:this.#t[f].slice(0,2),to:y.slice(0,2)}),this.#t[f]=y)}v[this.#n]=[]}const h=[0,"lightgray",u];for(let f=0;f<o;f++)for(let v=f+1;v<o;v++)this.#r[f][v]&&this.#r[f][v][2]!=u&&this.#d(this.#r[f][v],h)&&(l.push({u:f,v,from:this.#r[f][v][1],to:h[1]}),this.#r[f][v]=h)}return i}#D(n,r){const i=[],o=n.nodes().length,a=(n.getAttribute(this.#h),Math.random()),u=[],c=[],l={state:`Intercast at level ${r}`,time:this.#l,nodeAnimations:u,edgeAnimations:c};i.push(l);for(let h=0;h<o;h++)n.getNodeAttributes(`${h}`)[this.#n]=[];for(let h=0;h<o;h++){const f=n.getNodeAttributes(`${h}`),v=[f[this.#e][r][1],f[this.#e][r][1],a];let m=!1;for(let y of f[ou]){const _=n.getNodeAttributes(`${y}`);f[this.#e][r][0]!=_[this.#e][r][0]&&(f[this.#a]&&!_[this.#a]&&_[this.#n].push([h,!0]),m||(m=!0,u.push({node:h,from:this.#t[h].slice(0,2),to:v.slice(0,2)}),this.#t[h]=v))}if(!m){const y=["white",f[this.#e][r][1],a];this.#t[h][2]!=a&&this.#u(this.#t[h],y)&&(u.push({node:h,from:this.#t[h].slice(0,2),to:y.slice(0,2)}),this.#t[h]=y)}}for(let h=0;h<o;h++){const f=n.getNodeAttributes(`${h}`);if(f[this.#n].length>0){const m=f[this.#n][Math.floor(Math.random()*f[this.#n].length)][0],y=n.getNodeAttributes(`${m}`);f[this.#a]=!0;const _=[0,y[this.#e][r][1],a],b=Math.min(h,m),S=Math.max(h,m);this.#d(this.#r[b][S],y[this.#e][r][1])&&(c.push({u:b,v:S,from:this.#r[b][S][1],to:_[1]}),this.#r[b][S]=_)}f[this.#n]=[]}const d=[0,"lightgray",a];for(let h=0;h<o;h++)for(let f=h+1;f<o;f++)this.#r[h][f]&&this.#r[h][f][2]!=a&&this.#d(this.#r[h][f],d)&&(c.push({u:h,v:f,from:this.#r[h][f][1],to:d[1]}),this.#r[h][f]=d);return i}#y(n){return![this.#c,this.#f].includes(n)}#u(n,r){return n[0]!=r[0]||n[1]!=r[1]}#d(n,r){return n[0]!=r[0]||n[1]!=r[1]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function YD(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function ZD(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(u){YD(o,r,i,s,a,"next",u)}function a(u){YD(o,r,i,s,a,"throw",u)}s(void 0)})}}const oB=or(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});let uB=(()=>{class e{#o;#e;#i;#n;#l;#c;constructor(){this.state=new zr,this.#i=0,this.#n=new zr,this.#l=!1,this.#c=!1}update(n,r){this.#e=n,this.#o=r,this.#i=0}animate(){var n=this;return ZD(function*(){if(n.#c)return n.#c=!1,void n.#n.next();if(n.#l=!0,!(n.#i>=n.#o.length)){n.state.next(n.#o[n.#i].state);for(let r of n.#o[n.#i].nodeAnimations)n.#e.updateNode(`${r.node}`,i=>({...i,type:"border",color:r.to[0],borderColor:r.to[1]}));for(let r of n.#o[n.#i].edgeAnimations)n.#e.updateEdge(`${r.u}`,`${r.v}`,i=>({...i,color:r.to}));return n.#i++,new Promise(r=>setTimeout(()=>{n.animate()},n.#o[n.#i].time??1e3))}})()}goTo(n){var r=this;return ZD(function*(){if(r.#l&&(r.#c=!0,yield function sB(e,t){const n="object"==typeof t;return new Promise((r,i)=>{const o=new ze({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(t.defaultValue):i(new oB)}});e.subscribe(o)})}(r.#n.pipe(function aB(e){return e<=0?()=>T:pe((t,n)=>{let r=0;t.subscribe(ae(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}(1)))),r.#l=!0,r.#i!=n)if(r.state.next(r.#o[n].state),r.#i>n)for(;r.#i!=n;){for(let i of r.#o[r.#i].nodeAnimations)r.#e.updateNode(`${i.node}`,o=>({...o,type:"border",color:i.from[0],borderColor:i.from[1]}));for(let i of r.#o[r.#i].edgeAnimations)r.#e.updateEdge(`${i.u}`,`${i.v}`,o=>({...o,color:i.from}));r.#i--}else for(;r.#i!=n;){for(let i of r.#o[r.#i].nodeAnimations)r.#e.updateNode(`${i.node}`,o=>({...o,type:"border",color:i.to[0],borderColor:i.to[1]}));for(let i of r.#o[r.#i].edgeAnimations)r.#e.updateEdge(`${i.u}`,`${i.v}`,o=>({...o,color:i.to}));r.#i++}r.#l=!1,r.#n.next()})()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function cB(){}function fg(e){return null==e?cB:function(){return this.querySelector(e)}}function fB(){return[]}function KD(e){return null==e?fB:function(){return this.querySelectorAll(e)}}function XD(e){return function(){return this.matches(e)}}function QD(e){return function(t){return t.matches(e)}}var gB=Array.prototype.find;function vB(){return this.firstElementChild}var _B=Array.prototype.filter;function wB(){return Array.from(this.children)}function JD(e){return new Array(e.length)}function Ll(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function SB(e,t,n,r,i,o){for(var a,s=0,u=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Ll(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function TB(e,t,n,r,i,o,s){var a,u,f,c=new Map,l=t.length,d=o.length,h=new Array(l);for(a=0;a<l;++a)(u=t[a])&&(h[a]=f=s.call(u,u.__data__,a,t)+"",c.has(f)?i[a]=u:c.set(f,u));for(a=0;a<d;++a)f=s.call(e,o[a],a,o)+"",(u=c.get(f))?(r[a]=u,u.__data__=o[a],c.delete(f)):n[a]=new Ll(e,o[a]);for(a=0;a<l;++a)(u=t[a])&&c.get(h[a])===u&&(i[a]=u)}function AB(e){return e.__data__}function xB(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function PB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}Ll.prototype={constructor:Ll,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var hg="http://www.w3.org/1999/xhtml";const eC={svg:"http://www.w3.org/2000/svg",xhtml:hg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pl(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),eC.hasOwnProperty(t)?{space:eC[t],local:e}:e}function VB(e){return function(){this.removeAttribute(e)}}function $B(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zB(e,t){return function(){this.setAttribute(e,t)}}function WB(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qB(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function YB(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function tC(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function KB(e){return function(){this.style.removeProperty(e)}}function XB(e,t,n){return function(){this.style.setProperty(e,t,n)}}function QB(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Cs(e,t){return e.style.getPropertyValue(t)||tC(e).getComputedStyle(e,null).getPropertyValue(t)}function ej(e){return function(){delete this[e]}}function tj(e,t){return function(){this[e]=t}}function nj(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function nC(e){return e.trim().split(/^|\s+/)}function pg(e){return e.classList||new rC(e)}function rC(e){this._node=e,this._names=nC(e.getAttribute("class")||"")}function iC(e,t){for(var n=pg(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function oC(e,t){for(var n=pg(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ij(e){return function(){iC(this,e)}}function oj(e){return function(){oC(this,e)}}function sj(e,t){return function(){(t.apply(this,arguments)?iC:oC)(this,e)}}function uj(){this.textContent=""}function cj(e){return function(){this.textContent=e}}function lj(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function fj(){this.innerHTML=""}function hj(e){return function(){this.innerHTML=e}}function pj(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function mj(){this.nextSibling&&this.parentNode.appendChild(this)}function yj(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wj(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===hg&&t.documentElement.namespaceURI===hg?t.createElement(e):t.createElementNS(n,e)}}function bj(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sC(e){var t=Pl(e);return(t.local?bj:wj)(t)}function Dj(){return null}function Ij(){var e=this.parentNode;e&&e.removeChild(this)}function Tj(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Aj(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kj(e){return function(){var t=this.__on;if(t){for(var o,n=0,r=-1,i=t.length;n<i;++n)o=t[n],e.type&&o.type!==e.type||o.name!==e.name?t[++r]=o:this.removeEventListener(o.type,o.listener,o.options);++r?t.length=r:delete this.__on}}}function Oj(e,t,n){return function(){var i,r=this.__on,o=function Nj(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=t);this.addEventListener(e.type,o,n),i={type:e.type,name:e.name,value:t,listener:o,options:n},r?r.push(i):this.__on=[i]}}function aC(e,t,n){var r=tC(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Pj(e,t){return function(){return aC(this,e,t)}}function Fj(e,t){return function(){return aC(this,e,t.apply(this,arguments))}}rC.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Hj=[null];function mr(e,t){this._groups=e,this._parents=t}function uC(){return new mr([[document.documentElement]],Hj)}mr.prototype=uC.prototype={constructor:mr,select:function lB(e){"function"!=typeof e&&(e=fg(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var u,c,o=t[i],s=o.length,a=r[i]=new Array(s),l=0;l<s;++l)(u=o[l])&&(c=e.call(u,u.__data__,l,o))&&("__data__"in u&&(c.__data__=u.__data__),a[l]=c);return new mr(r,this._parents)},selectAll:function pB(e){e="function"==typeof e?function hB(e){return function(){return function dB(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}(e):KD(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var u,s=t[o],a=s.length,c=0;c<a;++c)(u=s[c])&&(r.push(e.call(u,u.__data__,c,s)),i.push(u));return new mr(r,i)},selectChild:function yB(e){return this.select(null==e?vB:function mB(e){return function(){return gB.call(this.children,e)}}("function"==typeof e?e:QD(e)))},selectChildren:function EB(e){return this.selectAll(null==e?wB:function bB(e){return function(){return _B.call(this.children,e)}}("function"==typeof e?e:QD(e)))},filter:function DB(e){"function"!=typeof e&&(e=XD(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var u,o=t[i],s=o.length,a=r[i]=[],c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new mr(r,this._parents)},data:function MB(e,t){if(!arguments.length)return Array.from(this,AB);var n=t?TB:SB,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function IB(e){return function(){return e}}(e));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],d=i[c],h=d.length,f=xB(e.call(l,l&&l.__data__,c,r)),v=f.length,m=a[c]=new Array(v),y=s[c]=new Array(v);n(l,d,m,y,u[c]=new Array(h),f,t);for(var R,x,b=0,S=0;b<v;++b)if(R=m[b]){for(b>=S&&(S=b+1);!(x=y[S])&&++S<v;);R._next=x||null}}return(s=new mr(s,r))._enter=a,s._exit=u,s},enter:function CB(){return new mr(this._enter||this._groups.map(JD),this._parents)},exit:function NB(){return new mr(this._exit||this._groups.map(JD),this._parents)},join:function RB(e,t,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function kB(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=Math.min(i,r.length),a=new Array(i),u=0;u<s;++u)for(var f,c=n[u],l=r[u],d=c.length,h=a[u]=new Array(d),v=0;v<d;++v)(f=c[v]||l[v])&&(h[v]=f);for(;u<i;++u)a[u]=n[u];return new mr(a,this._parents)},selection:function Uj(){return this},order:function OB(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s,r=e[t],i=r.length-1,o=r[i];--i>=0;)(s=r[i])&&(o&&4^s.compareDocumentPosition(o)&&o.parentNode.insertBefore(s,o),o=s);return this},sort:function LB(e){function t(d,h){return d&&h?e(d.__data__,h.__data__):!d-!h}e||(e=PB);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var c,s=n[o],a=s.length,u=i[o]=new Array(a),l=0;l<a;++l)(c=s[l])&&(u[l]=c);u.sort(t)}return new mr(i,this._parents).order()},call:function FB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function BB(){return Array.from(this)},node:function jB(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function HB(){let e=0;for(const t of this)++e;return e},empty:function UB(){return!this.node()},each:function GB(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function ZB(e,t){var n=Pl(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?$B:VB:"function"==typeof t?n.local?YB:qB:n.local?WB:zB)(n,t))},style:function JB(e,t,n){return arguments.length>1?this.each((null==t?KB:"function"==typeof t?QB:XB)(e,t,n??"")):Cs(this.node(),e)},property:function rj(e,t){return arguments.length>1?this.each((null==t?ej:"function"==typeof t?nj:tj)(e,t)):this.node()[e]},classed:function aj(e,t){var n=nC(e+"");if(arguments.length<2){for(var r=pg(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?sj:t?ij:oj)(n,t))},text:function dj(e){return arguments.length?this.each(null==e?uj:("function"==typeof e?lj:cj)(e)):this.node().textContent},html:function gj(e){return arguments.length?this.each(null==e?fj:("function"==typeof e?pj:hj)(e)):this.node().innerHTML},raise:function vj(){return this.each(mj)},lower:function _j(){return this.each(yj)},append:function Ej(e){var t="function"==typeof e?e:sC(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function Cj(e,t){var n="function"==typeof e?e:sC(e),r=null==t?Dj:"function"==typeof t?t:fg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function Sj(){return this.each(Ij)},clone:function Mj(e){return this.select(e?Aj:Tj)},datum:function xj(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function Lj(e,t,n){var i,s,r=function Rj(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}(e+""),o=r.length;if(!(arguments.length<2)){for(a=t?Oj:kj,i=0;i<o;++i)this.each(a(r[i],t,n));return this}var a=this.node().__on;if(a)for(var l,u=0,c=a.length;u<c;++u)for(i=0,l=a[u];i<o;++i)if((s=r[i]).type===l.type&&s.name===l.name)return l.value},dispatch:function Bj(e,t){return this.each(("function"==typeof t?Fj:Pj)(e,t))},[Symbol.iterator]:function*jj(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s,r=e[t],i=0,o=r.length;i<o;++i)(s=r[i])&&(yield s)}};const su=uC;var Gj={value:()=>{}};function cC(){for(var r,e=0,t=arguments.length,n={};e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Fl(n)}function Fl(e){this._=e}function $j(e,t){for(var i,n=0,r=e.length;n<r;++n)if((i=e[n]).name===t)return i.value}function lC(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Gj,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Fl.prototype=cC.prototype={constructor:Fl,on:function(e,t){var i,n=this._,r=function Vj(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}(e+"",n),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=lC(n[i],e.name,t);else if(null==t)for(i in n)n[i]=lC(n[i],e.name,null);return this}for(;++o<s;)if((i=(e=r[o]).type)&&(i=$j(n[i],e.name)))return i},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Fl(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var i,o,n=new Array(i),r=0;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=0,i=(o=this._[e]).length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};const zj=cC;var Bl,cu,Is=0,au=0,uu=0,dC=1e3,jl=0,ao=0,Hl=0,lu="object"==typeof performance&&performance.now?performance:Date,fC="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gg(){return ao||(fC(Wj),ao=lu.now()+Hl)}function Wj(){ao=0}function Ul(){this._call=this._time=this._next=null}function hC(e,t,n){var r=new Ul;return r.restart(e,t,n),r}function pC(){ao=(jl=lu.now())+Hl,Is=au=0;try{!function qj(){gg(),++Is;for(var t,e=Bl;e;)(t=ao-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Is}()}finally{Is=0,function Zj(){for(var e,n,t=Bl,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Bl=n);cu=e,mg(r)}(),ao=0}}function Yj(){var e=lu.now(),t=e-jl;t>dC&&(Hl-=t,jl=e)}function mg(e){Is||(au&&(au=clearTimeout(au)),e-ao>24?(e<1/0&&(au=setTimeout(pC,e-lu.now()-Hl)),uu&&(uu=clearInterval(uu))):(uu||(jl=lu.now(),uu=setInterval(Yj,dC)),Is=1,fC(pC)))}function gC(e,t,n){var r=new Ul;return r.restart(i=>{r.stop(),e(i+t)},t=null==t?0:+t,n),r}Ul.prototype=hC.prototype={constructor:Ul,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?gg():+n)+(null==t?0:+t),!this._next&&cu!==this&&(cu?cu._next=this:Bl=this,cu=this),this._call=e,this._time=n,mg()},stop:function(){this._call&&(this._call=null,this._time=1/0,mg())}};var Kj=zj("start","end","cancel","interrupt"),Xj=[],mC=0,Gl=3;function $l(e,t,n,r,i,o){var s=e.__transition;if(s){if(n in s)return}else e.__transition={};!function Qj(e,t,n){var i,r=e.__transition;function s(c){var l,d,h,f;if(1!==n.state)return u();for(l in r)if((f=r[l]).name===n.name){if(f.state===Gl)return gC(s);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[l])}if(gC(function(){n.state===Gl&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=Gl,i=new Array(h=n.tween.length),l=0,d=-1;l<h;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=f);i.length=d+1}}function a(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=5,1),d=-1,h=i.length;++d<h;)i[d].call(e,l);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var c in n.state=6,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=hC(function o(c){n.state=1,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:Kj,tween:Xj,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:mC})}function _g(e,t){var n=vr(e,t);if(n.state>mC)throw new Error("too late; already scheduled");return n}function jr(e,t){var n=vr(e,t);if(n.state>Gl)throw new Error("too late; already running");return n}function vr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ri(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var zl,_C=180/Math.PI,wg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wC(e,t,n,r,i,o){var s,a,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*_C,skewX:Math.atan(u)*_C,scaleX:s,scaleY:a}}function bC(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}return function(c,l){var d=[],h=[];return c=e(c),l=e(l),function o(c,l,d,h,f,v){if(c!==d||l!==h){var m=f.push("translate(",null,t,null,n);v.push({i:m-4,x:Ri(c,d)},{i:m-2,x:Ri(l,h)})}else(d||h)&&f.push("translate("+d+t+h+n)}(c.translateX,c.translateY,l.translateX,l.translateY,d,h),function s(c,l,d,h){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),h.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Ri(c,l)})):l&&d.push(i(d)+"rotate("+l+r)}(c.rotate,l.rotate,d,h),function a(c,l,d,h){c!==l?h.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Ri(c,l)}):l&&d.push(i(d)+"skewX("+l+r)}(c.skewX,l.skewX,d,h),function u(c,l,d,h,f,v){if(c!==d||l!==h){var m=f.push(i(f)+"scale(",null,",",null,")");v.push({i:m-4,x:Ri(c,d)},{i:m-2,x:Ri(l,h)})}else(1!==d||1!==h)&&f.push(i(f)+"scale("+d+","+h+")")}(c.scaleX,c.scaleY,l.scaleX,l.scaleY,d,h),c=l=null,function(f){for(var y,v=-1,m=h.length;++v<m;)d[(y=h[v]).i]=y.x(f);return d.join("")}}}var rH=bC(function tH(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wg:wC(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),iH=bC(function nH(e){return null!=e&&(zl||(zl=document.createElementNS("http://www.w3.org/2000/svg","g")),zl.setAttribute("transform",e),e=zl.transform.baseVal.consolidate())?wC((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):wg},", ",")",")");function oH(e,t){var n,r;return function(){var i=jr(this,e),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===t){(r=r.slice()).splice(s,1);break}i.tween=r}}function sH(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=jr(this,e),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:t,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===t){i[u]=a;break}u===c&&i.push(a)}o.tween=i}}function bg(e,t,n){var r=e._id;return e.each(function(){var i=jr(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return vr(i,r).value[t]}}function Eg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function EC(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function du(){}var Wl=1/.7,Ss="\\s*([+-]?\\d+)\\s*",hu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uH=/^#([0-9a-f]{3,8})$/,cH=new RegExp(`^rgb\\(${Ss},${Ss},${Ss}\\)$`),lH=new RegExp(`^rgb\\(${Hr},${Hr},${Hr}\\)$`),dH=new RegExp(`^rgba\\(${Ss},${Ss},${Ss},${hu}\\)$`),fH=new RegExp(`^rgba\\(${Hr},${Hr},${Hr},${hu}\\)$`),hH=new RegExp(`^hsl\\(${hu},${Hr},${Hr}\\)$`),pH=new RegExp(`^hsla\\(${hu},${Hr},${Hr},${hu}\\)$`),DC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function CC(){return this.rgb().formatHex()}function IC(){return this.rgb().formatRgb()}function pu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=uH.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?SC(t):3===n?new Mn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?ql(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?ql(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=cH.exec(e))?new Mn(t[1],t[2],t[3],1):(t=lH.exec(e))?new Mn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=dH.exec(e))?ql(t[1],t[2],t[3],t[4]):(t=fH.exec(e))?ql(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=hH.exec(e))?MC(t[1],t[2]/100,t[3]/100,1):(t=pH.exec(e))?MC(t[1],t[2]/100,t[3]/100,t[4]):DC.hasOwnProperty(e)?SC(DC[e]):"transparent"===e?new Mn(NaN,NaN,NaN,0):null}function SC(e){return new Mn(e>>16&255,e>>8&255,255&e,1)}function ql(e,t,n,r){return r<=0&&(e=t=n=NaN),new Mn(e,t,n,r)}function Yl(e,t,n,r){return 1===arguments.length?function vH(e){return e instanceof du||(e=pu(e)),e?new Mn((e=e.rgb()).r,e.g,e.b,e.opacity):new Mn}(e):new Mn(e,t,n,r??1)}function Mn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function TC(){return`#${co(this.r)}${co(this.g)}${co(this.b)}`}function AC(){const e=Zl(this.opacity);return`${1===e?"rgb(":"rgba("}${uo(this.r)}, ${uo(this.g)}, ${uo(this.b)}${1===e?")":`, ${e})`}`}function Zl(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function uo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function co(e){return((e=uo(e))<16?"0":"")+e.toString(16)}function MC(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yr(e,t,n,r)}function xC(e){if(e instanceof yr)return new yr(e.h,e.s,e.l,e.opacity);if(e instanceof du||(e=pu(e)),!e)return new yr;if(e instanceof yr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=t===o?(n-r)/a+6*(n<r):n===o?(r-t)/a+2:(t-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new yr(s,a,u,e.opacity)}function yr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function NC(e){return(e=(e||0)%360)<0?e+360:e}function Kl(e){return Math.max(0,Math.min(1,e||0))}function Dg(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function RC(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}Eg(du,pu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:CC,formatHex:CC,formatHex8:function gH(){return this.rgb().formatHex8()},formatHsl:function mH(){return xC(this).formatHsl()},formatRgb:IC,toString:IC}),Eg(Mn,Yl,EC(du,{brighter(e){return e=null==e?Wl:Math.pow(Wl,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Mn(uo(this.r),uo(this.g),uo(this.b),Zl(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TC,formatHex:TC,formatHex8:function yH(){return`#${co(this.r)}${co(this.g)}${co(this.b)}${co(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:AC,toString:AC})),Eg(yr,function _H(e,t,n,r){return 1===arguments.length?xC(e):new yr(e,t,n,r??1)},EC(du,{brighter(e){return e=null==e?Wl:Math.pow(Wl,e),new yr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new yr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Mn(Dg(e>=240?e-240:e+120,i,r),Dg(e,i,r),Dg(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new yr(NC(this.h),Kl(this.s),Kl(this.l),Zl(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zl(this.opacity);return`${1===e?"hsl(":"hsla("}${NC(this.h)}, ${100*Kl(this.s)}%, ${100*Kl(this.l)}%${1===e?")":`, ${e})`}`}}));const kC=e=>()=>e;function LC(e,t){var n=t-e;return n?function OC(e,t){return function(n){return e+n*t}}(e,n):kC(isNaN(e)?t:e)}const PC=function e(t){var n=function DH(e){return 1==(e=+e)?LC:function(t,n){return n-t?function EH(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):kC(isNaN(t)?n:t)}}(t);function r(i,o){var s=n((i=Yl(i)).r,(o=Yl(o)).r),a=n(i.g,o.g),u=n(i.b,o.b),c=LC(i.opacity,o.opacity);return function(l){return i.r=s(l),i.g=a(l),i.b=u(l),i.opacity=c(l),i+""}}return r.gamma=e,r}(1);function FC(e){return function(t){var s,a,n=t.length,r=new Array(n),i=new Array(n),o=new Array(n);for(s=0;s<n;++s)a=Yl(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=o(u),a+""}}}FC(function wH(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1];return RC((n-r/t)*t,r>0?e[r-1]:2*i-o,i,o,r<t-1?e[r+2]:2*o-i)}}),FC(function bH(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t);return RC((n-r/t)*t,e[(r+t-1)%t],e[r%t],e[(r+1)%t],e[(r+2)%t])}});var Cg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ig=new RegExp(Cg.source,"g");function SH(e,t){var r,i,o,n=Cg.lastIndex=Ig.lastIndex=0,s=-1,a=[],u=[];for(e+="",t+="";(r=Cg.exec(e))&&(i=Ig.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,u.push({i:s,x:Ri(r,i)})),n=Ig.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?u[0]?function IH(e){return function(t){return e(t)+""}}(u[0].x):function CH(e){return function(){return e}}(t):(t=u.length,function(c){for(var d,l=0;l<t;++l)a[(d=u[l]).i]=d.x(c);return a.join("")})}function BC(e,t){var n;return("number"==typeof t?Ri:t instanceof pu?PC:(n=pu(t))?(t=n,PC):SH)(e,t)}function TH(e){return function(){this.removeAttribute(e)}}function AH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function MH(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttribute(e);return s===i?null:s===r?o:o=t(r=s,n)}}function xH(e,t,n){var r,o,i=n+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===i?null:s===r?o:o=t(r=s,n)}}function NH(e,t,n){var r,i,o;return function(){var s,u,a=n(this);return null==a?void this.removeAttribute(e):(s=this.getAttribute(e))===(u=a+"")?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function RH(e,t,n){var r,i,o;return function(){var s,u,a=n(this);return null==a?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(u=a+"")?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}function PH(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function LH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,o)),n}return i._value=t,i}function FH(e,t){var n,r;function i(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&function OH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,o)),n}return i._value=t,i}function jH(e,t){return function(){_g(this,e).delay=+t.apply(this,arguments)}}function HH(e,t){return t=+t,function(){_g(this,e).delay=t}}function GH(e,t){return function(){jr(this,e).duration=+t.apply(this,arguments)}}function VH(e,t){return t=+t,function(){jr(this,e).duration=t}}var iU=su.prototype.constructor;function jC(e){return function(){this.style.removeProperty(e)}}var EU=0;function pi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function HC(){return++EU}var gi=su.prototype;pi.prototype=function DU(e){return su().transition(e)}.prototype={constructor:pi,select:function nU(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=fg(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l,d,a=r[s],u=a.length,c=o[s]=new Array(u),h=0;h<u;++h)(l=a[h])&&(d=e.call(l,l.__data__,h,a))&&("__data__"in l&&(d.__data__=l.__data__),c[h]=d,$l(c[h],t,n,h,c,vr(l,n)));return new pi(o,this._parents,t,n)},selectAll:function rU(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=KD(e));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,u=r[a],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var f,h=e.call(l,l.__data__,d,u),v=vr(l,n),m=0,y=h.length;m<y;++m)(f=h[m])&&$l(f,t,n,m,h,v);o.push(h),s.push(l)}return new pi(o,s,t,n)},selectChild:gi.selectChild,selectChildren:gi.selectChildren,filter:function ZH(e){"function"!=typeof e&&(e=XD(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var u,o=t[i],s=o.length,a=r[i]=[],c=0;c<s;++c)(u=o[c])&&e.call(u,u.__data__,c,o)&&a.push(u);return new pi(r,this._parents,this._name,this._id)},merge:function KH(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=Math.min(r,n.length),s=new Array(r),a=0;a<o;++a)for(var h,u=t[a],c=n[a],l=u.length,d=s[a]=new Array(l),f=0;f<l;++f)(h=u[f]||c[f])&&(d[f]=h);for(;a<r;++a)s[a]=t[a];return new pi(s,this._parents,this._name,this._id)},selection:function oU(){return new iU(this._groups,this._parents)},transition:function wU(){for(var e=this._name,t=this._id,n=HC(),r=this._groups,i=r.length,o=0;o<i;++o)for(var u,s=r[o],a=s.length,c=0;c<a;++c)if(u=s[c]){var l=vr(u,t);$l(u,e,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new pi(r,this._parents,e,n)},call:gi.call,nodes:gi.nodes,node:gi.node,size:gi.size,empty:gi.empty,each:gi.each,on:function JH(e,t){var n=this._id;return arguments.length<2?vr(this.node(),n).on.on(e):this.each(function QH(e,t,n){var r,i,o=function XH(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(t)?_g:jr;return function(){var s=o(this,e),a=s.on;a!==r&&(i=(r=a).copy()).on(t,n),s.on=i}}(n,e,t))},attr:function kH(e,t){var n=Pl(e),r="transform"===n?iH:BC;return this.attrTween(e,"function"==typeof t?(n.local?RH:NH)(n,r,bg(this,"attr."+e,t)):null==t?(n.local?AH:TH)(n):(n.local?xH:MH)(n,r,t))},attrTween:function BH(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Pl(e);return this.tween(n,(r.local?PH:FH)(r,t))},style:function lU(e,t,n){var r="transform"==(e+="")?rH:BC;return null==t?this.styleTween(e,function sU(e,t){var n,r,i;return function(){var o=Cs(this,e),s=(this.style.removeProperty(e),Cs(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,jC(e)):"function"==typeof t?this.styleTween(e,function uU(e,t,n){var r,i,o;return function(){var s=Cs(this,e),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(e),u=a=Cs(this,e)),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,a))}}(e,r,bg(this,"style."+e,t))).each(function cU(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var u=jr(this,e),c=u.on,l=null==u.value[o]?a||(a=jC(t)):void 0;(c!==n||i!==l)&&(r=(n=c).copy()).on(s,i=l),u.on=r}}(this._id,e)):this.styleTween(e,function aU(e,t,n){var r,o,i=n+"";return function(){var s=Cs(this,e);return s===i?null:s===r?o:o=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function hU(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function fU(e,t,n){var r,i;function o(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&function dU(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}(e,s,n)),r}return o._value=t,o}(e,t,n??""))},text:function mU(e){return this.tween("text","function"==typeof e?function gU(e){return function(){var t=e(this);this.textContent=t??""}}(bg(this,"text",e)):function pU(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function _U(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function yU(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&function vU(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return r._value=e,r}(e))},remove:function tU(){return this.on("end.remove",function eU(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function aH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s,r=vr(this.node(),n).tween,i=0,o=r.length;i<o;++i)if((s=r[i]).name===e)return s.value;return null}return this.each((null==t?oH:sH)(n,e,t))},delay:function UH(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?jH:HH)(t,e)):vr(this.node(),t).delay},duration:function $H(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?GH:VH)(t,e)):vr(this.node(),t).duration},ease:function WH(e){var t=this._id;return arguments.length?this.each(function zH(e,t){if("function"!=typeof t)throw new Error;return function(){jr(this,e).ease=t}}(t,e)):vr(this.node(),t).ease},easeVarying:function YH(e){if("function"!=typeof e)throw new Error;return this.each(function qH(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;jr(this,e).ease=n}}(this._id,e))},end:function bU(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},u={value:function(){0==--i&&o()}};n.each(function(){var c=jr(this,r),l=c.on;l!==e&&((t=(e=l).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),c.on=t}),0===i&&o()})},[Symbol.iterator]:gi[Symbol.iterator]};var IU={time:null,delay:0,duration:250,ease:function CU(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function SU(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}su.prototype.interrupt=function eH(e){return this.each(function(){!function Jj(e,t){var r,i,s,n=e.__transition,o=!0;if(n){for(s in t=null==t?null:t+"",n)(r=n[s]).name===t?(i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[s]):o=!1;o&&delete e.__transition}}(this,e)})},su.prototype.transition=function TU(e){var t,n;e instanceof pi?(t=e._id,e=e._name):(t=HC(),(n=IU).time=gg(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var u,s=r[o],a=s.length,c=0;c<a;++c)(u=s[c])&&$l(u,e,t,c,s,n||SU(u,t));return new pi(r,this._parents,e,t)};Math;function gu(e){return{type:e}}["w","e"].map(gu),["n","s"].map(gu),["n","w","e","s","nw","ne","sw","se"].map(gu);const Bt=134217729;function mu(e,t,n,r,i){let o,s,a,u,c=t[0],l=r[0],d=0,h=0;l>c==l>-c?(o=c,c=t[++d]):(o=l,l=r[++h]);let f=0;if(d<e&&h<n)for(l>c==l>-c?(s=c+o,a=o-(s-c),c=t[++d]):(s=l+o,a=o-(s-l),l=r[++h]),o=s,0!==a&&(i[f++]=a);d<e&&h<n;)l>c==l>-c?(s=o+c,u=s-o,a=o-(s-u)+(c-u),c=t[++d]):(s=o+l,u=s-o,a=o-(s-u)+(l-u),l=r[++h]),o=s,0!==a&&(i[f++]=a);for(;d<e;)s=o+c,u=s-o,a=o-(s-u)+(c-u),c=t[++d],o=s,0!==a&&(i[f++]=a);for(;h<n;)s=o+l,u=s-o,a=o-(s-u)+(l-u),l=r[++h],o=s,0!==a&&(i[f++]=a);return(0!==o||0===f)&&(i[f++]=o),f}function ie(e){return new Float64Array(e)}const Ms=ie(4),WC=ie(8),qC=ie(12),YC=ie(16),yn=ie(4);function Jl(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),u=s-a,c=Math.abs(s+a);return Math.abs(u)>=33306690738754716e-32*c?u:-function HU(e,t,n,r,i,o,s){let a,u,c,l,d,h,f,v,m,y,_,b,S,R,x,F,B,U;const H=e-i,$=n-i,W=t-o,Z=r-o;R=H*Z,h=Bt*H,f=h-(h-H),v=H-f,h=Bt*Z,m=h-(h-Z),y=Z-m,x=v*y-(R-f*m-v*m-f*y),F=W*$,h=Bt*W,f=h-(h-W),v=W-f,h=Bt*$,m=h-(h-$),y=$-m,B=v*y-(F-f*m-v*m-f*y),_=x-B,d=x-_,Ms[0]=x-(_+d)+(d-B),b=R+_,d=b-R,S=R-(b-d)+(_-d),_=S-F,d=S-_,Ms[1]=S-(_+d)+(d-F),U=b+_,d=U-b,Ms[2]=b-(U-d)+(_-d),Ms[3]=U;let Q=function PU(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}(4,Ms),C=22204460492503146e-32*s;if(Q>=C||-Q>=C||(d=e-H,a=e-(H+d)+(d-i),d=n-$,c=n-($+d)+(d-i),d=t-W,u=t-(W+d)+(d-o),d=r-Z,l=r-(Z+d)+(d-o),0===a&&0===u&&0===c&&0===l)||(C=11093356479670487e-47*s+33306690738754706e-32*Math.abs(Q),Q+=H*l+Z*a-(W*c+$*u),Q>=C||-Q>=C))return Q;R=a*Z,h=Bt*a,f=h-(h-a),v=a-f,h=Bt*Z,m=h-(h-Z),y=Z-m,x=v*y-(R-f*m-v*m-f*y),F=u*$,h=Bt*u,f=h-(h-u),v=u-f,h=Bt*$,m=h-(h-$),y=$-m,B=v*y-(F-f*m-v*m-f*y),_=x-B,d=x-_,yn[0]=x-(_+d)+(d-B),b=R+_,d=b-R,S=R-(b-d)+(_-d),_=S-F,d=S-_,yn[1]=S-(_+d)+(d-F),U=b+_,d=U-b,yn[2]=b-(U-d)+(_-d),yn[3]=U;const k=mu(4,Ms,4,yn,WC);R=H*l,h=Bt*H,f=h-(h-H),v=H-f,h=Bt*l,m=h-(h-l),y=l-m,x=v*y-(R-f*m-v*m-f*y),F=W*c,h=Bt*W,f=h-(h-W),v=W-f,h=Bt*c,m=h-(h-c),y=c-m,B=v*y-(F-f*m-v*m-f*y),_=x-B,d=x-_,yn[0]=x-(_+d)+(d-B),b=R+_,d=b-R,S=R-(b-d)+(_-d),_=S-F,d=S-_,yn[1]=S-(_+d)+(d-F),U=b+_,d=U-b,yn[2]=b-(U-d)+(_-d),yn[3]=U;const A=mu(k,WC,4,yn,qC);R=a*l,h=Bt*a,f=h-(h-a),v=a-f,h=Bt*l,m=h-(h-l),y=l-m,x=v*y-(R-f*m-v*m-f*y),F=u*c,h=Bt*u,f=h-(h-u),v=u-f,h=Bt*c,m=h-(h-c),y=c-m,B=v*y-(F-f*m-v*m-f*y),_=x-B,d=x-_,yn[0]=x-(_+d)+(d-B),b=R+_,d=b-R,S=R-(b-d)+(_-d),_=S-F,d=S-_,yn[1]=S-(_+d)+(d-F),U=b+_,d=U-b,yn[2]=b-(U-d)+(_-d),yn[3]=U;const P=mu(A,qC,4,yn,YC);return YC[P-1]}(e,t,n,r,i,o,c)}ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(8),ie(8),ie(8),ie(4),ie(8),ie(8),ie(8),ie(12),ie(192),ie(192),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(8),ie(8),ie(8),ie(8),ie(8),ie(8),ie(8),ie(8),ie(8),ie(4),ie(4),ie(4),ie(8),ie(16),ie(16),ie(16),ie(32),ie(32),ie(48),ie(64),ie(1152),ie(1152),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(4),ie(24),ie(24),ie(24),ie(24),ie(24),ie(24),ie(24),ie(24),ie(24),ie(24),ie(1152),ie(1152),ie(1152),ie(1152),ie(1152),ie(2304),ie(2304),ie(3456),ie(5760),ie(8),ie(8),ie(8),ie(16),ie(24),ie(48),ie(48),ie(96),ie(192),ie(384),ie(384),ie(384),ie(768),ie(96),ie(96),ie(96),ie(1152);const gI=Math.pow(2,-52),cd=new Uint32Array(512);class ld{static from(t,n=sG,r=aG){const i=t.length,o=new Float64Array(2*i);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new ld(o)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,u=1/0,c=-1/0,l=-1/0;for(let H=0;H<s;H++){const $=t[2*H],W=t[2*H+1];$<a&&(a=$),W<u&&(u=W),$>c&&(c=$),W>l&&(l=W),this._ids[H]=H}const d=(a+c)/2,h=(u+l)/2;let f,v,m;for(let H=0,$=1/0;H<s;H++){const W=tm(d,h,t[2*H],t[2*H+1]);W<$&&(f=H,$=W)}const y=t[2*f],_=t[2*f+1];for(let H=0,$=1/0;H<s;H++){if(H===f)continue;const W=tm(y,_,t[2*H],t[2*H+1]);W<$&&W>0&&(v=H,$=W)}let b=t[2*v],S=t[2*v+1],R=1/0;for(let H=0;H<s;H++){if(H===f||H===v)continue;const $=iG(y,_,b,S,t[2*H],t[2*H+1]);$<R&&(m=H,R=$)}let x=t[2*m],F=t[2*m+1];if(R===1/0){for(let W=0;W<s;W++)this._dists[W]=t[2*W]-t[0]||t[2*W+1]-t[1];Fs(this._ids,this._dists,0,s-1);const H=new Uint32Array(s);let $=0;for(let W=0,Z=-1/0;W<s;W++){const Q=this._ids[W],C=this._dists[Q];C>Z&&(H[$++]=Q,Z=C)}return this.hull=H.subarray(0,$),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Jl(y,_,b,S,x,F)<0){const H=v,$=b,W=S;v=m,b=x,S=F,m=H,x=$,F=W}const B=function oG(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,c=o-t,l=s*s+a*a,d=u*u+c*c,h=.5/(s*c-a*u);return{x:e+(c*l-a*d)*h,y:t+(s*d-u*l)*h}}(y,_,b,S,x,F);this._cx=B.x,this._cy=B.y;for(let H=0;H<s;H++)this._dists[H]=tm(t[2*H],t[2*H+1],B.x,B.y);Fs(this._ids,this._dists,0,s-1),this._hullStart=f;let U=3;r[f]=n[m]=v,r[v]=n[f]=m,r[m]=n[v]=f,i[f]=0,i[v]=1,i[m]=2,o.fill(-1),o[this._hashKey(y,_)]=f,o[this._hashKey(b,S)]=v,o[this._hashKey(x,F)]=m,this.trianglesLen=0,this._addTriangle(f,v,m,-1,-1,-1);for(let $,W,H=0;H<this._ids.length;H++){const Z=this._ids[H],Q=t[2*Z],C=t[2*Z+1];if(H>0&&Math.abs(Q-$)<=gI&&Math.abs(C-W)<=gI||($=Q,W=C,Z===f||Z===v||Z===m))continue;let k=0;for(let N=0,j=this._hashKey(Q,C);N<this._hashSize&&(k=o[(j+N)%this._hashSize],-1===k||k===r[k]);N++);k=n[k];let P,A=k;for(;P=r[A],Jl(Q,C,t[2*A],t[2*A+1],t[2*P],t[2*P+1])>=0;)if(A=P,A===k){A=-1;break}if(-1===A)continue;let M=this._addTriangle(A,Z,r[A],-1,-1,i[A]);i[Z]=this._legalize(M+2),i[A]=M,U++;let L=r[A];for(;P=r[L],Jl(Q,C,t[2*L],t[2*L+1],t[2*P],t[2*P+1])<0;)M=this._addTriangle(L,Z,P,i[Z],-1,i[L]),i[Z]=this._legalize(M+2),r[L]=L,U--,L=P;if(A===k)for(;P=n[A],Jl(Q,C,t[2*P],t[2*P+1],t[2*A],t[2*A+1])<0;)M=this._addTriangle(P,Z,A,-1,i[A],i[P]),this._legalize(M+2),i[P]=M,r[A]=A,U--,A=P;this._hullStart=n[Z]=A,r[A]=n[L]=Z,r[Z]=L,o[this._hashKey(Q,C)]=Z,o[this._hashKey(t[2*A],t[2*A+1])]=A}this.hull=new Uint32Array(U);for(let H=0,$=this._hullStart;H<U;H++)this.hull[H]=$,$=r[$];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function nG(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],u=t-t%3;if(s=u+(t+2)%3,-1===a){if(0===o)break;t=cd[--o];continue}const c=a-a%3,d=c+(a+2)%3,h=n[s],f=n[t],v=n[u+(t+1)%3],m=n[d];if(rG(i[2*h],i[2*h+1],i[2*f],i[2*f+1],i[2*v],i[2*v+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=h;const _=r[d];if(-1===_){let S=this._hullStart;do{if(this._hullTri[S]===d){this._hullTri[S]=t;break}S=this._hullPrev[S]}while(S!==this._hullStart)}this._link(t,_),this._link(a,r[s]),this._link(s,d),o<cd.length&&(cd[o++]=c+(a+1)%3)}else{if(0===o)break;t=cd[--o]}}return s}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function tm(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function rG(e,t,n,r,i,o,s,a){const u=e-s,c=t-a,l=n-s,d=r-a,h=i-s,f=o-a,m=l*l+d*d,y=h*h+f*f;return u*(d*y-m*f)-c*(l*y-m*h)+(u*u+c*c)*(l*f-d*h)<0}function iG(e,t,n,r,i,o){const s=n-e,a=r-t,u=i-e,c=o-t,l=s*s+a*a,d=u*u+c*c,h=.5/(s*c-a*u),f=(c*l-a*d)*h,v=(s*d-u*l)*h;return f*f+v*v}function Fs(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{let o=n+1,s=r;wu(e,n+r>>1,o),t[e[n]]>t[e[r]]&&wu(e,n,r),t[e[o]]>t[e[r]]&&wu(e,o,r),t[e[n]]>t[e[o]]&&wu(e,n,o);const a=e[o],u=t[a];for(;;){do{o++}while(t[e[o]]<u);do{s--}while(t[e[s]]>u);if(s<o)break;wu(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(Fs(e,t,o,r),Fs(e,t,n,s-1)):(Fs(e,t,n,s-1),Fs(e,t,o,r))}}function wu(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function sG(e){return e[0]}function aG(e){return e[1]}class _o{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){const i=(t=+t)+(r=+r),o=n=+n;if(r<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-o)>1e-6)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class nm{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class uG{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n)&&(o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let b,S,m=0,y=0,_=r.length;m<_;m+=3,y+=2){const R=2*r[m],x=2*r[m+1],F=2*r[m+2],B=t[R],U=t[R+1],W=t[F],Z=t[F+1],Q=t[x]-B,C=t[x+1]-U,k=W-B,A=Z-U,P=2*(Q*A-C*k);if(Math.abs(P)<1e-9){if(void 0===o){o=s=0;for(const L of n)o+=t[2*L],s+=t[2*L+1];o/=n.length,s/=n.length}const M=1e9*Math.sign((o-B)*A-(s-U)*k);b=(B+W)/2-M*A,S=(U+Z)/2+M*k}else{const M=1/P,L=Q*Q+C*C,N=k*k+A*A;b=B+(A*L-C*N)*M,S=U+(Q*N-k*L)*M}a[y]=b,a[y+1]=S}let c,d,f,u=n[n.length-1],l=4*u,h=t[2*u],v=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],c=l,d=h,f=v,l=4*u,h=t[2*u],v=t[2*u+1],i[c+2]=i[l]=f-v,i[c+3]=i[l+1]=h-d}render(t){const n=null==t?t=new _o:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let l=0,d=r.length;l<d;++l){const h=r[l];if(h<l)continue;const f=2*Math.floor(l/3),v=2*Math.floor(h/3);this._renderSegment(s[f],s[f+1],s[v],s[v+1],t)}let u,c=o[o.length-1];for(let l=0;l<o.length;++l){u=c,c=o[l];const d=2*Math.floor(i[c]/3),h=s[d],f=s[d+1],v=4*u,m=this._project(h,f,a[v+2],a[v+3]);m&&this._renderSegment(h,f,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new _o:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=null==n?n=new _o:void 0,i=this._clip(t);if(null===i||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new nm;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),u=this._regioncode(r,i);0===a&&0===u?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,u))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return(n=+n)==n&&(r=+r)==r&&this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i)e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+u-2)%u]&&n[(o+3)%s]===i[(a+u-1)%u]){yield r;break e}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(-1===s)return null;const a=[];let u=s;do{const c=Math.floor(u/3);if(a.push(n[2*c],n[2*c+1]),u=u%3==2?u-2:u+1,o[u]!==t)break;u=i[u]}while(u!==s&&-1!==u);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:r}=this,i=4*t;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let o,s,c,d,i=null,a=n[r-2],u=n[r-1],l=this._regioncode(a,u),h=0;for(let f=0;f<r;f+=2)if(o=a,s=u,a=n[f],u=n[f+1],c=l,l=this._regioncode(a,u),0===c&&0===l)d=h,h=0,i?i.push(a,u):i=[a,u];else{let v,m,y,_,b;if(0===c){if(null===(v=this._clipSegment(o,s,a,u,c,l)))continue;[m,y,_,b]=v}else{if(null===(v=this._clipSegment(a,u,o,s,l,c)))continue;[_,b,m,y]=v,d=h,h=this._edgecode(m,y),d&&h&&this._edge(t,d,h,i,i.length),i?i.push(m,y):i=[m,y]}d=h,h=this._edgecode(_,b),d&&h&&this._edge(t,d,h,i,i.length),i?i.push(_,b):i=[_,b]}if(i)d=h,h=this._edgecode(i[0],i[1]),d&&h&&this._edge(t,d,h,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(0===o&&0===s)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let u,c,l=o||s;8&l?(u=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):4&l?(u=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):2&l?(c=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),o?o=this._regioncode(t=u,n=c):s=this._regioncode(r=u,i=c)}}_clipInfinite(t,n,r,i,o,s){let u,a=Array.from(n);if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let d,c=0,l=a.length,h=this._edgecode(a[l-2],a[l-1]);c<l;c+=2)d=h,h=this._edgecode(a[c],a[c+1]),d&&h&&(c=this._edge(t,d,h,a,c),l=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let s,a,u,o=1/0;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(u=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(u=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,u=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,u=n+(o=s)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}}const cG=2*Math.PI,Bs=Math.pow;function lG(e){return e[0]}function dG(e){return e[1]}function hG(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class rm{static from(t,n=lG,r=dG,i){return new rm("length"in t?function pG(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let s=0;s<i;++s){const a=e[s];o[2*s]=t.call(r,a,s,e),o[2*s+1]=n.call(r,a,s,e)}return o}(t,n,r,i):Float64Array.from(function*gG(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(t,n,r,i)))}constructor(t){this._delaunator=new ld(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function fG(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},(h,f)=>f).sort((h,f)=>n[2*h]-n[2*f]||n[2*h+1]-n[2*f+1]);const u=this.collinear[0],c=this.collinear[this.collinear.length-1],l=[n[2*u],n[2*u+1],n[2*c],n[2*c+1]],d=1e-8*Math.hypot(l[3]-l[1],l[2]-l[0]);for(let h=0,f=n.length/2;h<f;++h){const v=hG(n[2*h],n[2*h+1],d);n[2*h]=v[0],n[2*h+1]=v[1]}this._delaunator=new ld(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,c=r.length;u<c;++u){const l=o[u%3==2?u-2:u+1];(-1===r[u]||-1===s[l])&&(s[l]=u)}for(let u=0,c=i.length;u<c;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,2===i.length&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new uG(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const d=a.indexOf(t);return d>0&&(yield a[d-1]),void(d<a.length-1&&(yield a[d+1]))}const u=n[t];if(-1===u)return;let c=u,l=-1;do{if(yield l=s[c],c=c%3==2?c-2:c+1,s[c]!==t)return;if(c=o[c],-1===c){const d=r[(i[t]+1)%r.length];return void(d!==l&&(yield d))}}while(c!==u)}find(t,n,r=0){if((t=+t)!=t||(n=+n)!=n)return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:u,points:c}=this;if(-1===i[t]||!c.length)return(t+1)%(c.length>>1);let l=t,d=Bs(n-c[2*t],2)+Bs(r-c[2*t+1],2);const h=i[t];let f=h;do{let v=u[f];const m=Bs(n-c[2*v],2)+Bs(r-c[2*v+1],2);if(m<d&&(d=m,l=v),f=f%3==2?f-2:f+1,u[f]!==t)break;if(f=a[f],-1===f){if(f=o[(s[t]+1)%o.length],f!==v&&Bs(n-c[2*f],2)+Bs(r-c[2*f+1],2)<d)return f;break}}while(f!==h);return l}render(t){const n=null==t?t=new _o:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const u=i[s];if(u<s)continue;const c=2*o[s],l=2*o[u];t.moveTo(r[c],r[c+1]),t.lineTo(r[l],r[l+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){void 0===n&&(!t||"function"!=typeof t.moveTo)&&(n=t,t=null),n=null==n?2:+n;const r=null==t?t=new _o:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],u=i[o+1];t.moveTo(a+n,u),t.arc(a,u,n,0,cG)}return r&&r.value()}renderHull(t){const n=null==t?t=new _o:void 0,{hull:r,points:i}=this,o=2*r[0],s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new nm;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=null==n?n=new _o:void 0,{points:i,triangles:o}=this,s=2*o[t*=3],a=2*o[t+1],u=2*o[t+2];return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new nm;return this.renderTriangle(t,n),n.value()}}function js(e,t,n){this.k=e,this.x=t,this.y=n}js.prototype={constructor:js,scale:function(e){return 1===e?this:new js(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new js(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new js(1,0,0);let DG=(()=>{class e{constructor(){this.DEFAULT_WIDTH=1e3,this.DEFAULT_THICKNESS=8}generateGraph(n,r){n.clear();let i=[];for(let a=0;a<r;a++){let u=this.DEFAULT_WIDTH*(a%Math.sqrt(r)),c=this.DEFAULT_WIDTH*Math.floor(a/Math.sqrt(r));Math.floor(a/Math.sqrt(r))%2==0&&(u=this.DEFAULT_WIDTH*(Math.sqrt(r)-1)-u),u=this.DEFAULT_WIDTH*(a%(r/this.DEFAULT_THICKNESS)),c=this.DEFAULT_WIDTH*Math.floor(a/(r/this.DEFAULT_THICKNESS)),i.push([u,c]),n.addNode(`${a}`,{x:u,y:c,size:10})}const o=new rm(i.flat());for(let a=0;a<r-1;a++){const u=a+1;u%(r/this.DEFAULT_THICKNESS)!=0&&(n.addEdge(`${a}`,`${u}`,{color:"lightgray",size:5}),n.updateNodeAttribute(`${a}`,"neighbors",l=>{let d=l??[];return d.push(u),d}),n.updateNodeAttribute(`${u}`,"neighbors",l=>{let d=l??[];return d.push(a),d}));const c=r/this.DEFAULT_THICKNESS+a;c<r&&(n.addEdge(`${a}`,`${c}`,{color:"lightgray",size:5}),n.updateNodeAttribute(`${a}`,"neighbors",l=>{let d=l??[];return d.push(c),d}),n.updateNodeAttribute(`${c}`,"neighbors",l=>{let d=l??[];return d.push(a),d}))}return{graph:n,adjacencies:o}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=it({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),CG=(()=>{class e{constructor(n,r,i){this._algorithmService=n,this._animationService=r,this._graphService=i,this.DEFAULT_NUMBER_OF_NODES=256,this.numberOfNodes=this.DEFAULT_NUMBER_OF_NODES,this.radius=1,this.animations=[]}ngOnInit(){this.graph=new(dF()),this.topLevel=this._graphService.generateGraph(this.graph,this.numberOfNodes),this._algorithmService.bfs(this.graph),this.animations=this._algorithmService.buildClusters(this.graph,this.radius),this._animationService.state.subscribe(r=>this.state=r),this._animationService.update(this.graph,this.animations),this._animationService.animate(),new j2(this.graph,document.getElementById("graph"),{defaultNodeType:"border",nodeProgramClasses:{border:qD({borders:[{size:{attribute:"borderSize",defaultValue:.2},color:{attribute:"borderColor"}},{size:{fill:!0},color:{attribute:"color"}}]})}})}generate(n){this.graph.clear(),this.topLevel=this._graphService.generateGraph(this.graph,this.numberOfNodes),this._algorithmService.buildClusters(this.graph,n)}goTo(n){this.radius=n,this._animationService.goTo(n)}play(){this._animationService.animate()}static{this.\u0275fac=function(r){return new(r||e)(Be(iB),Be(uB),Be(DG))}}static{this.\u0275cmp=Ud({type:e,selectors:[["app-graph"]],decls:8,vars:2,consts:[[2,"width","100%","display","flex","justify-content","center"],["id","graph",1,"graph"],["id","range","type","range","min","0","step","1","value","0","oninput","rangeValue.innerText = 'Go to ' + value",1,"form-range",2,"width","100%",3,"max","input"],["range",""],[1,"btn","btn-primary",3,"click"]],template:function(r,i){if(1&r){const o=function l0(){return J()}();oi(0,"div",0)(1,"h3"),ja(2),si()(),Zc(3,"div",1),oi(4,"input",2,3),Kc("input",function(){!function uv(e){return Me.lFrame.contextLView=e,e[Mt]}(o);const a=function s0(e){return function Oo(e,t){return e[t]}(function jS(){return Me.lFrame.contextLView}(),Ge+e)}(5);return function cv(e){return Me.lFrame.contextLView=null,e}(i.goTo(+a.value))}),si(),oi(6,"button",4),Kc("click",function(){return i.play()}),ja(7,"Play"),si()}2&r&&(hh(2),Uh(i.state),hh(2),Nh("max",i.animations.length-1))},styles:[".graph[_ngcontent-%COMP%]{width:100%;aspect-ratio:1.7777777778}"]})}}return e})(),IG=(()=>{class e{constructor(n,r){this.renderer2=n,this._document=r,this.title="Energy-Efficient-Simulation"}ngOnInit(){const n=this.renderer2.createElement("script");n.type="text/javascript",n.src="../assets/prism.js",n.text="",this.renderer2.appendChild(this._document.body,n)}static{this.\u0275fac=function(r){return new(r||e)(Be(ih),Be(Mi))}}static{this.\u0275cmp=Ud({type:e,selectors:[["app-root"]],decls:14,vars:0,consts:[[1,"container"],[1,"card",2,"border-color","#a71c5f"],[1,"card-header",2,"border-color","#d54f67"],[1,"row","align-items-center"],[1,"card-body"],[1,"card"],[1,"row"]],template:function(r,i){1&r&&(oi(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),ja(5,"Generic Energy-Efficient Simulation of Radio Network Algorithms"),si()()(),oi(6,"div",4)(7,"p"),ja(8,"Dominick Banasik"),si()()()(),oi(9,"div",0)(10,"div",5)(11,"div",4)(12,"div",6),Zc(13,"app-graph"),si()()()())},dependencies:[CG]})}}return e})(),SG=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=na({type:e,bootstrap:[IG]})}static{this.\u0275inj=So({imports:[rF]})}}return e})();tF().bootstrapModule(SG).catch(e=>console.error(e))},356:br=>{"use strict";var nt,Zt="object"==typeof Reflect?Reflect:null,ct=Zt&&"function"==typeof Zt.apply?Zt.apply:function(se,ge,De){return Function.prototype.apply.call(se,ge,De)};nt=Zt&&"function"==typeof Zt.ownKeys?Zt.ownKeys:Object.getOwnPropertySymbols?function(se){return Object.getOwnPropertyNames(se).concat(Object.getOwnPropertySymbols(se))}:function(se){return Object.getOwnPropertyNames(se)};var vi=Number.isNaN||function(se){return se!=se};function Ve(){Ve.init.call(this)}br.exports=Ve,br.exports.once=function zn(ee,se){return new Promise(function(ge,De){function Te(je){ee.removeListener(se,ze),De(je)}function ze(){"function"==typeof ee.removeListener&&ee.removeListener("error",Te),ge([].slice.call(arguments))}Dr(ee,se,ze,{once:!0}),"error"!==se&&function Wn(ee,se,ge){"function"==typeof ee.on&&Dr(ee,"error",se,ge)}(ee,Te,{once:!0})})},Ve.EventEmitter=Ve,Ve.prototype._events=void 0,Ve.prototype._eventsCount=0,Ve.prototype._maxListeners=void 0;var Vt=10;function Xe(ee){if("function"!=typeof ee)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ee)}function wt(ee){return void 0===ee._maxListeners?Ve.defaultMaxListeners:ee._maxListeners}function jt(ee,se,ge,De){var Te,ze,je;if(Xe(ge),void 0===(ze=ee._events)?(ze=ee._events=Object.create(null),ee._eventsCount=0):(void 0!==ze.newListener&&(ee.emit("newListener",se,ge.listener?ge.listener:ge),ze=ee._events),je=ze[se]),void 0===je)je=ze[se]=ge,++ee._eventsCount;else if("function"==typeof je?je=ze[se]=De?[ge,je]:[je,ge]:De?je.unshift(ge):je.push(ge),(Te=wt(ee))>0&&je.length>Te&&!je.warned){je.warned=!0;var Kt=new Error("Possible EventEmitter memory leak detected. "+je.length+" "+String(se)+" listeners added. Use emitter.setMaxListeners() to increase limit");Kt.name="MaxListenersExceededWarning",Kt.emitter=ee,Kt.type=se,Kt.count=je.length,function or(ee){console&&console.warn&&console.warn(ee)}(Kt)}return ee}function dt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Er(ee,se,ge){var De={fired:!1,wrapFn:void 0,target:ee,type:se,listener:ge},Te=dt.bind(De);return Te.listener=ge,De.wrapFn=Te,Te}function Ht(ee,se,ge){var De=ee._events;if(void 0===De)return[];var Te=De[se];return void 0===Te?[]:"function"==typeof Te?ge?[Te.listener||Te]:[Te]:ge?function Hi(ee){for(var se=new Array(ee.length),ge=0;ge<se.length;++ge)se[ge]=ee[ge].listener||ee[ge];return se}(Te):ji(Te,Te.length)}function $t(ee){var se=this._events;if(void 0!==se){var ge=se[ee];if("function"==typeof ge)return 1;if(void 0!==ge)return ge.length}return 0}function ji(ee,se){for(var ge=new Array(se),De=0;De<se;++De)ge[De]=ee[De];return ge}function Dr(ee,se,ge,De){if("function"==typeof ee.on)De.once?ee.once(se,ge):ee.on(se,ge);else{if("function"!=typeof ee.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ee);ee.addEventListener(se,function Te(ze){De.once&&ee.removeEventListener(se,Te),ge(ze)})}}Object.defineProperty(Ve,"defaultMaxListeners",{enumerable:!0,get:function(){return Vt},set:function(ee){if("number"!=typeof ee||ee<0||vi(ee))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ee+".");Vt=ee}}),Ve.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Ve.prototype.setMaxListeners=function(se){if("number"!=typeof se||se<0||vi(se))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+se+".");return this._maxListeners=se,this},Ve.prototype.getMaxListeners=function(){return wt(this)},Ve.prototype.emit=function(se){for(var ge=[],De=1;De<arguments.length;De++)ge.push(arguments[De]);var Te="error"===se,ze=this._events;if(void 0!==ze)Te=Te&&void 0===ze.error;else if(!Te)return!1;if(Te){var je;if(ge.length>0&&(je=ge[0]),je instanceof Error)throw je;var Kt=new Error("Unhandled error."+(je?" ("+je.message+")":""));throw Kt.context=je,Kt}var qn=ze[se];if(void 0===qn)return!1;if("function"==typeof qn)ct(qn,this,ge);else{var Ui=qn.length,yi=ji(qn,Ui);for(De=0;De<Ui;++De)ct(yi[De],this,ge)}return!0},Ve.prototype.on=Ve.prototype.addListener=function(se,ge){return jt(this,se,ge,!1)},Ve.prototype.prependListener=function(se,ge){return jt(this,se,ge,!0)},Ve.prototype.once=function(se,ge){return Xe(ge),this.on(se,Er(this,se,ge)),this},Ve.prototype.prependOnceListener=function(se,ge){return Xe(ge),this.prependListener(se,Er(this,se,ge)),this},Ve.prototype.off=Ve.prototype.removeListener=function(se,ge){var De,Te,ze,je,Kt;if(Xe(ge),void 0===(Te=this._events))return this;if(void 0===(De=Te[se]))return this;if(De===ge||De.listener===ge)0==--this._eventsCount?this._events=Object.create(null):(delete Te[se],Te.removeListener&&this.emit("removeListener",se,De.listener||ge));else if("function"!=typeof De){for(ze=-1,je=De.length-1;je>=0;je--)if(De[je]===ge||De[je].listener===ge){Kt=De[je].listener,ze=je;break}if(ze<0)return this;0===ze?De.shift():function wo(ee,se){for(;se+1<ee.length;se++)ee[se]=ee[se+1];ee.pop()}(De,ze),1===De.length&&(Te[se]=De[0]),void 0!==Te.removeListener&&this.emit("removeListener",se,Kt||ge)}return this},Ve.prototype.removeAllListeners=function(se){var ge,De,Te;if(void 0===(De=this._events))return this;if(void 0===De.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==De[se]&&(0==--this._eventsCount?this._events=Object.create(null):delete De[se]),this;if(0===arguments.length){var je,ze=Object.keys(De);for(Te=0;Te<ze.length;++Te)"removeListener"!==(je=ze[Te])&&this.removeAllListeners(je);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ge=De[se]))this.removeListener(se,ge);else if(void 0!==ge)for(Te=ge.length-1;Te>=0;Te--)this.removeListener(se,ge[Te]);return this},Ve.prototype.listeners=function(se){return Ht(this,se,!0)},Ve.prototype.rawListeners=function(se){return Ht(this,se,!1)},Ve.listenerCount=function(ee,se){return"function"==typeof ee.listenerCount?ee.listenerCount(se):$t.call(ee,se)},Ve.prototype.listenerCount=$t,Ve.prototype.eventNames=function(){return this._eventsCount>0?nt(this._events):[]}},791:br=>{br.exports=function(ct){return null!==ct&&"object"==typeof ct&&"function"==typeof ct.addUndirectedEdgeWithKey&&"function"==typeof ct.dropNode&&"boolean"==typeof ct.multi}},475:function(br){br.exports=function(){"use strict";function Zt(w){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(I){return typeof I}:function(I){return I&&"function"==typeof Symbol&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(w)}function ct(w,I){w.prototype=Object.create(I.prototype),w.prototype.constructor=w,or(w,I)}function nt(w){return(nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(I){return I.__proto__||Object.getPrototypeOf(I)})(w)}function or(w,I){return(or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,p){return E.__proto__=p,E})(w,I)}function Ve(w,I,E){return(Ve=function vi(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(p,g,D){var T=[null];T.push.apply(T,g);var O=new(Function.bind.apply(p,T));return D&&or(O,D.prototype),O}).apply(null,arguments)}function Vt(w){var I="function"==typeof Map?new Map:void 0;return Vt=function(E){if(null===E||-1===Function.toString.call(E).indexOf("[native code]"))return E;if("function"!=typeof E)throw new TypeError("Super expression must either be null or a function");if(void 0!==I){if(I.has(E))return I.get(E);I.set(E,g)}function g(){return Ve(E,arguments,nt(this).constructor)}return g.prototype=Object.create(E.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),or(g,E)},Vt(w)}function Xe(w){if(void 0===w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}var wt=function(){for(var w=arguments[0],I=1,E=arguments.length;I<E;I++)if(arguments[I])for(var p in arguments[I])w[p]=arguments[I][p];return w};function jt(w,I,E,p){var g=w._nodes.get(I),D=null;return g?D="mixed"===p?g.out&&g.out[E]||g.undirected&&g.undirected[E]:"directed"===p?g.out&&g.out[E]:g.undirected&&g.undirected[E]:D}function dt(w){return"object"===Zt(w)&&null!==w}function Er(w){var I;for(I in w)return!1;return!0}function Ht(w,I,E){Object.defineProperty(w,I,{enumerable:!1,configurable:!1,writable:!0,value:E})}function $t(w,I,E){var p={enumerable:!0,configurable:!0};"function"==typeof E?p.get=E:(p.value=E,p.writable=!1),Object.defineProperty(w,I,p)}function ji(w){return!(!dt(w)||w.attributes&&!Array.isArray(w.attributes))}"function"==typeof Object.assign&&(wt=Object.assign);var wo,Hi={exports:{}},zn="object"==typeof Reflect?Reflect:null,Wn=zn&&"function"==typeof zn.apply?zn.apply:function(w,I,E){return Function.prototype.apply.call(w,I,E)};wo=zn&&"function"==typeof zn.ownKeys?zn.ownKeys:Object.getOwnPropertySymbols?function(w){return Object.getOwnPropertyNames(w).concat(Object.getOwnPropertySymbols(w))}:function(w){return Object.getOwnPropertyNames(w)};var Dr=Number.isNaN||function(w){return w!=w};function ee(){ee.init.call(this)}Hi.exports=ee,Hi.exports.once=function(w,I){return new Promise(function(E,p){function g(T){w.removeListener(I,D),p(T)}function D(){"function"==typeof w.removeListener&&w.removeListener("error",g),E([].slice.call(arguments))}var T;yi(w,I,D,{once:!0}),"error"!==I&&("function"==typeof(T=w).on&&yi(T,"error",g,{once:!0}))})},ee.EventEmitter=ee,ee.prototype._events=void 0,ee.prototype._eventsCount=0,ee.prototype._maxListeners=void 0;var se=10;function ge(w){if("function"!=typeof w)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof w)}function De(w){return void 0===w._maxListeners?ee.defaultMaxListeners:w._maxListeners}function Te(w,I,E,p){var g,D,T;if(ge(E),void 0===(D=w._events)?(D=w._events=Object.create(null),w._eventsCount=0):(void 0!==D.newListener&&(w.emit("newListener",I,E.listener?E.listener:E),D=w._events),T=D[I]),void 0===T)T=D[I]=E,++w._eventsCount;else if("function"==typeof T?T=D[I]=p?[E,T]:[T,E]:p?T.unshift(E):T.push(E),(g=De(w))>0&&T.length>g&&!T.warned){T.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+T.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=w,V.type=I,V.count=T.length,console&&console.warn&&console.warn(V)}return w}function ze(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function je(w,I,E){var p={fired:!1,wrapFn:void 0,target:w,type:I,listener:E},g=ze.bind(p);return g.listener=E,p.wrapFn=g,g}function Kt(w,I,E){var p=w._events;if(void 0===p)return[];var g=p[I];return void 0===g?[]:"function"==typeof g?E?[g.listener||g]:[g]:E?function(D){for(var T=new Array(D.length),O=0;O<T.length;++O)T[O]=D[O].listener||D[O];return T}(g):Ui(g,g.length)}function qn(w){var I=this._events;if(void 0!==I){var E=I[w];if("function"==typeof E)return 1;if(void 0!==E)return E.length}return 0}function Ui(w,I){for(var E=new Array(I),p=0;p<I;++p)E[p]=w[p];return E}function yi(w,I,E,p){if("function"==typeof w.on)p.once?w.once(I,E):w.on(I,E);else{if("function"!=typeof w.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof w);w.addEventListener(I,function g(D){p.once&&w.removeEventListener(I,g),E(D)})}}function bn(w){if("function"!=typeof w)throw new Error("obliterator/iterator: expecting a function!");this.next=w}Object.defineProperty(ee,"defaultMaxListeners",{enumerable:!0,get:function(){return se},set:function(w){if("number"!=typeof w||w<0||Dr(w))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+w+".");se=w}}),ee.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ee.prototype.setMaxListeners=function(w){if("number"!=typeof w||w<0||Dr(w))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+w+".");return this._maxListeners=w,this},ee.prototype.getMaxListeners=function(){return De(this)},ee.prototype.emit=function(w){for(var I=[],E=1;E<arguments.length;E++)I.push(arguments[E]);var p="error"===w,g=this._events;if(void 0!==g)p=p&&void 0===g.error;else if(!p)return!1;if(p){var D;if(I.length>0&&(D=I[0]),D instanceof Error)throw D;var T=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw T.context=D,T}var O=g[w];if(void 0===O)return!1;if("function"==typeof O)Wn(O,this,I);else{var V=O.length,ne=Ui(O,V);for(E=0;E<V;++E)Wn(ne[E],this,I)}return!0},ee.prototype.addListener=function(w,I){return Te(this,w,I,!1)},ee.prototype.on=ee.prototype.addListener,ee.prototype.prependListener=function(w,I){return Te(this,w,I,!0)},ee.prototype.once=function(w,I){return ge(I),this.on(w,je(this,w,I)),this},ee.prototype.prependOnceListener=function(w,I){return ge(I),this.prependListener(w,je(this,w,I)),this},ee.prototype.removeListener=function(w,I){var E,p,g,D,T;if(ge(I),void 0===(p=this._events))return this;if(void 0===(E=p[w]))return this;if(E===I||E.listener===I)0==--this._eventsCount?this._events=Object.create(null):(delete p[w],p.removeListener&&this.emit("removeListener",w,E.listener||I));else if("function"!=typeof E){for(g=-1,D=E.length-1;D>=0;D--)if(E[D]===I||E[D].listener===I){T=E[D].listener,g=D;break}if(g<0)return this;0===g?E.shift():function(O,V){for(;V+1<O.length;V++)O[V]=O[V+1];O.pop()}(E,g),1===E.length&&(p[w]=E[0]),void 0!==p.removeListener&&this.emit("removeListener",w,T||I)}return this},ee.prototype.off=ee.prototype.removeListener,ee.prototype.removeAllListeners=function(w){var I,E,p;if(void 0===(E=this._events))return this;if(void 0===E.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==E[w]&&(0==--this._eventsCount?this._events=Object.create(null):delete E[w]),this;if(0===arguments.length){var g,D=Object.keys(E);for(p=0;p<D.length;++p)"removeListener"!==(g=D[p])&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(I=E[w]))this.removeListener(w,I);else if(void 0!==I)for(p=I.length-1;p>=0;p--)this.removeListener(w,I[p]);return this},ee.prototype.listeners=function(w){return Kt(this,w,!0)},ee.prototype.rawListeners=function(w){return Kt(this,w,!1)},ee.listenerCount=function(w,I){return"function"==typeof w.listenerCount?w.listenerCount(I):qn.call(w,I)},ee.prototype.listenerCount=qn,ee.prototype.eventNames=function(){return this._eventsCount>0?wo(this._events):[]},typeof Symbol<"u"&&(bn.prototype[Symbol.iterator]=function(){return this}),bn.of=function(){var w=arguments,I=w.length,E=0;return new bn(function(){return E>=I?{done:!0}:{done:!1,value:w[E++]}})},bn.empty=function(){return new bn(function(){return{done:!0}})},bn.fromSequence=function(w){var I=0,E=w.length;return new bn(function(){return I>=E?{done:!0}:{done:!1,value:w[I++]}})},bn.is=function(w){return w instanceof bn||"object"==typeof w&&null!==w&&"function"==typeof w.next};var sn=bn,bo={};bo.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",bo.SYMBOL_SUPPORT=typeof Symbol<"u";var Xt=sn,fd=bo.ARRAY_BUFFER_SUPPORT,hd=bo.SYMBOL_SUPPORT,bu=function(w){var E,I="string"==typeof(E=w)||Array.isArray(E)||fd&&ArrayBuffer.isView(E)?Xt.fromSequence(E):"object"!=typeof E||null===E?null:hd&&"function"==typeof E[Symbol.iterator]?E[Symbol.iterator]():"function"==typeof E.next?E:null;if(!I)throw new Error("obliterator: target is not iterable nor a valid iterator.");return I},zr=bu,Us=function(w,I){for(var E,p=arguments.length>1?I:1/0,g=p!==1/0?new Array(p):[],D=0,T=zr(w);;){if(D===p)return g;if((E=T.next()).done)return D!==I&&(g.length=D),g;g[D++]=E.value}},Gs=function(w){function I(E){var p;return(p=w.call(this)||this).name="GraphError",p.message=E,p}return ct(I,w),I}(Vt(Error)),pe=function(w){function I(E){var p;return(p=w.call(this,E)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Xe(p),I.prototype.constructor),p}return ct(I,w),I}(Gs),ae=function(w){function I(E){var p;return(p=w.call(this,E)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Xe(p),I.prototype.constructor),p}return ct(I,w),I}(Gs),Se=function(w){function I(E){var p;return(p=w.call(this,E)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(Xe(p),I.prototype.constructor),p}return ct(I,w),I}(Gs);function Eu(w,I){this.key=w,this.attributes=I,this.clear()}function Eo(w,I){this.key=w,this.attributes=I,this.clear()}function Du(w,I){this.key=w,this.attributes=I,this.clear()}function Cr(w,I,E,p,g){this.key=I,this.attributes=g,this.undirected=w,this.source=E,this.target=p}function sr(w,I,E,p,g,D,T){var O,V,ne,te;if(p=""+p,0===E){if(!(O=w._nodes.get(p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" node in the graph.'));ne=g,te=D}else if(3===E){if(!(V=w._edges.get(g=""+g)))throw new ae("Graph.".concat(I,': could not find the "').concat(g,'" edge in the graph.'));var X=V.source.key,de=V.target.key;if(p===X)O=V.target;else{if(p!==de)throw new ae("Graph.".concat(I,': the "').concat(p,'" node is not attached to the "').concat(g,'" edge (').concat(X,", ").concat(de,")."));O=V.source}ne=D,te=T}else{if(!(V=w._edges.get(p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'));O=1===E?V.source:V.target,ne=g,te=D}return[O,ne,te]}Eu.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},Eo.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},Du.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Cr.prototype.attach=function(){var w="out",I="in";this.undirected&&(w=I="undirected");var E=this.source.key,p=this.target.key;this.source[w][p]=this,this.undirected&&E===p||(this.target[I][E]=this)},Cr.prototype.attachMulti=function(){var w="out",I="in",E=this.source.key,p=this.target.key;this.undirected&&(w=I="undirected");var g=this.source[w],D=g[p];if(void 0===D)return g[p]=this,void(this.undirected&&E===p||(this.target[I][E]=this));D.previous=this,this.next=D,g[p]=this,this.target[I][E]=this},Cr.prototype.detach=function(){var w=this.source.key,E="out",p="in";this.undirected&&(E=p="undirected"),delete this.source[E][this.target.key],delete this.target[p][w]},Cr.prototype.detachMulti=function(){var w=this.source.key,I=this.target.key,E="out",p="in";this.undirected&&(E=p="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[E][I],delete this.target[p][w]):(this.next.previous=void 0,this.source[E][I]=this.next,this.target[p][w]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var pd=[{name:function(w){return"get".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T=sr(this,I,E,p,g,D);return T[0].attributes[T[1]]}}},{name:function(w){return"get".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g){return sr(this,I,E,p,g)[0].attributes}}},{name:function(w){return"has".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T=sr(this,I,E,p,g,D);return T[0].attributes.hasOwnProperty(T[1])}}},{name:function(w){return"set".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D,T){var O=sr(this,I,E,p,g,D,T),V=O[0],ne=O[1];return V.attributes[ne]=O[2],this.emit("nodeAttributesUpdated",{key:V.key,type:"set",attributes:V.attributes,name:ne}),this}}},{name:function(w){return"update".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D,T){var O=sr(this,I,E,p,g,D,T),V=O[0],ne=O[1],te=O[2];if("function"!=typeof te)throw new pe("Graph.".concat(I,": updater should be a function."));var X=V.attributes,de=te(X[ne]);return X[ne]=de,this.emit("nodeAttributesUpdated",{key:V.key,type:"set",attributes:V.attributes,name:ne}),this}}},{name:function(w){return"remove".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T=sr(this,I,E,p,g,D),O=T[0],V=T[1];return delete O.attributes[V],this.emit("nodeAttributesUpdated",{key:O.key,type:"remove",attributes:O.attributes,name:V}),this}}},{name:function(w){return"replace".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T=sr(this,I,E,p,g,D),O=T[0],V=T[1];if(!dt(V))throw new pe("Graph.".concat(I,": provided attributes are not a plain object."));return O.attributes=V,this.emit("nodeAttributesUpdated",{key:O.key,type:"replace",attributes:O.attributes}),this}}},{name:function(w){return"merge".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T=sr(this,I,E,p,g,D),O=T[0],V=T[1];if(!dt(V))throw new pe("Graph.".concat(I,": provided attributes are not a plain object."));return wt(O.attributes,V),this.emit("nodeAttributesUpdated",{key:O.key,type:"merge",attributes:O.attributes,data:V}),this}}},{name:function(w){return"update".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T=sr(this,I,E,p,g,D),O=T[0],V=T[1];if("function"!=typeof V)throw new pe("Graph.".concat(I,": provided updater is not a function."));return O.attributes=V(O.attributes),this.emit("nodeAttributesUpdated",{key:O.key,type:"update",attributes:O.attributes}),this}}}],gd=[{name:function(w){return"get".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g){var D;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+p,O=""+g;if(g=arguments[2],!(D=jt(this,T,O,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(T,'" - "').concat(O,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(D=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}return D.attributes[g]}}},{name:function(w){return"get".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p){var g;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var D=""+p,T=""+arguments[1];if(!(g=jt(this,D,T,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(D,'" - "').concat(T,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(g=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}return g.attributes}}},{name:function(w){return"has".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g){var D;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+p,O=""+g;if(g=arguments[2],!(D=jt(this,T,O,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(T,'" - "').concat(O,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(D=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}return D.attributes.hasOwnProperty(g)}}},{name:function(w){return"set".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var O=""+p,V=""+g;if(g=arguments[2],D=arguments[3],!(T=jt(this,O,V,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(O,'" - "').concat(V,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}return T.attributes[g]=D,this.emit("edgeAttributesUpdated",{key:T.key,type:"set",attributes:T.attributes,name:g}),this}}},{name:function(w){return"update".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g,D){var T;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var O=""+p,V=""+g;if(g=arguments[2],D=arguments[3],!(T=jt(this,O,V,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(O,'" - "').concat(V,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(T=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}if("function"!=typeof D)throw new pe("Graph.".concat(I,": updater should be a function."));return T.attributes[g]=D(T.attributes[g]),this.emit("edgeAttributesUpdated",{key:T.key,type:"set",attributes:T.attributes,name:g}),this}}},{name:function(w){return"remove".concat(w,"Attribute")},attacher:function(w,I,E){w.prototype[I]=function(p,g){var D;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+p,O=""+g;if(g=arguments[2],!(D=jt(this,T,O,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(T,'" - "').concat(O,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(D=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}return delete D.attributes[g],this.emit("edgeAttributesUpdated",{key:D.key,type:"remove",attributes:D.attributes,name:g}),this}}},{name:function(w){return"replace".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g){var D;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+p,O=""+g;if(g=arguments[2],!(D=jt(this,T,O,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(T,'" - "').concat(O,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(D=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}if(!dt(g))throw new pe("Graph.".concat(I,": provided attributes are not a plain object."));return D.attributes=g,this.emit("edgeAttributesUpdated",{key:D.key,type:"replace",attributes:D.attributes}),this}}},{name:function(w){return"merge".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g){var D;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+p,O=""+g;if(g=arguments[2],!(D=jt(this,T,O,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(T,'" - "').concat(O,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(D=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}if(!dt(g))throw new pe("Graph.".concat(I,": provided attributes are not a plain object."));return wt(D.attributes,g),this.emit("edgeAttributesUpdated",{key:D.key,type:"merge",attributes:D.attributes,data:g}),this}}},{name:function(w){return"update".concat(w,"Attributes")},attacher:function(w,I,E){w.prototype[I]=function(p,g){var D;if("mixed"!==this.type&&"mixed"!==E&&E!==this.type)throw new Se("Graph.".concat(I,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new Se("Graph.".concat(I,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var T=""+p,O=""+g;if(g=arguments[2],!(D=jt(this,T,O,E)))throw new ae("Graph.".concat(I,': could not find an edge for the given path ("').concat(T,'" - "').concat(O,'").'))}else{if("mixed"!==E)throw new Se("Graph.".concat(I,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(D=this._edges.get(p=""+p)))throw new ae("Graph.".concat(I,': could not find the "').concat(p,'" edge in the graph.'))}if("function"!=typeof g)throw new pe("Graph.".concat(I,": provided updater is not a function."));return D.attributes=g(D.attributes),this.emit("edgeAttributesUpdated",{key:D.key,type:"update",attributes:D.attributes}),this}}}],im=sn,om=bu,Ir=function(){var w=arguments,I=null,E=-1;return new im(function(){for(var p=null;;){if(null===I){if(++E>=w.length)return{done:!0};I=om(w[E])}if(!0!==(p=I.next()).done)break;I=null}return p})},sm=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function md(w,I,E,p){var g=!1;for(var D in I)if(D!==p){var T=I[D];if(g=E(T.key,T.attributes,T.source.key,T.target.key,T.source.attributes,T.target.attributes,T.undirected),w&&g)return T.key}}function Cu(w,I,E,p){var g,D,T,O=!1;for(var V in I)if(V!==p){g=I[V];do{if(O=E(g.key,g.attributes,(D=g.source).key,(T=g.target).key,D.attributes,T.attributes,g.undirected),w&&O)return g.key;g=g.next}while(void 0!==g)}}function Vs(w,I){var E,p=Object.keys(w),g=p.length,D=0;return new sn(function(){do{if(E)E=E.next;else{if(D>=g)return{done:!0};var T=p[D++];if(T===I){E=void 0;continue}E=w[T]}}while(!E);return{done:!1,value:{edge:E.key,attributes:E.attributes,source:E.source.key,target:E.target.key,sourceAttributes:E.source.attributes,targetAttributes:E.target.attributes,undirected:E.undirected}}})}function $s(w,I,E,p){var g=I[E];if(g){var D=g.source,T=g.target;return p(g.key,g.attributes,D.key,T.key,D.attributes,T.attributes,g.undirected)&&w?g.key:void 0}}function vd(w,I,E,p){var g=I[E];if(g){var D=!1;do{if(D=p(g.key,g.attributes,g.source.key,g.target.key,g.source.attributes,g.target.attributes,g.undirected),w&&D)return g.key;g=g.next}while(void 0!==g)}}function Gi(w,I){var E=w[I];return void 0!==E.next?new sn(function(){if(!E)return{done:!0};var p={edge:E.key,attributes:E.attributes,source:E.source.key,target:E.target.key,sourceAttributes:E.source.attributes,targetAttributes:E.target.attributes,undirected:E.undirected};return E=E.next,{done:!1,value:p}}):sn.of({edge:E.key,attributes:E.attributes,source:E.source.key,target:E.target.key,sourceAttributes:E.source.attributes,targetAttributes:E.target.attributes,undirected:E.undirected})}function Su(w,I,E,p){if(0!==I.size)for(var g,D,T="mixed"!==E&&E!==I.type,O="undirected"===E,V=!1,ne=I._edges.values();!0!==(g=ne.next()).done;)if(D=g.value,!T||D.undirected===O){var X=D.key,fe=D.source,Ie=D.target;if(V=p(X,D.attributes,fe.key,Ie.key,fe.attributes,Ie.attributes,D.undirected),w&&V)return X}}function zs(w,I,E,p,g,D){var T,O=I?Cu:md;if("undirected"!==E&&("out"!==p&&(T=O(w,g.in,D),w&&T)||"in"!==p&&(T=O(w,g.out,D,p?void 0:g.key),w&&T))||"directed"!==E&&(T=O(w,g.undirected,D),w&&T))return T}function Ws(w,I,E,p,g,D,T){var O,V=E?vd:$s;if("undirected"!==I&&(void 0!==g.in&&"out"!==p&&(O=V(w,g.in,D,T),w&&O)||void 0!==g.out&&"in"!==p&&(p||g.key!==D)&&(O=V(w,g.out,D,T),w&&O))||"directed"!==I&&void 0!==g.undirected&&(O=V(w,g.undirected,D,T),w&&O))return O}var wd=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Do(){this.A=null,this.B=null}function Vi(w,I,E,p,g){for(var D in p){var T=p[D],O=T.source,ne=O===E?T.target:O;if(!I||!I.has(ne.key)){var te=g(ne.key,ne.attributes);if(w&&te)return ne.key}}}function qs(w,I,E,p,g){if("mixed"!==I){if("undirected"===I)return Vi(w,null,p,p.undirected,g);if("string"==typeof E)return Vi(w,null,p,p[E],g)}var D,T=new Do;if("undirected"!==I){if("out"!==E){if(D=Vi(w,null,p,p.in,g),w&&D)return D;T.wrap(p.in)}if("in"!==E){if(D=Vi(w,T,p,p.out,g),w&&D)return D;T.wrap(p.out)}}if("directed"!==I&&(D=Vi(w,T,p,p.undirected,g),w&&D))return D}function $i(w,I,E){var p=Object.keys(E),g=p.length,D=0;return new sn(function(){var T=null;do{if(D>=g)return w&&w.wrap(E),{done:!0};var O=E[p[D++]],V=O.source;T=V===I?O.target:V,w&&w.has(T.key)&&(T=null)}while(null===T);return{done:!1,value:{neighbor:T.key,attributes:T.attributes}}})}function Co(w,I,E,p,g){for(var D,T,O,V,ne,te,X,de=p._nodes.values(),fe=p.type;!0!==(D=de.next()).done;){var Ie=!1;if(T=D.value,"undirected"!==fe)for(O in V=T.out){ne=V[O];do{if(Ie=!0,X=g(T.key,(te=ne.target).key,T.attributes,te.attributes,ne.key,ne.attributes,ne.undirected),w&&X)return ne;ne=ne.next}while(ne)}if("directed"!==fe)for(O in V=T.undirected)if(!(I&&T.key>O)){ne=V[O];do{if((te=ne.target).key!==O&&(te=ne.source),Ie=!0,X=g(T.key,te.key,T.attributes,te.attributes,ne.key,ne.attributes,ne.undirected),w&&X)return ne;ne=ne.next}while(ne)}if(E&&!Ie&&(X=g(T.key,null,T.attributes,null,null,null,null),w&&X))return null}}function Dd(w){if(!dt(w))throw new pe('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in w))throw new pe("Graph.import: serialized node is missing its key.");if("attributes"in w&&(!dt(w.attributes)||null===w.attributes))throw new pe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function am(w){if(!dt(w))throw new pe('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in w))throw new pe("Graph.import: serialized edge is missing its source.");if(!("target"in w))throw new pe("Graph.import: serialized edge is missing its target.");if("attributes"in w&&(!dt(w.attributes)||null===w.attributes))throw new pe("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in w&&"boolean"!=typeof w.undirected)throw new pe("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}Do.prototype.wrap=function(w){null===this.A?this.A=w:null===this.B&&(this.B=w)},Do.prototype.has=function(w){return null!==this.A&&w in this.A||null!==this.B&&w in this.B};var Ys,Mu=(Ys=255&Math.floor(256*Math.random()),function(){return Ys++}),xu=new Set(["directed","undirected","mixed"]),Zs=new Set(["domain","_events","_eventsCount","_maxListeners"]),Nu={allowSelfLoops:!0,multi:!1,type:"mixed"};function Ru(w,I,E){var p=new w.NodeDataClass(I,E);return w._nodes.set(I,p),w.emit("nodeAdded",{key:I,attributes:E}),p}function Ks(w,I,E,p,g,D,T,O){if(!p&&"undirected"===w.type)throw new Se("Graph.".concat(I,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(p&&"directed"===w.type)throw new Se("Graph.".concat(I,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(O&&!dt(O))throw new pe("Graph.".concat(I,': invalid attributes. Expecting an object but got "').concat(O,'"'));if(D=""+D,T=""+T,O=O||{},!w.allowSelfLoops&&D===T)throw new Se("Graph.".concat(I,': source & target are the same ("').concat(D,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var V=w._nodes.get(D),ne=w._nodes.get(T);if(!V)throw new ae("Graph.".concat(I,': source node "').concat(D,'" not found.'));if(!ne)throw new ae("Graph.".concat(I,': target node "').concat(T,'" not found.'));var te={key:null,undirected:p,source:D,target:T,attributes:O};if(E)g=w._edgeKeyGenerator();else if(w._edges.has(g=""+g))throw new Se("Graph.".concat(I,': the "').concat(g,'" edge already exists in the graph.'));if(!w.multi&&(p?void 0!==V.undirected[T]:void 0!==V.out[T]))throw new Se("Graph.".concat(I,': an edge linking "').concat(D,'" to "').concat(T,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var X=new Cr(p,g,V,ne,O);w._edges.set(g,X);var de=D===T;return p?(V.undirectedDegree++,ne.undirectedDegree++,de&&(V.undirectedLoops++,w._undirectedSelfLoopCount++)):(V.outDegree++,ne.inDegree++,de&&(V.directedLoops++,w._directedSelfLoopCount++)),w.multi?X.attachMulti():X.attach(),p?w._undirectedSize++:w._directedSize++,te.key=g,w.emit("edgeAdded",te),g}function ku(w,I,E,p,g,D,T,O,V){if(!p&&"undirected"===w.type)throw new Se("Graph.".concat(I,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(p&&"directed"===w.type)throw new Se("Graph.".concat(I,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(O)if(V){if("function"!=typeof O)throw new pe("Graph.".concat(I,': invalid updater function. Expecting a function but got "').concat(O,'"'))}else if(!dt(O))throw new pe("Graph.".concat(I,': invalid attributes. Expecting an object but got "').concat(O,'"'));var ne;if(D=""+D,T=""+T,V&&(ne=O,O=void 0),!w.allowSelfLoops&&D===T)throw new Se("Graph.".concat(I,': source & target are the same ("').concat(D,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var te,X,de=w._nodes.get(D),fe=w._nodes.get(T);if(!E&&(te=w._edges.get(g))){if(!(te.source.key===D&&te.target.key===T||p&&te.source.key===T&&te.target.key===D))throw new Se("Graph.".concat(I,': inconsistency detected when attempting to merge the "').concat(g,'" edge with "').concat(D,'" source & "').concat(T,'" target vs. ("').concat(te.source.key,'", "').concat(te.target.key,'").'));X=te}if(X||w.multi||!de||(X=p?de.undirected[T]:de.out[T]),X){var Ie=[X.key,!1,!1,!1];return(V?ne:O)?(V?(X.attributes=ne(X.attributes),w.emit("edgeAttributesUpdated",{type:"replace",key:X.key,attributes:X.attributes})):(wt(X.attributes,O),w.emit("edgeAttributesUpdated",{type:"merge",key:X.key,attributes:X.attributes,data:O})),Ie):Ie}O=O||{},V&&ne&&(O=ne(O));var ft={key:null,undirected:p,source:D,target:T,attributes:O};if(E)g=w._edgeKeyGenerator();else if(w._edges.has(g=""+g))throw new Se("Graph.".concat(I,': the "').concat(g,'" edge already exists in the graph.'));var Ot=!1,Rt=!1;de||(de=Ru(w,D,{}),Ot=!0,D===T&&(fe=de,Rt=!0)),fe||(fe=Ru(w,T,{}),Rt=!0),te=new Cr(p,g,de,fe,O),w._edges.set(g,te);var an=D===T;return p?(de.undirectedDegree++,fe.undirectedDegree++,an&&(de.undirectedLoops++,w._undirectedSelfLoopCount++)):(de.outDegree++,fe.inDegree++,an&&(de.directedLoops++,w._directedSelfLoopCount++)),w.multi?te.attachMulti():te.attach(),p?w._undirectedSize++:w._directedSize++,ft.key=g,w.emit("edgeAdded",ft),[g,!0,Ot,Rt]}function Wr(w,I){w._edges.delete(I.key);var E=I.source,p=I.target,g=I.attributes,D=I.undirected,T=E===p;D?(E.undirectedDegree--,p.undirectedDegree--,T&&(E.undirectedLoops--,w._undirectedSelfLoopCount--)):(E.outDegree--,p.inDegree--,T&&(E.directedLoops--,w._directedSelfLoopCount--)),w.multi?I.detachMulti():I.detach(),D?w._undirectedSize--:w._directedSize--,w.emit("edgeDropped",{key:I.key,attributes:g,source:E.key,target:p.key,undirected:D})}var w,lt=function(w){function I(p){var g;if(g=w.call(this)||this,"boolean"!=typeof(p=wt({},Nu,p)).multi)throw new pe("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(p.multi,'".'));if(!xu.has(p.type))throw new pe('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(p.type,'".'));if("boolean"!=typeof p.allowSelfLoops)throw new pe("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(p.allowSelfLoops,'".'));var D="mixed"===p.type?Eu:"directed"===p.type?Eo:Du;Ht(Xe(g),"NodeDataClass",D);var T="geid_"+Mu()+"_",O=0;return Ht(Xe(g),"_attributes",{}),Ht(Xe(g),"_nodes",new Map),Ht(Xe(g),"_edges",new Map),Ht(Xe(g),"_directedSize",0),Ht(Xe(g),"_undirectedSize",0),Ht(Xe(g),"_directedSelfLoopCount",0),Ht(Xe(g),"_undirectedSelfLoopCount",0),Ht(Xe(g),"_edgeKeyGenerator",function(){var V;do{V=T+O++}while(g._edges.has(V));return V}),Ht(Xe(g),"_options",p),Zs.forEach(function(V){return Ht(Xe(g),V,g[V])}),$t(Xe(g),"order",function(){return g._nodes.size}),$t(Xe(g),"size",function(){return g._edges.size}),$t(Xe(g),"directedSize",function(){return g._directedSize}),$t(Xe(g),"undirectedSize",function(){return g._undirectedSize}),$t(Xe(g),"selfLoopCount",function(){return g._directedSelfLoopCount+g._undirectedSelfLoopCount}),$t(Xe(g),"directedSelfLoopCount",function(){return g._directedSelfLoopCount}),$t(Xe(g),"undirectedSelfLoopCount",function(){return g._undirectedSelfLoopCount}),$t(Xe(g),"multi",g._options.multi),$t(Xe(g),"type",g._options.type),$t(Xe(g),"allowSelfLoops",g._options.allowSelfLoops),$t(Xe(g),"implementation",function(){return"graphology"}),g}ct(I,w);var E=I.prototype;return E._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},E.hasNode=function(p){return this._nodes.has(""+p)},E.hasDirectedEdge=function(p,g){if("undirected"===this.type)return!1;if(1===arguments.length){var T=this._edges.get(""+p);return!!T&&!T.undirected}if(2===arguments.length){g=""+g;var O=this._nodes.get(p=""+p);return!!O&&O.out.hasOwnProperty(g)}throw new pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},E.hasUndirectedEdge=function(p,g){if("directed"===this.type)return!1;if(1===arguments.length){var T=this._edges.get(""+p);return!!T&&T.undirected}if(2===arguments.length){g=""+g;var O=this._nodes.get(p=""+p);return!!O&&O.undirected.hasOwnProperty(g)}throw new pe("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},E.hasEdge=function(p,g){if(1===arguments.length)return this._edges.has(""+p);if(2===arguments.length){g=""+g;var T=this._nodes.get(p=""+p);return!!T&&(void 0!==T.out&&T.out.hasOwnProperty(g)||void 0!==T.undirected&&T.undirected.hasOwnProperty(g))}throw new pe("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},E.directedEdge=function(p,g){if("undirected"!==this.type){if(p=""+p,g=""+g,this.multi)throw new Se("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var D=this._nodes.get(p);if(!D)throw new ae('Graph.directedEdge: could not find the "'.concat(p,'" source node in the graph.'));if(!this._nodes.has(g))throw new ae('Graph.directedEdge: could not find the "'.concat(g,'" target node in the graph.'));var T=D.out&&D.out[g]||void 0;return T?T.key:void 0}},E.undirectedEdge=function(p,g){if("directed"!==this.type){if(p=""+p,g=""+g,this.multi)throw new Se("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var D=this._nodes.get(p);if(!D)throw new ae('Graph.undirectedEdge: could not find the "'.concat(p,'" source node in the graph.'));if(!this._nodes.has(g))throw new ae('Graph.undirectedEdge: could not find the "'.concat(g,'" target node in the graph.'));var T=D.undirected&&D.undirected[g]||void 0;return T?T.key:void 0}},E.edge=function(p,g){if(this.multi)throw new Se("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.edge: could not find the "'.concat(p,'" source node in the graph.'));if(!this._nodes.has(g))throw new ae('Graph.edge: could not find the "'.concat(g,'" target node in the graph.'));var T=D.out&&D.out[g]||D.undirected&&D.undirected[g]||void 0;if(T)return T.key},E.areDirectedNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areDirectedNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"undirected"!==this.type&&(g in D.in||g in D.out)},E.areOutNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areOutNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"undirected"!==this.type&&g in D.out},E.areInNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areInNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"undirected"!==this.type&&g in D.in},E.areUndirectedNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areUndirectedNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"directed"!==this.type&&g in D.undirected},E.areNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"undirected"!==this.type&&(g in D.in||g in D.out)||"directed"!==this.type&&g in D.undirected},E.areInboundNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areInboundNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"undirected"!==this.type&&g in D.in||"directed"!==this.type&&g in D.undirected},E.areOutboundNeighbors=function(p,g){g=""+g;var D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.areOutboundNeighbors: could not find the "'.concat(p,'" node in the graph.'));return"undirected"!==this.type&&g in D.out||"directed"!==this.type&&g in D.undirected},E.inDegree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.inDegree: could not find the "'.concat(p,'" node in the graph.'));return"undirected"===this.type?0:g.inDegree},E.outDegree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.outDegree: could not find the "'.concat(p,'" node in the graph.'));return"undirected"===this.type?0:g.outDegree},E.directedDegree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.directedDegree: could not find the "'.concat(p,'" node in the graph.'));return"undirected"===this.type?0:g.inDegree+g.outDegree},E.undirectedDegree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.undirectedDegree: could not find the "'.concat(p,'" node in the graph.'));return"directed"===this.type?0:g.undirectedDegree},E.inboundDegree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.inboundDegree: could not find the "'.concat(p,'" node in the graph.'));var D=0;return"directed"!==this.type&&(D+=g.undirectedDegree),"undirected"!==this.type&&(D+=g.inDegree),D},E.outboundDegree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.outboundDegree: could not find the "'.concat(p,'" node in the graph.'));var D=0;return"directed"!==this.type&&(D+=g.undirectedDegree),"undirected"!==this.type&&(D+=g.outDegree),D},E.degree=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.degree: could not find the "'.concat(p,'" node in the graph.'));var D=0;return"directed"!==this.type&&(D+=g.undirectedDegree),"undirected"!==this.type&&(D+=g.inDegree+g.outDegree),D},E.inDegreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));return"undirected"===this.type?0:g.inDegree-g.directedLoops},E.outDegreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));return"undirected"===this.type?0:g.outDegree-g.directedLoops},E.directedDegreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));return"undirected"===this.type?0:g.inDegree+g.outDegree-2*g.directedLoops},E.undirectedDegreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));return"directed"===this.type?0:g.undirectedDegree-2*g.undirectedLoops},E.inboundDegreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));var D=0,T=0;return"directed"!==this.type&&(D+=g.undirectedDegree,T+=2*g.undirectedLoops),"undirected"!==this.type&&(D+=g.inDegree,T+=g.directedLoops),D-T},E.outboundDegreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));var D=0,T=0;return"directed"!==this.type&&(D+=g.undirectedDegree,T+=2*g.undirectedLoops),"undirected"!==this.type&&(D+=g.outDegree,T+=g.directedLoops),D-T},E.degreeWithoutSelfLoops=function(p){var g=this._nodes.get(p=""+p);if(!g)throw new ae('Graph.degreeWithoutSelfLoops: could not find the "'.concat(p,'" node in the graph.'));var D=0,T=0;return"directed"!==this.type&&(D+=g.undirectedDegree,T+=2*g.undirectedLoops),"undirected"!==this.type&&(D+=g.inDegree+g.outDegree,T+=2*g.directedLoops),D-T},E.source=function(p){var g=this._edges.get(p=""+p);if(!g)throw new ae('Graph.source: could not find the "'.concat(p,'" edge in the graph.'));return g.source.key},E.target=function(p){var g=this._edges.get(p=""+p);if(!g)throw new ae('Graph.target: could not find the "'.concat(p,'" edge in the graph.'));return g.target.key},E.extremities=function(p){var g=this._edges.get(p=""+p);if(!g)throw new ae('Graph.extremities: could not find the "'.concat(p,'" edge in the graph.'));return[g.source.key,g.target.key]},E.opposite=function(p,g){p=""+p;var D=this._edges.get(g=""+g);if(!D)throw new ae('Graph.opposite: could not find the "'.concat(g,'" edge in the graph.'));var T=D.source.key,O=D.target.key;if(p===T)return O;if(p===O)return T;throw new ae('Graph.opposite: the "'.concat(p,'" node is not attached to the "').concat(g,'" edge (').concat(T,", ").concat(O,")."))},E.hasExtremity=function(p,g){g=""+g;var D=this._edges.get(p=""+p);if(!D)throw new ae('Graph.hasExtremity: could not find the "'.concat(p,'" edge in the graph.'));return D.source.key===g||D.target.key===g},E.isUndirected=function(p){var g=this._edges.get(p=""+p);if(!g)throw new ae('Graph.isUndirected: could not find the "'.concat(p,'" edge in the graph.'));return g.undirected},E.isDirected=function(p){var g=this._edges.get(p=""+p);if(!g)throw new ae('Graph.isDirected: could not find the "'.concat(p,'" edge in the graph.'));return!g.undirected},E.isSelfLoop=function(p){var g=this._edges.get(p=""+p);if(!g)throw new ae('Graph.isSelfLoop: could not find the "'.concat(p,'" edge in the graph.'));return g.source===g.target},E.addNode=function(p,g){return function(T,O,V){if(V&&!dt(V))throw new pe('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(V,'"'));if(V=V||{},T._nodes.has(O=""+O))throw new Se('Graph.addNode: the "'.concat(O,'" node already exist in the graph.'));var ne=new T.NodeDataClass(O,V);return T._nodes.set(O,ne),T.emit("nodeAdded",{key:O,attributes:V}),ne}(this,p,g).key},E.mergeNode=function(p,g){if(g&&!dt(g))throw new pe('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(g,'"'));g=g||{};var D=this._nodes.get(p=""+p);return D?(g&&(wt(D.attributes,g),this.emit("nodeAttributesUpdated",{type:"merge",key:p,attributes:D.attributes,data:g})),[p,!1]):(D=new this.NodeDataClass(p,g),this._nodes.set(p,D),this.emit("nodeAdded",{key:p,attributes:g}),[p,!0])},E.updateNode=function(p,g){if(g&&"function"!=typeof g)throw new pe('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(g,'"'));var D=this._nodes.get(p=""+p);if(D)return g&&(D.attributes=g(D.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:p,attributes:D.attributes})),[p,!1];var O=g?g({}):{};return D=new this.NodeDataClass(p,O),this._nodes.set(p,D),this.emit("nodeAdded",{key:p,attributes:O}),[p,!0]},E.dropNode=function(p){var g,D=this._nodes.get(p=""+p);if(!D)throw new ae('Graph.dropNode: could not find the "'.concat(p,'" node in the graph.'));if("undirected"!==this.type){for(var T in D.out){g=D.out[T];do{Wr(this,g),g=g.next}while(g)}for(var O in D.in){g=D.in[O];do{Wr(this,g),g=g.next}while(g)}}if("directed"!==this.type)for(var V in D.undirected){g=D.undirected[V];do{Wr(this,g),g=g.next}while(g)}this._nodes.delete(p),this.emit("nodeDropped",{key:p,attributes:D.attributes})},E.dropEdge=function(p){var g;if(arguments.length>1){var D=""+arguments[0],T=""+arguments[1];if(!(g=jt(this,D,T,this.type)))throw new ae('Graph.dropEdge: could not find the "'.concat(D,'" -> "').concat(T,'" edge in the graph.'))}else if(!(g=this._edges.get(p=""+p)))throw new ae('Graph.dropEdge: could not find the "'.concat(p,'" edge in the graph.'));return Wr(this,g),this},E.dropDirectedEdge=function(p,g){if(arguments.length<2)throw new Se("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Se("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var D=jt(this,p=""+p,g=""+g,"directed");if(!D)throw new ae('Graph.dropDirectedEdge: could not find a "'.concat(p,'" -> "').concat(g,'" edge in the graph.'));return Wr(this,D),this},E.dropUndirectedEdge=function(p,g){if(arguments.length<2)throw new Se("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Se("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var D=jt(this,p,g,"undirected");if(!D)throw new ae('Graph.dropUndirectedEdge: could not find a "'.concat(p,'" -> "').concat(g,'" edge in the graph.'));return Wr(this,D),this},E.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},E.clearEdges=function(){for(var p,g=this._nodes.values();!0!==(p=g.next()).done;)p.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},E.getAttribute=function(p){return this._attributes[p]},E.getAttributes=function(){return this._attributes},E.hasAttribute=function(p){return this._attributes.hasOwnProperty(p)},E.setAttribute=function(p,g){return this._attributes[p]=g,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:p}),this},E.updateAttribute=function(p,g){if("function"!=typeof g)throw new pe("Graph.updateAttribute: updater should be a function.");return this._attributes[p]=g(this._attributes[p]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:p}),this},E.removeAttribute=function(p){return delete this._attributes[p],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:p}),this},E.replaceAttributes=function(p){if(!dt(p))throw new pe("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=p,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},E.mergeAttributes=function(p){if(!dt(p))throw new pe("Graph.mergeAttributes: provided attributes are not a plain object.");return wt(this._attributes,p),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:p}),this},E.updateAttributes=function(p){if("function"!=typeof p)throw new pe("Graph.updateAttributes: provided updater is not a function.");return this._attributes=p(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},E.updateEachNodeAttributes=function(p,g){if("function"!=typeof p)throw new pe("Graph.updateEachNodeAttributes: expecting an updater function.");if(g&&!ji(g))throw new pe("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var D,T,O=this._nodes.values();!0!==(D=O.next()).done;)(T=D.value).attributes=p(T.key,T.attributes);this.emit("eachNodeAttributesUpdated",{hints:g||null})},E.updateEachEdgeAttributes=function(p,g){if("function"!=typeof p)throw new pe("Graph.updateEachEdgeAttributes: expecting an updater function.");if(g&&!ji(g))throw new pe("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var D,T,O,V,ne=this._edges.values();!0!==(D=ne.next()).done;)O=(T=D.value).source,T.attributes=p(T.key,T.attributes,O.key,(V=T.target).key,O.attributes,V.attributes,T.undirected);this.emit("eachEdgeAttributesUpdated",{hints:g||null})},E.forEachAdjacencyEntry=function(p){if("function"!=typeof p)throw new pe("Graph.forEachAdjacencyEntry: expecting a callback.");Co(!1,!1,!1,this,p)},E.forEachAdjacencyEntryWithOrphans=function(p){if("function"!=typeof p)throw new pe("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");Co(!1,!1,!0,this,p)},E.forEachAssymetricAdjacencyEntry=function(p){if("function"!=typeof p)throw new pe("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");Co(!1,!0,!1,this,p)},E.forEachAssymetricAdjacencyEntryWithOrphans=function(p){if("function"!=typeof p)throw new pe("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");Co(!1,!0,!0,this,p)},E.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):Us(this._nodes.keys(),this._nodes.size)},E.forEachNode=function(p){if("function"!=typeof p)throw new pe("Graph.forEachNode: expecting a callback.");for(var g,D,T=this._nodes.values();!0!==(g=T.next()).done;)p((D=g.value).key,D.attributes)},E.findNode=function(p){if("function"!=typeof p)throw new pe("Graph.findNode: expecting a callback.");for(var g,D,T=this._nodes.values();!0!==(g=T.next()).done;)if(p((D=g.value).key,D.attributes))return D.key},E.mapNodes=function(p){if("function"!=typeof p)throw new pe("Graph.mapNode: expecting a callback.");for(var g,D,T=this._nodes.values(),O=new Array(this.order),V=0;!0!==(g=T.next()).done;)O[V++]=p((D=g.value).key,D.attributes);return O},E.someNode=function(p){if("function"!=typeof p)throw new pe("Graph.someNode: expecting a callback.");for(var g,D,T=this._nodes.values();!0!==(g=T.next()).done;)if(p((D=g.value).key,D.attributes))return!0;return!1},E.everyNode=function(p){if("function"!=typeof p)throw new pe("Graph.everyNode: expecting a callback.");for(var g,D,T=this._nodes.values();!0!==(g=T.next()).done;)if(!p((D=g.value).key,D.attributes))return!1;return!0},E.filterNodes=function(p){if("function"!=typeof p)throw new pe("Graph.filterNodes: expecting a callback.");for(var g,D,T=this._nodes.values(),O=[];!0!==(g=T.next()).done;)p((D=g.value).key,D.attributes)&&O.push(D.key);return O},E.reduceNodes=function(p,g){if("function"!=typeof p)throw new pe("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new pe("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var D,T,O=g,V=this._nodes.values();!0!==(D=V.next()).done;)O=p(O,(T=D.value).key,T.attributes);return O},E.nodeEntries=function(){var p=this._nodes.values();return new sn(function(){var g=p.next();if(g.done)return g;var D=g.value;return{value:{node:D.key,attributes:D.attributes},done:!1}})},E.export=function(){var p=this,g=new Array(this._nodes.size),D=0;this._nodes.forEach(function(O,V){var te,X;g[D++]=(X={key:V},Er((te=O).attributes)||(X.attributes=wt({},te.attributes)),X)});var T=new Array(this._edges.size);return D=0,this._edges.forEach(function(O,V){var ne,X,de;T[D++]=(ne=p.type,de={key:V,source:(X=O).source.key,target:X.target.key},Er(X.attributes)||(de.attributes=wt({},X.attributes)),"mixed"===ne&&X.undirected&&(de.undirected=!0),de)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:g,edges:T}},E.import=function(p){var g,D,T,O,V,ne=this,te=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p instanceof I)return p.forEachNode(function(cn,Rn){te?ne.mergeNode(cn,Rn):ne.addNode(cn,Rn)}),p.forEachEdge(function(cn,Rn,zi,Io,um,cm,Xs){te?Xs?ne.mergeUndirectedEdgeWithKey(cn,zi,Io,Rn):ne.mergeDirectedEdgeWithKey(cn,zi,Io,Rn):Xs?ne.addUndirectedEdgeWithKey(cn,zi,Io,Rn):ne.addDirectedEdgeWithKey(cn,zi,Io,Rn)}),this;if(!dt(p))throw new pe("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(p.attributes){if(!dt(p.attributes))throw new pe("Graph.import: invalid attributes. Expecting a plain object.");te?this.mergeAttributes(p.attributes):this.replaceAttributes(p.attributes)}if(p.nodes){if(T=p.nodes,!Array.isArray(T))throw new pe("Graph.import: invalid nodes. Expecting an array.");for(g=0,D=T.length;g<D;g++){Dd(O=T[g]);var de=O.key,fe=O.attributes;te?this.mergeNode(de,fe):this.addNode(de,fe)}}if(p.edges){var Ie=!1;if("undirected"===this.type&&(Ie=!0),T=p.edges,!Array.isArray(T))throw new pe("Graph.import: invalid edges. Expecting an array.");for(g=0,D=T.length;g<D;g++){am(V=T[g]);var ft=V.source,Ot=V.target,Rt=V.attributes,an=V.undirected,un=void 0===an?Ie:an;"key"in V?(te?un?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:un?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,V.key,ft,Ot,Rt):(te?un?this.mergeUndirectedEdge:this.mergeDirectedEdge:un?this.addUndirectedEdge:this.addDirectedEdge).call(this,ft,Ot,Rt)}}return this},E.nullCopy=function(p){var g=new I(wt({},this._options,p));return g.replaceAttributes(wt({},this.getAttributes())),g},E.emptyCopy=function(p){var g=this.nullCopy(p);return this._nodes.forEach(function(D,T){var O=wt({},D.attributes);D=new g.NodeDataClass(T,O),g._nodes.set(T,D)}),g},E.copy=function(p){if("string"==typeof(p=p||{}).type&&p.type!==this.type&&"mixed"!==p.type)throw new Se('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(p.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof p.multi&&p.multi!==this.multi&&!0!==p.multi)throw new Se("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof p.allowSelfLoops&&p.allowSelfLoops!==this.allowSelfLoops&&!0!==p.allowSelfLoops)throw new Se("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var g,D,T=this.emptyCopy(p),O=this._edges.values();!0!==(g=O.next()).done;)Ks(T,"copy",!1,(D=g.value).undirected,D.key,D.source.key,D.target.key,wt({},D.attributes));return T},E.toJSON=function(){return this.export()},E.toString=function(){return"[object Graph]"},E.inspect=function(){var p=this,g={};this._nodes.forEach(function(ne,te){g[te]=ne.attributes});var D={},T={};this._edges.forEach(function(ne,te){var X,de=ne.undirected?"--":"->",fe="",Ie=ne.source.key,Qe=ne.target.key;ne.undirected&&Ie>Qe&&(X=Ie,Ie=Qe,Qe=X);var ft="(".concat(Ie,")").concat(de,"(").concat(Qe,")");te.startsWith("geid_")?p.multi&&(void 0===T[ft]?T[ft]=0:T[ft]++,fe+="".concat(T[ft],". ")):fe+="[".concat(te,"]: "),D[fe+=ft]=ne.attributes});var O={};for(var V in this)this.hasOwnProperty(V)&&!Zs.has(V)&&"function"!=typeof this[V]&&"symbol"!==Zt(V)&&(O[V]=this[V]);return O.attributes=this._attributes,O.nodes=g,O.edges=D,Ht(O,"constructor",this.constructor),O},I}(Hi.exports.EventEmitter);typeof Symbol<"u"&&(lt.prototype[Symbol.for("nodejs.util.inspect.custom")]=lt.prototype.inspect),[{name:function(w){return"".concat(w,"Edge")},generateKey:!0},{name:function(w){return"".concat(w,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(w){return"".concat(w,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(w){return"".concat(w,"EdgeWithKey")}},{name:function(w){return"".concat(w,"DirectedEdgeWithKey")},type:"directed"},{name:function(w){return"".concat(w,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(w){["add","merge","update"].forEach(function(I){var E=w.name(I),p="add"===I?Ks:ku;lt.prototype[E]=w.generateKey?function(g,D,T){return p(this,E,!0,"undirected"===(w.type||this.type),null,g,D,T,"update"===I)}:function(g,D,T,O){return p(this,E,!1,"undirected"===(w.type||this.type),g,D,T,O,"update"===I)}})}),w=lt,pd.forEach(function(I){var E=I.name,p=I.attacher;p(w,E("Node"),0),p(w,E("Source"),1),p(w,E("Target"),2),p(w,E("Opposite"),3)}),function(w){gd.forEach(function(I){var E=I.name,p=I.attacher;p(w,E("Edge"),"mixed"),p(w,E("DirectedEdge"),"directed"),p(w,E("UndirectedEdge"),"undirected")})}(lt),function(w){sm.forEach(function(I){var p,g,D,T;D=(p=I).type,T=p.direction,w.prototype[g=p.name]=function(O,V){if("mixed"!==D&&"mixed"!==this.type&&D!==this.type)return[];if(!arguments.length)return function Iu(w,I){if(0===w.size)return[];if("mixed"===I||I===w.type)return"function"==typeof Array.from?Array.from(w._edges.keys()):Us(w._edges.keys(),w._edges.size);for(var E,p,D=new Array("undirected"===I?w.undirectedSize:w.directedSize),T="undirected"===I,O=w._edges.values(),V=0;!0!==(E=O.next()).done;)(p=E.value).undirected===T&&(D[V++]=p.key);return D}(this,D);if(1===arguments.length){var ne=this._nodes.get(O=""+O);if(void 0===ne)throw new ae("Graph.".concat(g,': could not find the "').concat(O,'" node in the graph.'));return function Sr(w,I,E,p){var g=[];return zs(!1,w,I,E,p,function(D){g.push(D)}),g}(this.multi,"mixed"===D?this.type:D,T,ne)}if(2===arguments.length){V=""+V;var te=this._nodes.get(O=""+O);if(!te)throw new ae("Graph.".concat(g,':  could not find the "').concat(O,'" source node in the graph.'));if(!this._nodes.has(V))throw new ae("Graph.".concat(g,':  could not find the "').concat(V,'" target node in the graph.'));return function Au(w,I,E,p,g){var D=[];return Ws(!1,w,I,E,p,g,function(T){D.push(T)}),D}(D,this.multi,T,te,V)}throw new pe("Graph.".concat(g,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(E,p){var g=p.name,D=p.type,T=p.direction,O="forEach"+g[0].toUpperCase()+g.slice(1,-1);E.prototype[O]=function(X,de,fe){if("mixed"===D||"mixed"===this.type||D===this.type){if(1===arguments.length)return Su(!1,this,D,fe=X);if(2===arguments.length){fe=de;var Ie=this._nodes.get(X=""+X);if(void 0===Ie)throw new ae("Graph.".concat(O,': could not find the "').concat(X,'" node in the graph.'));return zs(!1,this.multi,"mixed"===D?this.type:D,T,Ie,fe)}if(3===arguments.length){de=""+de;var Qe=this._nodes.get(X=""+X);if(!Qe)throw new ae("Graph.".concat(O,':  could not find the "').concat(X,'" source node in the graph.'));if(!this._nodes.has(de))throw new ae("Graph.".concat(O,':  could not find the "').concat(de,'" target node in the graph.'));return Ws(!1,D,this.multi,T,Qe,de,fe)}throw new pe("Graph.".concat(O,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var V="map"+g[0].toUpperCase()+g.slice(1);E.prototype[V]=function(){var X,de=Array.prototype.slice.call(arguments),fe=de.pop();if(0===de.length){var Ie=0;"directed"!==D&&(Ie+=this.undirectedSize),"undirected"!==D&&(Ie+=this.directedSize),X=new Array(Ie);var Qe=0;de.push(function(ft,Ot,Rt,an,un,cn,Rn){X[Qe++]=fe(ft,Ot,Rt,an,un,cn,Rn)})}else X=[],de.push(function(ft,Ot,Rt,an,un,cn,Rn){X.push(fe(ft,Ot,Rt,an,un,cn,Rn))});return this[O].apply(this,de),X};var ne="filter"+g[0].toUpperCase()+g.slice(1);E.prototype[ne]=function(){var X=Array.prototype.slice.call(arguments),de=X.pop(),fe=[];return X.push(function(Ie,Qe,ft,Ot,Rt,an,un){de(Ie,Qe,ft,Ot,Rt,an,un)&&fe.push(Ie)}),this[O].apply(this,X),fe};var te="reduce"+g[0].toUpperCase()+g.slice(1);E.prototype[te]=function(){var X,de,fe=Array.prototype.slice.call(arguments);if(fe.length<2||fe.length>4)throw new pe("Graph.".concat(te,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(fe.length,")."));if("function"==typeof fe[fe.length-1]&&"function"!=typeof fe[fe.length-2])throw new pe("Graph.".concat(te,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===fe.length?(X=fe[0],de=fe[1],fe=[]):3===fe.length?(X=fe[1],de=fe[2],fe=[fe[0]]):4===fe.length&&(X=fe[2],de=fe[3],fe=[fe[0],fe[1]]);var Ie=de;return fe.push(function(Qe,ft,Ot,Rt,an,un,cn){Ie=X(Ie,Qe,ft,Ot,Rt,an,un,cn)}),this[O].apply(this,fe),Ie}}(w,I),function(E,p){var g=p.name,D=p.type,T=p.direction,O="find"+g[0].toUpperCase()+g.slice(1,-1);E.prototype[O]=function(te,X,de){if("mixed"!==D&&"mixed"!==this.type&&D!==this.type)return!1;if(1===arguments.length)return Su(!0,this,D,de=te);if(2===arguments.length){de=X;var fe=this._nodes.get(te=""+te);if(void 0===fe)throw new ae("Graph.".concat(O,': could not find the "').concat(te,'" node in the graph.'));return zs(!0,this.multi,"mixed"===D?this.type:D,T,fe,de)}if(3===arguments.length){X=""+X;var Ie=this._nodes.get(te=""+te);if(!Ie)throw new ae("Graph.".concat(O,':  could not find the "').concat(te,'" source node in the graph.'));if(!this._nodes.has(X))throw new ae("Graph.".concat(O,':  could not find the "').concat(X,'" target node in the graph.'));return Ws(!0,D,this.multi,T,Ie,X,de)}throw new pe("Graph.".concat(O,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var V="some"+g[0].toUpperCase()+g.slice(1,-1);E.prototype[V]=function(){var te=Array.prototype.slice.call(arguments),X=te.pop();return te.push(function(de,fe,Ie,Qe,ft,Ot,Rt){return X(de,fe,Ie,Qe,ft,Ot,Rt)}),!!this[O].apply(this,te)};var ne="every"+g[0].toUpperCase()+g.slice(1,-1);E.prototype[ne]=function(){var te=Array.prototype.slice.call(arguments),X=te.pop();return te.push(function(de,fe,Ie,Qe,ft,Ot,Rt){return!X(de,fe,Ie,Qe,ft,Ot,Rt)}),!this[O].apply(this,te)}}(w,I),function(E,p){var D=p.type,T=p.direction,O=p.name.slice(0,-1)+"Entries";E.prototype[O]=function(V,ne){if("mixed"!==D&&"mixed"!==this.type&&D!==this.type)return sn.empty();if(!arguments.length)return function yd(w,I){if(0===w.size)return sn.empty();var E="mixed"!==I&&I!==w.type,p="undirected"===I,g=w._edges.values();return new sn(function(){for(var D,T;;){if((D=g.next()).done)return D;if(T=D.value,!E||T.undirected===p)break}return{value:{edge:T.key,attributes:T.attributes,source:T.source.key,target:T.target.key,sourceAttributes:T.source.attributes,targetAttributes:T.target.attributes,undirected:T.undirected},done:!1}})}(this,D);if(1===arguments.length){var te=this._nodes.get(V=""+V);if(!te)throw new ae("Graph.".concat(O,': could not find the "').concat(V,'" node in the graph.'));return function Tu(w,I,E){var p=sn.empty();return"undirected"!==w&&("out"!==I&&void 0!==E.in&&(p=Ir(p,Vs(E.in))),"in"!==I&&void 0!==E.out&&(p=Ir(p,Vs(E.out,I?void 0:E.key)))),"directed"!==w&&void 0!==E.undirected&&(p=Ir(p,Vs(E.undirected))),p}(D,T,te)}if(2===arguments.length){ne=""+ne;var X=this._nodes.get(V=""+V);if(!X)throw new ae("Graph.".concat(O,':  could not find the "').concat(V,'" source node in the graph.'));if(!this._nodes.has(ne))throw new ae("Graph.".concat(O,':  could not find the "').concat(ne,'" target node in the graph.'));return function _d(w,I,E,p){var g=sn.empty();return"undirected"!==w&&(void 0!==E.in&&"out"!==I&&p in E.in&&(g=Ir(g,Gi(E.in,p))),void 0!==E.out&&"in"!==I&&p in E.out&&(I||E.key!==p)&&(g=Ir(g,Gi(E.out,p)))),"directed"!==w&&void 0!==E.undirected&&p in E.undirected&&(g=Ir(g,Gi(E.undirected,p))),g}(D,T,X,ne)}throw new pe("Graph.".concat(O,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(w,I)})}(lt),function(w){wd.forEach(function(I){var E,p,g,D,T,O,V;(function bd(w,I){var E=I.name,p=I.type,g=I.direction;w.prototype[E]=function(D){if("mixed"!==p&&"mixed"!==this.type&&p!==this.type)return[];var T=this._nodes.get(D=""+D);if(void 0===T)throw new ae("Graph.".concat(E,': could not find the "').concat(D,'" node in the graph.'));return function(O,V,ne){if("mixed"!==O){if("undirected"===O)return Object.keys(ne.undirected);if("string"==typeof V)return Object.keys(ne[V])}var te=[];return qs(!1,O,V,ne,function(X){te.push(X)}),te}("mixed"===p?this.type:p,g,T)}})(w,I),function(E,p){var g=p.name,D=p.type,T=p.direction,O="forEach"+g[0].toUpperCase()+g.slice(1,-1);E.prototype[O]=function(X,de){if("mixed"===D||"mixed"===this.type||D===this.type){var fe=this._nodes.get(X=""+X);if(void 0===fe)throw new ae("Graph.".concat(O,': could not find the "').concat(X,'" node in the graph.'));qs(!1,"mixed"===D?this.type:D,T,fe,de)}};var V="map"+g[0].toUpperCase()+g.slice(1);E.prototype[V]=function(X,de){var fe=[];return this[O](X,function(Ie,Qe){fe.push(de(Ie,Qe))}),fe};var ne="filter"+g[0].toUpperCase()+g.slice(1);E.prototype[ne]=function(X,de){var fe=[];return this[O](X,function(Ie,Qe){de(Ie,Qe)&&fe.push(Ie)}),fe};var te="reduce"+g[0].toUpperCase()+g.slice(1);E.prototype[te]=function(X,de,fe){if(arguments.length<3)throw new pe("Graph.".concat(te,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var Ie=fe;return this[O](X,function(Qe,ft){Ie=de(Ie,Qe,ft)}),Ie}}(w,I),E=w,D=(p=I).type,T=p.direction,O=(g=p.name)[0].toUpperCase()+g.slice(1,-1),E.prototype[V="find"+O]=function(X,de){if("mixed"===D||"mixed"===this.type||D===this.type){var fe=this._nodes.get(X=""+X);if(void 0===fe)throw new ae("Graph.".concat(V,': could not find the "').concat(X,'" node in the graph.'));return qs(!0,"mixed"===D?this.type:D,T,fe,de)}},E.prototype["some"+O]=function(X,de){return!!this[V](X,de)},E.prototype["every"+O]=function(X,de){return!this[V](X,function(fe,Ie){return!de(fe,Ie)})},function Ed(w,I){var p=I.type,g=I.direction,D=I.name.slice(0,-1)+"Entries";w.prototype[D]=function(T){if("mixed"!==p&&"mixed"!==this.type&&p!==this.type)return sn.empty();var O=this._nodes.get(T=""+T);if(void 0===O)throw new ae("Graph.".concat(D,': could not find the "').concat(T,'" node in the graph.'));return function(V,ne,te){if("mixed"!==V){if("undirected"===V)return $i(null,te,te.undirected);if("string"==typeof ne)return $i(null,te,te[ne])}var X=sn.empty(),de=new Do;return"undirected"!==V&&("out"!==ne&&(X=Ir(X,$i(de,te,te.in))),"in"!==ne&&(X=Ir(X,$i(de,te,te.out)))),"directed"!==V&&(X=Ir(X,$i(de,te,te.undirected))),X}("mixed"===p?this.type:p,g,O)}}(w,I)})}(lt);var Yn=function(w){function I(E){var p=wt({type:"directed"},E);if("multi"in p&&!1!==p.multi)throw new pe("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==p.type)throw new pe('DirectedGraph.from: inconsistent "'+p.type+'" type in given options!');return w.call(this,p)||this}return ct(I,w),I}(lt),Ou=function(w){function I(E){var p=wt({type:"undirected"},E);if("multi"in p&&!1!==p.multi)throw new pe("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==p.type)throw new pe('UndirectedGraph.from: inconsistent "'+p.type+'" type in given options!');return w.call(this,p)||this}return ct(I,w),I}(lt),Lu=function(w){function I(E){var p=wt({multi:!0},E);if("multi"in p&&!0!==p.multi)throw new pe("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return w.call(this,p)||this}return ct(I,w),I}(lt),Pu=function(w){function I(E){var p=wt({type:"directed",multi:!0},E);if("multi"in p&&!0!==p.multi)throw new pe("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==p.type)throw new pe('MultiDirectedGraph.from: inconsistent "'+p.type+'" type in given options!');return w.call(this,p)||this}return ct(I,w),I}(lt),Fu=function(w){function I(E){var p=wt({type:"undirected",multi:!0},E);if("multi"in p&&!0!==p.multi)throw new pe("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==p.type)throw new pe('MultiUndirectedGraph.from: inconsistent "'+p.type+'" type in given options!');return w.call(this,p)||this}return ct(I,w),I}(lt);function qr(w){w.from=function(I,E){var p=wt({},I.options,E),g=new w(p);return g.import(I),g}}return qr(lt),qr(Yn),qr(Ou),qr(Lu),qr(Pu),qr(Fu),lt.Graph=lt,lt.DirectedGraph=Yn,lt.UndirectedGraph=Ou,lt.MultiGraph=Lu,lt.MultiDirectedGraph=Pu,lt.MultiUndirectedGraph=Fu,lt.InvalidArgumentsGraphError=pe,lt.NotFoundGraphError=ae,lt.UsageGraphError=Se,lt}()}},br=>{br(br.s=792)}]);